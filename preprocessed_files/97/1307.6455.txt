ar x iv 1 30 7 64 55 v 1 m at h n t 2 3 ju l 20 13 the generalized locker problem keneth adrian p dagal kendee 2012 gmail com department of mathematics far eastern university manila philippines abstract the locker problem is frequently used in introducing some topics in elementary number theory like divisors and multiples it appears in many curricula ranging from elementary secondary and up to tertiary level in this paper i will provide the structure of the problem and algorithms in solving some modified problems 1 introduction the original locker problem stated there are 100 students and 100 lockers in a certain school each student has a certain locker number the students and the lockers are uniquely numbered from 1 to 100 the students had a certain game initially the lockers are all closed the first student opened all the lockers the second student closed every second locker the third student opened or closed every third locker this method goes until the 100 th student after all the students finish opening and closing the lockers how many lockers are left opened and what are the lockers which are left opened the locker problem varies in terms of the number of lockers and students but the number of lockers and students is assumed to be equal in most cases the number is 100 but there are cases wherein the number is 20 or 1000 the answer is known that those lockers whose number is a perfect square will be left opened in this paper we consider the possibility that the number of students and the number of lockers is unequal we also consider the possibility of students repeating turns and the possibility that some students will not participate in the activity but we preserve the rule of the problem which is every ith student will change the state of all lockers numbered j where i j in addition to this i will provide algorithms in finding the corresponding open or close lockers given a subset of students and vice versa 1 http arxiv org abs 1307 6455 v 1 2 some observations we have to note that every locker number j is assigned to a particular student i where i j lemma 1 let a be the set containing all students b be the set containing all the lockers then the number of elements of a is equal to the number of elements of b a b proof suppose a 6 b if a b then there exists lockers that are not assigned to students or assigned but to students who already had assignments by pigeonhole which contradicts our assumption now if a b then there exists students that have no assigned locker number whose numbers are greater than the largest locker number but in the problem rule these students will not have any effect on the outcome of the state of the lockers since every student numbered k a a k n where k is the largest locker number and a be the difference of the student number and the largest locker number does not have a multiple from 1 to k since the least possible multiple of k a is k a which is greater than k thus a b the lemma 1 shows that for every locker uniquely assigned to every student any additional student is immaterial lemma 2 given a and b 1 let s be the set of r element subset of a where r 0 1 2 n and a n then s 2 n 2 let l be the set of binary strings of 0 and 1 denoted by sj n such that every jth position of the string denote the state of the jth locker defined as sj 0 if jth locker is close 1 if jth locker is open then l 2 n proof the first claim is straightforward since n i 0 n i 2 n the second claim is also straight forward since 2 2 2 2 2 n 2 n every u s has a corresponding v l we will show that the correspondence is one to one and that follows bijection since we know that s l we define f s l where every subset of a has a corresponding result of states of the lockers as an example if ai is the only student who changes the state of the lockers then the corresponding string will be all 0 s except those positions which are multiple of i considering that the initial string is consists of all 0 s for now we consider initial states of the locker to be all closed which implies all sj s are 0 s but later on we generalize it to any random combination of state of lockers theorem 1 suppose u 1 is a 1 element subset of a and u 1 s then there is no other u s such that u 1 and u have the same image v l 2 proof considering the initial string consisting of all 0 s if u 1 ai then all sj s of string v are 1 where i j this implies that all j s less than i are 0 s we look for another u s such that u 6 u 1 and the image of u is also v if the image of u is v then all j s less than i are 0 s for this there is no ak a for all k i where ak u suppose a 1 u then s 1 1 which contradicts our assumption that s 1 0 inductively suppose ak u since every aj u where j 1 2 3 k 1 then that assures that sj 1 which contradicts our assumption that sj 0 now since u 6 u 1 and it follows that u 1 u we consider every sj where ci j c 1 i c 1 2 3 n i 1 all sj 0 every jth locker will only be touched once by every aj student then it follows that aj u we only left for j c 1 i similar reasoning as above we show that u u 1 corollary 1 every u s is uniquely assigned to v l proof now suppose there are two u 1 u 2 s where the image of u 1 and u 2 is v wlog we let min ai u 1 such that ai u 2 but by theorem 1 ai u 2 by the lemma 2 and corollary 1 we have shown that f is a bijective map where f is defined as for every ai u and u s will change the state of all lockers numbered j the jth position in v l where i j 3 the structure of the locker problem we consider first the sequence of students who will change the state of the lockers we consider repeating turns of students too we have take into consideration the possibility that there are students who will not participate in the game theorem 2 let s be the set of r element subset of a where r 0 1 2 n and a n operation is defined to be next to change the state of the locker then s is an abelian group proof let ai and aj be distinct students ai aj aj ai let a particular bj b the change for bj is the same whoever comes first and thus wlog we can let every ai u to be in ascending order similarly associativity follows considering v 0 n as the initial state of the lockers where the pre image of v is then for every ui s ui ui it is easy to see that ui ui ui 2 since every student ai changes the state of the locker twice that means for a particular locker bj if it is not touched by ai it is clear but if it is touched twice then 0 becomes 1 1 becomes 0 or 1 becomes 0 and 0 becomes 1 and lastly for every u 1 u 2 s u 1 u 2 s this is clear since s is a power set of a remark 1 suppose u 1 u 2 then clearly u 1 u 2 s now suppose u 1 u 2 6 then u 1 u 2 s since for all ai u 1 u 2 appears twice in the sequence which will make all these ai s not affect the state since ai 2 and thus u 1 u 2 s it should be noted that the structure of s is the same as the structure of n where n is the power set of n and is the symmetric difference operation 3 it can be seen that l zn 2 where n means the number of z 2 in a row l is also an abelian group the is defined as position wise addition in the string and knowing that z 2 is an abelian group where is defined to be addition modulo 2 everything is barely straightforward another immediate consequence of the theorem is that if a certain ai repeat his turn k times then if k is even ai does not affect the state of the lockers otherwise he does but same effect when he did not repeat his turn theorem 3 given f s l then f is an isomorphism map proof we know that f is a bijective map this implies that every u s has a unique image v l and every v l is an image if f u v and f u v then f u u f u f u v v this is true since for a particular locker bj with a state sj if for every ai u u touch the locker then that consists the number of i s such that i j in fact if the number of divisors in u and u is of different parity then sj 1 otherwise sj 0 with this f u u f u f u v v thus this proves that f is an isomorphism map we take into consideration 0 n that is all lockers are initially closed as our initial state actually suppose initially it is a random combination of open or close lockers we will show that it can still be modified to the original consideration as 0 n to make the problem simpler theorem 4 suppose in general the initial v l is not necessarily v 0 n then f v g and f v g where f s l g u s l for all u s and f u v proof since f is an isomorphism map then every v l is an image of a unique u s and also v g f u f u s f u f u f s f s f s f now since f v g and v v 0 n then f v g v v g remark 2 take note that l is also an abelian group do not be confused the operation on s with the mapping notation 4 some modified problems for the remaining part we now look for u s such that we want to have v l or vice versa in particular if we send all students then the perfect square locker numbered will remain open we first state some well known theorems 4 theorem 5 the number of divisors of n denoted by d n is given by the formula d n k i 1 i 1 where n k i 1 pi i pi is the ith prime number and i is the number of pi factors of n corollary 2 if n is a perfect square then d n is odd otherwise d n is even theorem 6 given f a v then v sj n where sj 0 if j 6 p 2 1 if j p 2 for some natural numbers p proof this is an immediate consequence of the theorem 5 and corollary 2 proposition 1 given f u v and u is a 1 element subset of a then v sj n where sj 0 if i j 1 if i j proof by the rule of the game and considering 0 n as the initial state theorem 7 given f u v and u is a n 1 element subset of a then v sj n where sj 0 if j 6 p 2 i j j p 2 i j 1 if j 6 p 2 i j j p 2 i j for some natural numbers p proof u a ai a ai a ai v f u f a ai f a f ai by theorem 6 and proposition 1 we are left with four cases 0 0 1 1 0 and 0 1 1 0 1 these cases are the sj s for f a f ai respectively the following definitions are redefined in this paper but taken in the paper of 2 the refinement is done to make the notations suit the notations in previous sections definition 1 let n n and n k i 1 pi i pi is the ith prime number and i is the number of pi factors of n the signature of n denoted by n is the set of all i s in n in other words n i i 1 2 3 k definition 2 let t n t n n n t suppose u t where t mk m 2 3 4 for some k n it is noted that if 1 is the set of squarefree numbers definition 3 let t n t n n n 0 1 2 m 1 mod 2 m 5 theorem 8 let t n given f u v if u t then v sj n where sj 0 if j t 1 if j t if v t then all ai u where i 1 t must march proof the proof is in the paper of 2 for other results see the paper of 2 suppose we add another rule that is ai can change the state of the lockers if ai 1 changed the state of the lockers in other words if ai is allowed to participate it is a must that all ak where k 1 2 3 i 1 must change the lockers first our concern now is to count the number of open lockers denoted by clearly n will be the number of closed lockers it is also clear that for the original problem the number of open lockers will be n we denote n n theorem 9 suppose u ai i 1 2 3 p where p n 2 then p n p n p proof for all j p the number of 1 s in v up to pth position is p for all j p j n the number of 1 s in v from pth position to nth position is n p n p this is true since for every sj j p if sj 0 becomes sj 1 and vice versa since p n 2 2 p n this follows that every ai u u is the complement of u where i p will not touch every corresponding lockers from p to n once thus p n p n p 5 algorithms for all modified problems the previous section provides some straightforward solutions to some particular cases in this section we will have algorithms in looking for u s such that we want to have v l or vice versa this may not be that efficient unlike the solutions provided in the previous section but this is more powerful than them since it solves any u s we can have the corresponding v l and vice versa recall that 1 is the set of squarefree numbers and we let set k 1 k s s 1 we also let p be the set of k element subset of p where p is the set of primes note that 1 p in fact we can have an injective set map h 1 p where for each x 1 h x pi x k i 1 pi one trivial example is h 1 this note is very important in the next theorem since for all nonprime elements of 1 it can be treated as subsets in p which are not 1 element subset in p furthermore the 1 element subset in p are the prime elements of 1 in addition to this we can partition p into z 0 z where z h r r 1 r z theorem 10 u ai i k 1 if and only if v sj n where sj 0 if j 6 k 1 if j k or simply sk 6 proof wlog we can let k 1 this implies that a 1 u all lockers touched by student a 1 will be closed except locker b 1 the first locker this is true since every i of ai u is k i 1 pi by theorem 5 and corollary 2 d i is even which means closed lockers in fact d i is a power of 2 conversely we let v sk clearly all ax where x k for all x n are not elements of u and ak u now all lockers bj where k j will be opened but we need to close all lockers bj where k j except locker bk thus apk u where p p and ap 1 p 2 k u where p 1 p 2 p inductively we have u ak apk ai i k m where m z 0 z 1 and where z h 1 r r p r z and thus u ai i k 1 from now on we consider the notation sk f uk let us state the two main algorithms algorithm 1 finding v l given u s u n while n 6 begin min n ak n n uk print k end proof given u s and let u u 1 find the min u 1 ak 1 then u 1 uk 1 u 1 uk 1 and let u 2 u 1 uk 1 find min u 2 ak 2 then u 2 uk 2 u 2 uk 2 in general we can have ui uki ui uki since ki ki 1 and if ki n 2 then u i aki and halt since all aki where ki n 2 touches only locker bi this implies the last step of the algorithm becomes ui uki where i is and v sj n where sj 0 if j 6 ki 1 if j ki by theorem 10 remark 3 in the proof above i used theorem 2 as my basis alternatively we can use set theory as our tool to clarify the above proof in remark 1 it is noted that the structure of s is the same as the structure of n where n is the power set of n and is the symmetric difference operation since structure is preserved then working on the abelian group n is same with working on s also the u 2 above means second iteration unlike the u 2 in theorem 2 which means u u algorithm 2 finding u s given v l u m for j 1 to length v if sj 1 m u uj else m the above algorithms seem simple but each part requires some algorithms too now it may be noted that the definitional algorithm can be use instead yes it can be used but the algorithms above comes natural with each other thus the algorithms provided here are all in one package now let us have the following algorithms for each part 7 algorithm 3 finding minimum ak in u s input aj u and u n min u aj 1 for i 2 to n if min aji then min aji output min u algorithm 4 generating uk input 1 and u n for i 1 to n while 1 i n 1 i ui output u 1 to un the other algorithms not stated above like set symmetric difference algorithm can be viewed at http www cplusplus com reference algorithm set symmetric difference and the algorithm generating for all element in 1 less than n can be seen in the work of 3 now that we have the algorithms there is a way in a finite steps but may not be the most effi cient algorithm in solving the locker problem thus concluding that the locker problem is now settled this conclusion is made possible since the current algorithms and researchers i have seen about the problem are more of case to case basis not the one i made which encompasses all possible cases references 1 lindsey sample the locker problem revisited expository paper masters thesis uni versity of nebraska lincoln july 2009 2 b torrence and s wagon the locker problem crux mathematicorum 33 4 may 2007 232 236 3 a o l atkin d j bernstein prime sieves using binary quadratic forms mathematics of computation 73 246 dec 19 2003 1023 1030 8 1 introduction 2 some observations 3 the structure of the locker problem 4 some modified problems 5 algorithms for all modified problems