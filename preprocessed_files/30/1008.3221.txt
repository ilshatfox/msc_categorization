ar x iv 1 00 8 32 21 v 1 m at h p r 1 9 a ug 2 01 0 pathwise taylor expansions for ito random fields rainer buckdahn ingo bulla and jin ma abstract in this paper we study the pathwise stochastic taylor expansion in the sense of our previous work 4 for a class of ito type random fields in which the diffusion part is allowed to contain both the random field itself and its spatial derivatives random fields of such an self exciting type particularly contains the fully nonlinear stochastic pdes of curvature driven diffusion as well as certain stochastic hamilton jacobi bellman equations we introduce the new notion of n fold derivatives of a random field as a fundamental device to cope with the special self exciting nature unlike our previous work 4 our new expansion can be defined around any random time space point where the temporal component does not even have to be a stopping time moreover the exceptional null set is independent of the choice of the random point as an application we show how this new form of pathwise taylor expansion could lead to a different treatment of the stochastic characteristics for a class of fully nonlinear spdes whose diffusion term involves both the solution and its gradient and hence lead to a definition of the stochastic viscosity solution for such spdes which is new in the literature keywords pathwise stochastic taylor expansion wick square stochastic viscosity solu tions stochastic characteristics 2000 ams mathematics subject classification 60 h 07 15 30 35 r 60 34 f 05 de partement de mathe matiques universite de bretagne occidentale f 29285 brest cedex france email rainer buckdahn univ brest fr department of bioinformatics university of go ttingen 37077 go ttingen email ibulla uni goettingen de this author was supported by a fellowship of the daad german academic exchange service department of mathematics university of southern california los angeles 90089 department of mathemat ics purdue university west lafayette in 47907 1395 email jinma usc edu this author is supported in part by us nsf grant 0505427 and 0806017 part of this work was completed while this author was visiting the department of mathematics university of bretagne occidentale france whose hospitality was greatly appreciated 1 http arxiv org abs 1008 3221 v 1 1 introduction in our previous work 4 we studied the so called pathwise stochastic taylor expansion for a class of ito type random fields the main result can be briefly described as follows suppose that u t x t x 0 t rn is an ito type random field of the form u t x u 0 x t 0 u 1 s x ds t 0 u 2 s x dbs t x 0 t r n 1 1 where b is a 1 dimensional standard brownian motion defined on a complete probability space f p if we denote f ft t 0 to be the natural filtration generated by b and augmented by all p null sets in f then under reasonable regularity assumptions on the integrands u 1 and u 2 the following stochastic taylor expansion holds for any stopping time and any f measurable square integrable random variable and for any sequence of random variables k k where k s are stopping times such that either k k or k k and k s are all f k measurable square integrable random variables converging to in l 2 it holds almost surely that u k k u a k b k c 2 b k b 2 1 2 p k q k b k b 1 2 x k k o k o k 2 where a b c p q x are all f measurable random variables and the remainder o k are such that o k k 0 as k in probability furthermore the six tuple a b c p q x can be determined explicitly in terms of u 1 u 2 and their derivatives by choosing u 1 and u 2 in different forms we then extended the taylor expansion to solutions of stochastic differential equations with initial state as parameters and to solutions of nonlinear stochastic pdes in the latter case we further introduced the notion of the stochastic super sub jets using the taylor expansion from which the definition of stochastic viscosity solution was produced we should note that in 4 all the sdes and spdes have the diffusion coefficient in the form g t x u t x that is they only involve the solutions themselves such a structure turns out to be essential for the so called doss sussmann transformation and in that case the stochastic viscosity solution became natural in this paper we are interested in the stochastic taylor expansion for random fields of the following form u t x u 0 x t 0 u 1 s x ds t 0 g t x du s x dbs t x 0 t r n 1 3 where u 1 is a random field and g is a deterministic function we shall assume that they are 2 smooth in the sense that all the desired derivatives exist and the degree of smoothness will be specified later given such a random field we again consider the possibility to expand u in the sense of 1 2 but this time in a more natural way we shall allow the pair 0 t rd to be arbitrary random points furthermore we should note that although the taylor expansion 1 2 holds almost surely in general the null set may depend on the choice of random point in this paper we shall look for a universal expansion in the sense that there is a subset with full probability measure on which the stochastic taylor expansion holds for all choices of random points these technical improvements make the stochastic taylor expansions much more user friendly and more importantly it will be more effectively used in our study of stochas tic viscosity solution especially in the proof of uniqueness as we shall see in our forthcoming publications on that subject as one can easily observe from 1 3 that the random field u is actually already a solution to a first order stochastic pde an immediate difficulty in deriving the taylor expansion is the characterization of the derivatives of the random field as it will increase in a bootstrap way very similar to those that one has often seen in the anticipating calculus as a consequence the original doss sussmann type transformation used in our previous works 4 5 6 no longer works in this case to overcome this difficulty we introduce the notion of n fold derivative of a random field which essentially takes u du dn 1 u as a vector valued random field and define its derivative in a recursive way such a definition turns out to be very close to the idea of converting a higher order ordinary differential equation to a first order system and is mainly motivated by the stochastic characteristics of a stochastic pde cf e g kunita 12 in fact by combining the definition of stochastic characteristics in 12 and the stochastic taylor expansion developed in this paper we are able to rigorously define a stochastic diffeomorphism that relates the stochastic pde of the form du t x f x u dxu d 2 xu dt g x dxu db i t t x 0 t r d u 0 x u 0 x x r d 1 4 to a pde without brownian components in their taylor expansions around any temporal spatial point generalizing the doss sussmann transformation in our previous works to the present case we should note that one of the main difficulties in the study of the stochastic viscosity solution can be described as local vs global that is the local nature of the viscosity solution vs the global nature of the stochastic analysis e g stochastic integrals our idea is to localize the stochastic integral or solution to the spde via the stochastic taylor expansion that we established in the previous section it should be noted that the universal set that we found in these expansions is the essential point here 3 finally we would like to point out that the topic of stochastic taylor expansion has been ex plored by many authors in various forms and used to provide numerical and other approximation schemes for sdes and spdes or randomized odes and pdes see for example 1 3 10 11 to mention a few these expansions often use either the lie algebraic structure of the path space or the chaotic type expansion of multiple stochastic integrals as a consequence it is hard to de duce the simultaneous spatial temporal expansions that we are pursuing in this work especially when the remainders are estimated in a pathwise manner we should also note that the path wise version of stochastic viscosity solutions suggested by lions souganidis 13 14 has found an effective framework recently using the theory of rough path cf caruana friz oberhauser 7 however due to the special nature of the rough path integrals the arguments seem to depend heavily on the fact that there exist stochastic characteristics in the form of c 3 diffeomorphisms which transform the spde to a pathwise pde consequently the spde studied in 7 while fully nonlinear in the drift seems to be restricted to the cases when the diffusion coefficient depends only linearly on du the gradient of the solution so that a chain rule type of argument could be applied the generality of the diffusion part in the fully non linear pde suggested in this paper and the stochastic characteristics related to it does not seem to be an easy consequence of such a method furthermore our taylor expansions are constructed within a more elementary stochastic analysis framework by exploiting the properties of brownian motion without using the advanced algebraic geometric structure of the path spaces therefore we believe that it provides a more accessible alternative this paper is organized as follows in section 2 we clarify all the necessary notations and state the main theorem in section 3 we give a fundamental estimate of this paper regarding multiple stochastic integrals in sections 4 and 5 we study the forward and backward taylor expansion respectively we note that in the stochastic case the temporal direction of the expansion does affect the outcome finally in section 6 we try to apply the taylor expansion to the solution of a class of nonlinear spdes and propose a possible definition of the stochastic viscosity solution in this case 2 preliminaries and statement of the main theorem throughout this paper we denote f p to be a complete probability space on which is defined an dimensional brownian motion b bt t 0 let f b fbt t 0 be the natural filtration generated by b augmented by the p null sets of f and let fb fb we denote m b 0 t to be the set of all fb stopping times such that 0 t p a s where t 0 is some fixed time horizon and denote mb 0 to be all f b stopping times that are almost surely finite 4 in what follows we write e also e 1 for a generic euclidean space whose inner products and norms will be denoted as the same ones and respectively and write b for a generic banach space with norm moreover we shall denote g fb to be a sub field of fb and for any x rd and constant r 0 we denote br x to be the closed ball with center x and radius r furthermore the following spaces of functions will be frequently used in the sequel we denote lp g e to be all e valued g measurable random variables with e p further we shall denote l g e p 1 l p g e lq fb 0 t b to be all b valued fb progressively measurable processes such that e t 0 t qdt in particular q 0 stands for all b valued fb progressively measurable processes and q denotes all processes in l 0 fb 0 t b that are uniformly bounded ck 0 t e e 1 to be the space of all e 1 valued functions defined on 0 t e which are k times continuously differentiable in t 0 t and times continuously differentiable in x e c k b 0 t e e 1 c k l 0 t e e 1 and c k p 0 t e e 1 etc to be the subspace of ck 0 t e e 1 where the subscript b means all functions and their partial derivatives are uniformly bounded l means all functions are of at most linear growth and p means all functions and their partial derivatives are of at most polynomial growth the subspaces with the combined subscripts of b l and p are defined in an obvious way for any sub field g fbt c k g 0 t le le 1 resp c k b g 0 t le le 1 c k p g 0 t le le 1 to be the space of all c k 0 t le le 1 resp c k b 0 t le le 1 c k p 0 t le le 1 valued random variables that are g b 0 t le measurable ck fb 0 t e e 1 resp c k b f b 0 t e e 1 c k p f b 0 t e e 1 to be the space of all random fields ck fbt 0 t e e 1 resp c k b fbt 0 t e e 1 c k p f b t 0 t e e 1 such that for fixed x e the mapping t 7 t x is fb progressively measurable and for p a e the mapping ck 0 t e e 1 resp c k b 0 t e e 1 c k p 0 t e e 1 if e 1 r we shall drop e 1 from the notation e g c k 0 t e and so on and we write c 0 0 0 t e e 1 c 0 t e e 1 and c 0 0 fb 0 t e c fb 0 t e etc to simplify notation finally for t x y 0 t rd r we denoted dx x x 1 xd d 2 dxx 2 xixj di j 1 dy y and dt t the meaning of dxy dyy etc should be clear 5 finally since the random fields that we are interested in are always of the form of 1 3 which is an spde already the following definition in 4 is useful consider the fully nonlinear second order spde u t x u 0 x t 0 f s x u du d 2 u s x ds t 0 g t x u du s x dbs 2 1 where t x 0 t rd and f and g are functions with appropriate dimensions definition 2 1 a random field u u t x t x 0 t rd is called a regular solution to spde 2 1 if i u c 0 2 fb 0 t rd ii u is an ito type random field with the form u t x u 0 x t 0 u 1 s x ds t 0 u 2 s x dbs t x 0 t r d where u 1 t x f t x u du d 2 u t x u 2 t x g t x u du t x for all t x 0 t rd p a s in this paper we will consider a special type of smoothness for a random field defined through what we shall call the n fold differentiability below such a characterization of differentiability is mainly motivated by the stochastic characteristics for stochastic pdes cf e g 12 which often take the form of a system of first order stochastic pdes the idea is actually quite similar to the well known transformation from a higher order ordinary differential equation ode to a first order system of odes to begin with we recall that for any multi index j j 1 jd its length is defined by j d k 1 jk we have the following definition definition 2 2 a random field c 0 n fb 0 t rd is called n fold differentiable in the spatial variable x if there exist n smooth random fields i c 0 n fb 0 t rd rdi 2 i n 1 with d 1 d and di n 2 i n 1 and the functions fi gi r d rdi 1 rd i 1 n such that denoting 1 the following properties are satisfied t 1 fi gi c p i 1 n t 2 for 1 i n it holds that i t y i 0 y t 0 fi y i 1 s y ds t 0 gi y i 1 s y dbs 2 2 for all t y 0 t rd with i 0 c 2 rd rdi 1 i n 6 t 3 for any 1 i n 1 m 1 and multi index j j 1 jd with j j 1 jd n it holds that sup djy i t y t 0 t y m l f p we shall call i i 2 n 1 the generalized derivatives of 1 with coefficients fi gi i 1 n for notational convenience we will often write f f 1 and g g 1 when there is no danger of confusion we denote the set of all n fold differentiable random fields by c 0 n f 0 t rd before we state the main result of this paper let us note again that the main feature of our stochastic taylor expansion is that it can be expanded around any random point and that the expansion holds almost surely with an exceptional set that is independent of the choice of but this amounts to saying that the expansion can be performed around any deterministic point with any deterministic increments outside a uniform exceptional set in other words the complicated approximating sequences k k in 1 2 can be replaced by simple deterministic increments t h x k for all h k near zero we should also note that for the purpose of our application in this paper we consider only the taylor expansion up to the second order and for that purpose the 3 fold differentiability of the random field would suffice the precise statement of our main result is the following theorem theorem 2 3 let c 0 3 fb 0 t rd be a random field satisfying the standard assump tions t 1 t 3 with generalized derivatives i i 2 3 4 and coefficients fi gi i 1 2 3 then for every 1 3 1 2 and every m n there exist a subset m with p m 1 such that for all t y 0 t bm 0 m we have the following taylor expansion t h y k t y ah b bt h bt c 2 bt h bt 2 p k 1 2 xk k 2 3 q k bt h bt h k 2 3 r m t t h y y k for all t h y k 0 t bm 0 here with f g f 1 g 1 one has a f y 2 t y 1 2 dzg y 2 t y g 2 y 3 t y b g y 2 t y c dzg y 2 t y g 2 y 3 t y p dy t y x d 2 y t y 2 4 q dyg y 2 t y dzg y 2 t y dy 2 t y furthermore the remainder of taylor expansion r m 0 t 2 rd 2 7 r is a measurable random field such that r m sup t s 0 t y z bm 0 r m t s y z l f p 2 5 7 proof since the proof of this theorem is quite lengthy and technical we shall split it into several cases and carry it out in the following sections remark 2 4 i it is worth noting that the universal estimate for the remainder r m is the main reason why the taylor expansion can now hold around any random space time point in other words the points t y and h k in theorem 2 3 can be replaced by any l 0 fb 0 t l 0 fb rd such that 0 t bm 0 p a s on except in that case the reminder should read r m r m where r m r m l f b p in what follows we denote r m to be a generic term satisfying 2 5 which is allowed to vary from line to line ii from the expressions 2 4 it is clear that the drift term f f 1 appears only in the coefficient a and it is in its original form in fact as we shall see in the proof the exact form of f t y f y 2 t y is not important at all we could simply change it to f t y and the results remains the same iii theorem 2 3 remains true if the assumption t 1 is replaced by the weaker assumption t 1 fj c 5 j p gj c 7 j p 1 j 3 however we shall not pursue this generality in this paper due to the length of the paper to end this section we give an example which more or less motivated our study example 2 5 let u u t x be a regular solution of the spde 2 1 and for simplicity we assume that both f and g are time homogeneous i e they are independent of the variable t and g is independent of x as well we define 1 u and i 1 i d i d 2 i 1 i 3 then assuming that the coefficients f and g are sufficiently smooth and their derivatives of all order are bounded one can show that t 1 t 3 are satisfied furthermore applying theorem 2 3 we see that on some subset of with p 1 independent of the expansion point 8 t x 0 t rd the stochastic taylor expansion 2 3 holds for u with a f x u du du 2 t x 1 2 gdug u du t x dug u du t x dpg u du t x du t x d 2 u t x dpg u du t x dpg u du t x b g u du t x c gdug u du t x dug u du t x dpg u du t x du t x 2 6 d 2 u t x dpg u du t x dpg u du t x p du t x x d 2 u t x q dug u du t x du t x d 2 u t x dpg u du t x for all h r and k rd such that t h 0 t and k m respectively here the coefficients f 2 g 2 f 3 and g 3 are obtained by differentiating 2 1 with respect to x the explicit expressions of the pathwise taylor expansion in 2 6 will be important for our study of the stochastic characteristics for spde 2 1 which will be discussed in the last section of this paper 3 some fundamental estimates before we prove the theorem let us first introduce the so called wick square of the brownian motion which is originated in the wiener homogeneous chaos expansion cf e g 9 19 for any 0 s t we define the wick square of bt bs to be bt bs 2 bt bs 2 t s moreover let l 0 fb w 0 1 2 loc 0 t rd denote the space of all random fields f l 0 fb 0 t r d such that f is p a s an element of w 0 1 2 loc 0 t rd u l 2 loc 0 t r d dxu l 2 loc 0 t r d where in this case dxu denotes the weak partial derivative of u with respect to x we begin by proving an important estimate for multiple stochastic integrals we consider the multiple stochastic integral defined recursively as follows let fj l 0 fb w 0 1 2 loc 0 t rd for 1 j n n n let x 0 t s x 1 and for j 1 n x j t s x s t fj sj x x j 1 t sj x dbsj s t t 3 1 9 it is also useful to define the similar multiple integrals for k 0 let x k k 1 t s x 1 and for l k x k l t s x s t fl ul x x k l 1 t ul x dbul s t t 3 2 then it is clear that x 1 j t s x j t s for j 1 we have the following regularity result proposition 3 1 let n n be given assume that fj l 0 fb w 0 1 2 loc 0 t r d 1 j n satisfy that cm p fj e x m t 0 dixfj t x pdtdx 3 3 for all m n p 1 and i i 1 id with i i 1 id 1 then it holds that m sup xnt s x s t 0 t s t x m l f p 3 4 for all 0 n 2 m ln proof the proof is based on the kolmogorov continuity criterion for random fields cf e g 23 theorem i 2 1 combined with an induction argument we note that throughout the proof we shall use the notations cm cm p cm k etc to represent the generic constants depending only on fi s t and the parameters in their subscripts which are allowed to vary from line to line we begin with the case n 1 in this case we write f 1 f and x 1 x for simplicity let m n 2 and 0 t s t applying sobolev s embedding theorem ho lder inequality 10 and noting that x 0 t s 1 we have e sup x m xt s x cme j 1 x m djxxt s x d 1 dx d 1 cm j 1 x m e s t djxf r x dbr d 1 dx 1 d 1 cm j 1 x m e s t djxf r x 2 dr d 1 2 dx 1 d 1 cm j 1 x m e s t d 1 2 d 1 s t djxf r x d 1 dr 2 d 1 d 1 2 dx 1 d 1 cm j 1 x m e s t d 1 2 1 s t djxf r x d 1 dr dx 1 d 1 cm s t 2 1 d 1 j 1 e x m t 0 djxf r x d 1 drdx 1 d 1 consequently e sup x m xt s x cm s t 2 1 d 1 endowing the space c bm of continuous functions defined on the closed m ball bm x r d x m with the sup norm and considering x 7 x 0 s x x m s 0 t as a c bm valued process we see that sup x m xt s x x 0 s x 0 t c bm applying the kolmogorov continuity criterion we conclude that m l f p for all 0 1 2 d 2 d 1 since we can choose 2 arbitrarily large 3 4 follows we now prove the inductional step that is we assume that 3 4 is true for n 1 and show that it is also true for n to do this we shall adapt the proof of the kolmogorov continuity criterion given in 23 to our framework let 0 t s t 2 and m n first note that 11 by a simple application of burkholder davis gundy and ho lder inequalities we have e sup r t s xnt r x p e sup r t s r t fn sn x x n 1 t sn x dbsn p cpe s t fn sn x 2 xn 1 t sn x 2 dsn p 2 3 5 cpe fn x p l 2 t s sup sn t s xn 1 t sn x p cp e fn x pn l 2 t s 1 n e sup sn t s xn 1 t sn x pn n 1 n 1 n by simply iterating the above argument we obtain that e sup r t s xnt r x p n cpe fn x pn l 2 t s e fn 1 x pn l 2 t s e sup sn t s xn 1 t sn x pn n 2 n 2 3 6 cp n k 1 e fk x pn l 2 t s furthermore with a similar argument as above we can also show that for all m k n p 1 and multi index i satisfying i 1 e sup t r s dixmt r x k e i 1 im 1 sup t r s r t di m fm sm t s 2 t di 1 f 1 dbs 1 dbsm 1 dbsm k cm k i 1 im 1 m j 1 e di j fj sj x mk l 2 t s 1 m cm k s t mk p 1 2 p i 1 im 1 m j 1 e di j fj sj x mk l 2 p t s 1 m here we applied the ho lder inequality in the last step above consequently if p mk 2 then the assumption 3 3 implies that for all m 0 x m e sup t r s dixmt r x k dx cm m k s t mk p 1 2 p 3 7 12 we can then conclude that for all 0 t s t 2 e sup x m xnt s x cme j 1 x m djxx n t s x d 1 dx d 1 cme i j 1 x m s t dixx n 1 t r x d j xfn r x dbr d 1 dx 1 d 1 cm i j 1 x m e s t dixx n 1 t r x 2 djxfn r x 2 dr d 1 2 dx 1 d 1 cm i j 1 x m e sup t r s dixx n 1 t r x d 1 djxfn x d 1 l 2 t s dx 1 d 1 consequently by ho lder inequality and 3 7 with p mk 2 n 1 d 1 we have e sup x m xnt s x cm i j 1 x m e sup t r s dixx n 1 t r x 2 d 1 dx 1 2 x m e djxfn x 2 d 1 l 2 t s dx 1 2 1 d 1 cm i 1 j 1 2 s t 1 2 n 1 d 1 1 2 x m e s t d 1 1 d 1 dixfj x 2 l 2 d 1 t s d 1 12 dx 1 d 1 cm s t n 2 1 d 1 i 1 j 1 2 e x m dixfj x 2 d 1 l 2 d 1 t s dx 1 2 1 d 1 in other words we obtained that e sup x m xnt s x cm s t n 2 1 d 1 0 t s t 3 8 13 next recall the multiple integrals x k l t s x defined by 3 2 for 0 r 1 r 2 r 3 t and 1 n 0 n define y nr 1 r 2 r 3 n 0 x xn n 0 nr 2 r 3 x x 1 n n 0 1 r 1 r 2 x 3 9 an easy calculation shows that x 1 nr 1 r 3 x r 3 r 1 x 1 n 1 r 1 un x fn un x dbun r 2 r 1 x 1 n 1 r 1 un x fn un x dbun r 3 r 2 x 1 n 1 r 1 un x fn un x dbun x 1 nr 1 r 2 x n 2 n 0 0 y nr 1 r 2 r 3 n 0 x x 1 n r 2 r 3 x 3 10 to simplify the further discussion we now assume without loss of generality that t 1 let dn be the set of all t n i 2 ni for some 0 i 2 n the set d n 1 dn is then the set of all dyadic numbers in 0 1 now let n n and 0 t s 1 be arbitrary dyadic numbers such that s t 2 n our aim is to estimate xt s x uniformly in t s d to this end we notice that there exists some k n such that t s belong to dk moreover denoting sj sup r dj r s tj sup r dj r t n j k we have sn sn 1 sk s tn tn 1 tk t therefore see also figure 1 x 1 n tn s x x 1 n tn sn x k 1 j n x 1 nsj sj 1 x n 2 n 0 0 y ntn sj sj 1 n 0 x 3 11 x 1 n tn s x x 1 n t s x k 1 j n x 1 n tj tj 1 x n 2 n 0 0 y ntj tj 1 s n 0 x 3 12 in order to estimate y ntn sj sj 1 n 0 x and y n tj tj 1 s n 0 x we notice that sj 1 sj 0 2 j 1 tj 1 tj 0 2 j 1 n j k and thus 0 sj tn sj sn sn tn 2 2 n 0 s tj 1 s t t tj 1 2 2 n 3 13 for n j k moreover recall that for every 0 1 2 there exists a l f p such that for all l l n with 0 l l n 2 p x l l t t h h l l 1 0 t t h t x m 1 14 s sk s sk sl sl tm tm sl 1 sl 1 ytm sl sl 1 y xsl sl 1 y xtm sl y figure 1 xs t x 1 2 s t and yt s 1 s 2 y 2 t s 1 s 2 n 0 for n 2 and n 0 1 thanks to the inductional hypothesis thus we have by 3 13 n 2 n 0 0 y ntn sj sj 1 n 0 x n 2 n 0 0 sj 1 sj n 0 1 sj tn n n 0 1 n 2 n 0 0 2 2 n 0 1 j 1 2 n n 0 1 n 1 2 n n 2 n 0 0 2 2 n 0 1 j n n 0 1 n 3 14 similarly we obtain n 2 n 0 0 y ntj tj 1 s n 0 x 2 n n 2 n 0 0 2 2 n 0 1 j n n 0 1 n 3 15 next we define kj sup x t j i t j i 1 x x m 0 i 2 j 1 n j k then combining 15 3 11 3 12 3 15 and 3 14 we deduce xnt s x xntn sn x k 1 j n xnsj sj 1 x x n tj tj 1 x n 2 n 0 0 y ntn sj sj 1 n 0 x n 2 n 0 0 y ntj tj 1 s n 0 x kn k 1 j n 2 kj 2 n 1 n 2 n 0 0 2 2 n 0 1 j n n 0 1 n j n 3 kj 2 n 1 n 2 n 0 0 2 2 n 0 1 j n n 0 1 n now let n 1 n n 2 define n m sup xnt s x s t s t d 2 n 1 s t 2 n x m and m m supn 1 n m then m m sup n 1 2 n 1 sup xnt s x s t d 0 s t 2 n x m sup n 1 2 n 1 j n 3 kj 2 n 1 n 2 n 0 0 2 2 n 0 1 j n n 0 1 n sup n 1 2 n 2 j n 2 n kj n 2 n 0 0 2 2 n 0 1 j n n 0 1 n sup n 1 2 n 2 j n 2 n kj n 2 n 0 0 2 2 n 0 1 j n 1 n nn 0 2 n 2 j 0 2 j kj n 1 2 2 n j 2 n 2 j 0 2 j kj n 1 2 1 2 n noting that by 3 8 e k j 2 j 1 i 0 e sup x m x t j i t j i 1 x 2 jcm 2 j n 2 1 cm 2 j n 2 2 3 16 16 we thus obtain for 4 n 2 that e m m 1 2 n 2 j 0 2 j e k j 1 n 1 1 2 n e 2 1 2 n 2 j 0 2 j cm 2 j n 2 2 n 1 1 2 n e 2 1 2 n 2 cm 1 1 2 n 2 2 n 1 1 2 n e 2 1 consequently m m l f p for all 0 n but since 0 1 2 is arbitrary we can extend the result to 0 n 2 finally note that the definitions of m m and n m as well as the continuity of the mapping t s 7 xt s x imply that m sup xnt s x s t 0 s t 2 1 x m l f p for all 0 n 2 and m n the proposition then follows from the recursive relation 3 10 the following corollary can be easily obtained by adapting the proof of proposition 3 1 in an obvious manner corollary 3 2 the statement of proposition 3 1 remains valid if for 1 i n dbsi is replaced by daisi in 3 1 where a i is either the brownian motion b or ais s s 0 t moreover 3 4 holds whenever 0 l 1 l 2 2 m ln where l 1 is the number of i 1 i n for which ais s s 0 t and l 2 n l 1 4 forward taylor expansion in this and next section we shall provide a complete proof of theorem 2 3 the results in each section however can also be applied independently and therefore are of interest in their own right we should note that unlike the usual taylor expansion in the stochastic case the direc tion of the time increment makes significant difference in the argument due to the progressive measurability of the random fields we will thus separate the two cases in this section we study the forward expansion and leave the backward case to the next section 4 1 forward temporal expansion we begin with the forward temporal expansion that is only the time variable has the increment let us first introduce the following extra notations for each t 0 we define the 2 dimensional 17 simplex 0 t t s 0 t r 0 t s t 4 1 for any real valued measurable functional defined on 0 t ir d l and m n we denote m sup t s x z t s 0 t x r d z r with x z m 4 2 furthermore by a slight abuse of notations in what follows we shall denote r to be any mea surable functional indexed by 1 3 1 2 such that m l f p for all m n and again it may vary from line to line our main result of this section is the following stochastic forward temporal taylor expansion proposition 4 1 assume that c 0 3 fb 0 t rd satisfies t 1 t 3 then for all m ln and 1 3 1 2 there exists a subset such that p 1 and that on for all 0 t t h t x rd the following expansion holds t h x t x ah b bt h bt c 2 bt h bt 2 h 1 r t t h x 4 3 where a f x 2 t x 1 2 dzg x 2 t x g 2 x 3 t x b g x 2 t x 4 4 c dzg x 2 t x g 2 x 3 t x proof let h 0 be such that 0 t t h t for any x rd we write t h x t x t h t f x 2 s x ds t h t g x 2 s x dbs i 1 i 2 4 5 where ii ii t h x i 1 2 are the two integrals we shall study their expansions separately we begin by i 1 the argument is very similar to that of 4 we provide a sketch for complete ness let h 1 x z 2 z 3 dzf x z 2 f 2 x z 3 1 2 tr g 2 g 2 x z 3 d 2 zf x z 2 for x z 2 z 3 r d rd 2 rd 3 then applying ito s formula we have f x 2 s x f x 2 t x s t h 1 x 2 r x 3 r x dr s t dzf x 2 r x g 2 x 3 r x dbr 4 6 18 for 0 t s t and x rd p a s we now show that there is a universal subset with p 1 on which 4 6 holds for all 0 t s t but for this it suffices to prove the random fields s t x 7 s t h 1 x 2 r x 3 r x dr s t dzf x 2 r x g 2 x 3 r x dbr have continuous versions to see this we try to make use of the kolmogorov continuity criterion for notational simplicity let us denote t x dzf x 2 t x g 2 x 3 t x t x 0 t r d then we can deduce from t 3 and the burkholder davis gundy inequality that for each k 2 e s t r x dbr s t r x dbr k ck e t t r x 2 dr k 2 e s s r x 2 dr k 2 e t 0 r x r x 2 dr k 2 ck t t k 2 s s k 2 e sup r 0 t x m r x k ck x x ke sup r 0 t x m dx r x k ck t t k 2 s s k 2 x x k for 0 s t t 0 s t t x x m and k n hence the kolmogorov continuity criterion renders that the random field s t r x dbr 0 t s t x m possesses a version that is continuous in t s x a similar estimate allows to prove that also the first integral in 4 6 admits a version continuous in t s x as well hence we conclude that on some of full probability measure the relation 4 6 holds for all 0 t s t and x x m consequently writing the integral i 1 as i 1 t h x f x 2 t x h t h t s t h 1 x 2 r x 3 r x drds t h t s t dzf x 2 r x g 2 x 3 r x dbrds and using the conclusion above we see that as a function of t h x i 1 is jointly continuous for all 0 t t h t and x rd over the universal set it then follows from corollary 3 2 that there exists an with p 1 such that for all 0 t t h t and x rd it holds that i 1 t h x f x 2 t x h h 1 r t t h x 4 7 in what follows we will not distinguish from 19 we now turn our attention to i 2 again we begin by denoting for x z 2 z 3 r d rd 2 rd 3 h 2 x z 2 z 3 dzg x z 2 f 2 x z 3 1 2 tr g 2 g 2 x z 3 d 2 zg x z 2 4 8 then for every x rd we again apply ito s formula to get for 0 t s t and p a s g x 2 s x g x 2 t x s t h 2 x 2 r x 3 r x dr 4 9 s t dzg x 2 r x g 2 x 3 r x dbr using the similar arguments as before we can find another universal subset still denoted by with p 1 on which 4 9 holds for all 0 t s t next using 4 9 it is easy to see that i 2 can be written as i 2 t h x g x 2 t x bt h bt t h t s t h 2 x 2 r x 3 r x drdbs t h t s t dzg x 2 r x g 2 x 3 r x dbrdbs g x 2 t x bt h bt i 2 1 t h x i 2 2 t h x 4 10 and we can claim as before that 4 10 holds for all 0 t t h t x m over a universal subset of full probability measure again denoted by we now analyze i 2 1 and i 2 2 separately using integration by parts we see that i 2 1 bt h bt t h t h 2 x 2 r x 3 r x dr t h t br bt h x 2 r x 3 r x dr then following the argument developed in the previous part we can show that the equality holds for all 0 t t h t x rd over an with p 1 note that sup 0 t t h t h bt h bt l f p 4 11 it follows that over i 2 1 t h x h 1 r t t h x 4 12 the estimate for i 2 2 is slightly more involved for notational simplicity let us define k x z 2 z 3 dzg x z 2 g 2 x z 3 x z 2 z 3 r d rd 2 rd 3 f x z 3 z 4 f 2 x z 3 f 3 x z 4 x z 3 z 4 r d rd 3 rd 4 g x z 3 z 4 g 2 x z 3 g 3 x z 4 h x z 2 z 3 dz 2 k x z 2 f x z 3 1 2 tr g g x z 3 d 2 z 2 k x z 2 20 where z 2 z 2 z 3 and z 3 z 3 z 4 moreover we denote i s x i s x i 1 s x i 2 3 then applying ito s formula we have k x 2 s x k x 2 t x s t h x 2 r x 3 r x dr s t dz 2 k x 2 r x g x 3 r x dbr again we assume that the equality holds for all 0 s t t and x rd on therefore i 2 2 t h x t h t s t k x 2 r x dbrdbs 1 2 dzg x 2 t x g 2 x 3 t x bt h bt 2 4 13 t h t s t r t h x 2 v x 3 v x dvdbrdbs t h t s t r t dz 2 k x 2 v x g x 3 v x dbvdbrdbs moreover proposition 3 1 implies that h 1 t h t s t r t dz 2 k x 2 v x g x 3 v x dbvdbrdbs r t t h x and corollary 3 2 implies that h 1 2 t h t s t r t h x 2 v x 3 v x dvdbrdbs r t t h x consequently we see that over 4 13 becomes i 2 2 t h x 1 2 dzg x 2 t x g 2 x 3 t x bt h bt 2 h 1 r t t h x 4 14 finally plugging 4 7 4 10 4 12 and 4 14 into 4 5 we obtain 4 3 and 4 4 with a universal exceptional null set proving the proposition 4 2 forward temporal spatial taylor expansion based on the forward temporal taylor expansion proposition 4 1 we now add the spatial incre ment our main result of this section is the following proposition proposition 4 2 assume that c 0 3 fb 0 t rd satisfying t 1 t 3 then for all m ln and 1 3 1 2 there exists some subset such that p 1 and that on for all 0 t t h t and x k rd t h x k t x ah b bt h bt c 2 bt h bt 2 p k 1 2 xk k q k bt h bt h k 2 3 r t t h x x k 4 15 21 where a f x 2 t x 1 2 dzg x 2 t x g 2 x 3 t x b g x 2 t x c dzg x 2 t x g 2 x 3 t x 4 16 p dx t x x d 2 x t x q dxg x 2 t x dzg x 2 t x dx 2 t x proof first let us write t h x k t x t h x k t h x t h x t x where the second above is the forward temporal expansion studied in the previous subsection in light of proposition 4 1 we need only prove the following stochastic spatial taylor expansion t h x k t h x dx t x k 1 2 d 2 x t x k k dxg x 2 t x dzg x 2 t x dx 2 t x k bt h bt 4 17 h k 2 3 r 1 t t h x x k to this end we first apply the standard taylor expansion and use the assumption t 3 to get t h x k t h x dx t h x k 1 2 d 2 x t h x k k k 3 r 1 t t h x x k 4 18 for all 0 t t h t x k rd p a s next differentiating the equation for 1 in 2 2 we have dx t x dx 0 x t 0 dxf x 2 s x dzf x 2 s x dx 2 s x ds t 0 dxg x 2 s x dzg x 2 s x dx 2 s x dbs for all t 0 t x rd p a s now applying proposition 4 1 to dx one can check that dx t h x dx t x dxf x 2 t x dzf x 2 t x dx 2 t x h 1 2 dx dzg x 2 t x g 2 x 3 dzg x 2 t x dx g 2 x 3 h dxg x 2 t x dzg x 2 t x dx 2 t x bt h bt 1 2 dx dzg x 2 t x g 2 x 3 dzg x 2 t x dx g 2 x 3 bt h bt 2 h 1 r t t h x 22 for all 0 t t h t x rd p a s consequently it follows from 4 11 that dx t h x dx t x dxg x 2 t x dzg x 2 t x dx 2 t x bt h bt h 2 r t t h x 4 19 for all 0 t t h t x rd p a s similarly one shows that d 2 x t h x d 2 x t x h r t t h x 0 t t h t x r d 4 20 combining 4 18 4 19 and 4 20 we obtain that t h x k t h x dx t h x k 1 2 d 2 x t h x k k k 3 r 1 t t h x x k dx t x k 1 2 d 2 x t x k k dxg x 2 t x dzg x 2 t x dx 2 t x k bt h bt k 3 r 1 t t h x x k h 2 r t t h x k h r t t h x k k for 0 t t h t x k rd p a s finally noting that k 3 h 2 k h k 2 cm h 3 k 3 cm h k 2 3 for all h 0 t k m we see that 4 17 holds hence the proposition follows 5 backward taylor expansion in this section we treat the backward taylor expansion that is when the temporal increments are negative as a general belief such an expansion would be more difficult than the forward one due to the obvious adaptedness issue but we shall see with our pathwise approach such difficulty is eliminated we nevertheless would like to separate its proof from the forward case because of the slight difference in the arguments we again take two steps first the backward temporal expansion and then the mixed time space expansion 5 1 backward temporal expansion we have the following analogy of proposition 4 1 23 proposition 5 1 assume that c 0 3 fb 0 t rd satisfies t 1 t 3 then for all m n and 1 3 1 2 there exists some subset with p 1 such that on for all 0 t h t t x rd the following expansion holds t h x t x ah b bt h bt c 2 bt h bt 2 h 1 r t h t x 5 1 where a f x 2 t x 1 2 dzg x 2 t x g 2 x 3 t x b g x 2 t x 5 2 c dzg x 2 t x g 2 x 3 t x proof applying the forward taylor expansion proposition 4 1 we have t x t h x f x 2 t h x 1 2 dzg x 2 t h x g 2 x 3 t h x h g x 2 t h x bt bt h 1 2 dzg x 2 t h x g 2 x 3 t h x bt bt h 2 h 1 r t h t x 5 3 for all 0 t h t t x rd on a full probability set our main task is to replace the temporal variable t h by t to do this we first apply ito s formula to g x 2 t x to obtain g x 2 t x g x 2 0 x t 0 h x 2 s x ds t 0 l x 2 s x dbs 5 4 where 2 t x 2 t x 3 t x and h x z 2 z 3 dzg x z 2 f 2 x z 3 1 2 tr g 2 g 2 x z 3 d 2 zg x z 2 l x z 2 z 3 dzg x z 2 g 2 x z 3 5 5 next we denote z z 2 z 3 and define 3 t x 3 t x 4 t x g t x g x 2 t x and g 3 x z 3 z 4 g 2 x z 3 g 3 x z 4 applying proposition 4 1 to g and using 5 4 we deduce that g t x g t h x h x 2 t h x 1 2 dz l x 2 t h x g 3 x 3 t h x h l x 2 t h x bt bt h 1 2 dz l x 2 t h x g 3 x 3 t h x bt bt h 2 h 1 r t h t x 24 for all 0 t h t t x rd which also holds on the set consequently we obtain that g t x g t h x l x 2 t h x bt bt h h 2 r t h t x dzg x 2 t h x g 2 x 3 t h x bt bt h 5 6 h 2 r t h t x in particular by virtue of the ho lder continuity of the brownian motion 4 11 and the assumption t 3 we see from 5 6 that g x 2 t x g x 2 t h x h r t h t x 5 7 similarly we can also derive the following recall 5 5 f x 2 t x f x 2 t h x h r t h t x l x 2 t x l x 2 t h x h r t h t x 5 8 for all 0 t h t t x m on the set now combining 5 5 5 8 we obtain that possibly on a different set with p 1 g x 2 t h x bt bt h g x 2 t x bt bt h dzg x 2 t h x g 2 x 3 t h x bt bt h 2 h 3 r t h t x g x 2 t x bt bt h dzg x 2 t x g 2 x 3 t x bt bt h 2 h 3 r t h t x moreover rewriting 5 8 as f x 2 t h x h f x 2 t x h h 1 r t h t x and noting from 5 8 recall definition 5 5 that dzg x 2 t h x g 2 x 3 t h x bt bt h 2 dzg x 2 t x g 2 x 3 t x bt bt h 2 h 3 r t h t x and that dzg x 2 t h x g 2 x 3 t h x h dzg x 2 t x g 2 x 3 t x h h 1 r t h t x we obtain from 5 3 that t x t h x f x 2 t x 1 2 dzg x 2 t x g 2 x 3 t x h g x 2 t x bt bt h 1 2 dzg x 2 t x g 2 x 3 t x bt bt h 2 h 3 r t h t x 25 finally since 1 3 1 2 is arbitrary the proposition follows 5 2 backward temporal spatial expansion we now give the complete statement of the backward temporal spatial expansion proposition 5 2 assume that c 0 3 fb 0 t rd satisfying t 1 t 3 then for all m n and 1 3 1 2 there exists some subset such that p 1 and that on for all 0 t h t t x k rd t h x k t x ah b bt h bt c 2 bt h bt 2 p k 1 2 xk k q k bt h bt h k 2 3 r t h t x x k 5 9 where a f x 2 t x 1 2 dzg x 2 t x g 2 x 3 t x b g x 2 t x c dzg x 2 t x g 2 x 3 t x 5 10 p dx t x x d 2 x t x q dxg x 2 t x dzg x 2 t x dx 2 t x proof as in the forward expansion case we need only show that for all m n and 1 3 1 2 there exists some subset of full probability such that on for all 0 t h t t x k rd t h x k t h x dx t x k 1 2 d 2 x t x k k 5 11 dxg x 2 t x dzg x 2 t x dx 2 t x k bt h bt h k 2 3 r t h t x x k from the usual taylor expansion with the remainder in the lagrange form we have t h x k t h x dx t h x k 1 2 d 2 x t h x k k k 3 r t h t x x k 26 for 0 t h t t x k rd p a s moreover from proposition 5 1 it follows that dx t x dx t h x dx g x 2 t x bt bt h h 2 r t h t x dxg x 2 t x dzg x 2 t x dx 2 t x bt bt h h 2 r t h t x and d 2 x t x d 2 x t h x h r t h t x consequently t h x k t h x dx t x k 1 2 d 2 x t x k k dxg x 2 t x dzg x 2 t x dx 2 t x k bt h bt k 6 r t h t h x k h 2 kr t h t x h r t h t x k k thus by virtue of k 6 h 2 k h k 2 cm h k 2 3 for h 0 t and k m we derive 5 11 this combined with 5 3 leads us to the backward temporal spatial expansion 5 9 finally by combining proposition 4 2 and proposition 5 2 we have completed the proof of theorem 2 3 6 application to stochastic pdes having tried so hard to develop the various forms of stochastic taylor expansion as an application in this section we shall try to use it to study the stochastic viscosity solutions for fully nonlinear spde following the idea that we developed in our earlier work 4 in order not to over complicate the computation we shall consider the following simpler version of the fully nonlinear spde 2 1 u t x u 0 x t 0 f x u du d 2 u ds t 0 g x du dbs t x 0 r d 6 1 compared to spde 2 1 as well as example 2 5 we see that here the diffusion coefficient g in 6 1 is independent of u the general case could be treated in a similar way but with more complicated expressions since our purpose here is to outline our idea of a new definition of stochastic viscosity solution without adding too much technical complexity into this already 27 lengthy paper we shall leave the study of the general case to a forthcoming paper we should also note that in 6 1 we are using the stratonovich integral instead of the ito integral for the simplicity of the presentation the following relation is worth noting g x du dbt g x du dbt 1 2 dzg x du dx g s du dt 6 2 it is worth pointing out that even in this simplified form the nonlinearity of the function g on du already makes it difficult to apply the rough path approach of 7 directly here to explain our idea of the definition of stochastic viscosity solution let us first apply theorem 2 3 to the regular solution u bearing the relation 6 2 in mind we have u t h x k u t x ah b bt h bt c 2 bt h bt 2 p k 1 2 xk k q k bt h bt h k 2 3 r m t t h x k 6 3 where a f x u du du 2 t x b g x du t x 6 4 c dzg x du t x dx g x du t x p du t x x d 2 u t x q dx g x du t x dxg x du d 2 u t x dzg x du t x it is interesting to note that in this simple case the terms involving d 2 u can be written collectively as suppressing variables f d 2 u d 2 u dzg x du bt h bt k 1 2 d 2 u dzg x du dzg x du bt h bt 2 1 2 d 2 u k k f d 2 u 1 2 d 2 u dzg x du bt h bt k dzg x du bt h bt k compared to the classical deterministic taylor expansion and the spdes studied in 4 in which g is independent of du we can see that in a general case the terms involving d 2 u becomes much more complicated and our previous method via doss sussmann will face a fundamental challenge especially in the uniqueness proof we therefore will try to find a different approach to define the stochastic viscosity solutions using the stochastic characteristics introduced by kunita 12 combined with our results on stochastic taylor expansions this new method also reflects the basic ideas of the works of lions and souganidis 13 14 16 and 17 and in a sense includes 28 our previous work 4 as special case for simplicity we shall now assume all processes involved are real valued to motivate our definition of the stochastic viscosity solution let us suppose in a first step that the coefficients of spde 1 4 are sufficiently smooth and that this equation admits a regular solution u c 0 fb 0 t r under this assumption we compare the solution u with a smooth test field c 0 fb 0 t r defined as the unique solution of the equation d t x t x dt g x d t x dbt 6 5 0 x 0 x for t 0 t x rd where c b 0 t r g c b r r r and 0 c p r let us now fix an fb measurable 0 t valued random variable and an fb measurable rd valued random variable we say that u achieves a local left maximum in if for almost all t there is some 0 which may depend on such that u t x u for all t x 0 t rd with t and x following the approach by kunita see theorem 6 1 2 in 12 we formally introduce the following stochastic characteristics for the moment let us assume that the random time is actually deterministic to avoid further complications keep in mind however that the taylor expansion will hold even for the arbitrary random time t x z x t dzg s s x z dbs t x y z y t g s s x z s x z dzg s s x z dbs 6 6 t x z z t dxg s s x z dbs where t 0 x y z r 3 and we hope to be able to define a transformation t x by t t x d t x t x t x d t x 6 7 for notational simplicity let us now denote l x z dzg x z h x z g x z zdzg x z k x z dxg x z 6 8 29 remark 6 1 we note that if the function g is linear in du then the situation will become much simpler and the arguments below would become straightforward to be more precise let us consider the following two cases i g x du h du where h is a constant vector since dxg dxv x and dzg h the taylor expansion 6 4 is drastically simplified also the characteristics 6 6 becomes almost triviel z y and x h t ii g x du v x du see 7 in this case one hasdxg x z dxv x z dzg x z v x thus the taylor expansion 6 4 will also become much simpler furthermore the characteristics 6 6 now become disentangled sdes t x x t v s x dbs t x y z y t x z z t dxv s x s x z dbs and 6 7 takes the special form t x t t x in other words the transformation is globally well defined by an easy and explicit expression in what follows we shall denote l h k also for any function x y z we denote dx dy dz t then we can write for example the first equation in 6 6 in the ito integral from t x z x t l s s x z dbs 6 9 x t 1 2 l s s x z ds t l s s x z dbs now treating the random fields and in 6 6 the same way and applying the stochastic backward temporal taylor expansion to we have for all 1 3 1 2 t x z x l x z bt b 1 2 l x z bt b 2 t 3 r m t x y z y h x z bt b 1 2 h x z bt b 2 t 3 r m t x z z k x z bt b 1 2 k x z bt b 2 t 3 r m 6 10 on the other hand writing 6 5 in an ito integral form we have t x 0 x t s x 1 2 dzg x d s x dx g x d s x ds t g x d s x dbs 6 11 0 x t f s x ds t g x 2 s x dbs 30 where f and g are defined in an obvious way and with 1 t x t x 2 t x d t x 3 t x d d 2 t x note that differentiating the both sides of 6 11 we have dd t x dxf t x dt dxg x d t x dzg x d t x d 2 x t x dbt 6 12 applying the backward temporal taylor expansion theorem 2 3 again to the random field around any point with f 2 t x dxf t x g 2 x z 1 z 2 dxg x z 1 dzg x z 1 z 2 we obtain after some simple cancelations that t x t g d bt b 1 2 dzgdxg d dzg d 2 d 2 x bt b 2 d x dx g d x bt b 6 13 1 2 d 2 x x 2 t x 2 3 r m we note that the above holds for all and all m let us now define the desired random field we should note that our main purpose here is to find such a transformation so as to eliminate the stochastic integral in other words we shall look for such that has the following first order taylor expansion t x x t x t t 3 r m d t x d x t d x t t 3 r m 6 14 here t denotes the left partial derivative with respect to t to this end we note that 6 6 and 6 7 imply that for t one has x x d x x x d x x x r 6 15 and hence d x d x holds for all x r as well next we look at the taylor expansion for both and recalling 6 8 and the taylor expansions 6 10 we shall first take x x t x d t x and then replacing x by t x d t x and by x in 6 13 it should be noted that after these substitutions the remainder will look like r m t x t x d t x a slightly more complicated form than the original ones to make sure the accuracy of the expansion in what follows we shall denote r m loc sup t s 0 t x bm 0 r m t s x t x d t x 31 then it is not hard to show that there exists an increasing sequence 1 f b with lim p 1 such that r m loci l f p for all 1 keeping such a modification in mind we can now proceed to write down the taylor expansion t t x d t x x x t g x d x bt b 1 2 dzgdxg x d x dzg x d x 2 d 2 x x bt b 2 d x dzg x d x bt b d x d 2 zg x d x t d x t bt b 1 2 d x l x d x bt b 2 6 16 1 2 d 2 x x dzg x d x 2 bt b 2 dxg x d x dzg x d x bt b 2 t 3 r m loc x x t g x d x bt b 1 2 dzgdxg x d x bt b 2 d x dzg x d x bt b 1 2 d x l x d x bt b 2 d x d 2 zg x d x t d x t bt b t 3 r m loc on the other hand from 6 6 we see that t x t x t x d t x h x d t x bt b 1 2 h x d t x bt b 2 t 3 r m loc using the form 6 14 and the smoothness assumptions on all the coefficients and then noting 6 15 one can easily rewrite above as t x t x t x d t x h x d x bt b dzh x d x t d x t bt b 1 2 h x d x bt b 2 t 3 r m loc 32 now recalling the relation 6 7 the fact 6 16 and the definition of h 6 8 we obtain that t x t x t x d t x h x d x bt b 1 2 h x d x bt b 2 t 3 r m x x t g x d x bt b 1 2 dzgdxg x d x bt b 2 d x dzg x d x bt b 1 2 d x l x d x bt b 2 d x d 2 xg x d x t d x t bt b 6 17 g x d x d x dzg x d x bt b dzh x d x t d x t bt b 1 2 h x d x bt b 2 t 3 r m loc x x t 1 2 dzgdxg x d x bt b 2 1 2 d x l x d x bt b 2 d x d 2 xg x d x t d x t bt b dzh x d x t d x t bt b 1 2 h x d x bt b 2 t 3 r m loc since l dxzg 0 d 2 zg and h dxg zdxzg 0 zd 2 zg one can check that 1 2 dzgdxg x d x 1 2 d x l x d x 1 2 h x d x 0 and d x d 2 zg x d x t d x t bt b dzh x d x t d x t bt b 0 in other words 6 17 leads to that t x x x t t 3 r m loc 6 18 clearly 6 18 indicates that t x x t d x d x we can now define the notion of stochastic viscosity solution for 1 4 33 definition 6 2 a random field u c 0 t rd is called a stochastic viscosity subsolution resp supersolution of 1 4 if u 0 x u 0 x u 0 x u 0 x for all x r d and if for any l 0 fb 0 t l 0 fb rd and any not necessarily adapted random field c 0 2 0 t rd having the expansion 6 13 it holds that f u d d 2 x p a s on the subset of on which u u 0 at a left neighborhood of a random field u c 0 t rd is called a stochastic viscosity solution of 1 4 if it is both a stochastic viscosity subsolution and a supersolution remark 6 3 we would like to note that in definition 6 2 the possibly anticipating test func tions can be directly defined by the expansion 6 13 with being replaced by u and dx d 2 x being replaced by a triplet of random variables p a the main advantage here is that the random field is now defined globally overcoming the essential difficulties in the theory of stochastic viscosity solution thus far and will significantly facilitate the uniqueness proof moreover on the subset of where u achieves the local left maximum resp left minimum at the point the triplet p a can be considered as a stochastic sub resp super jet as it was traditionally done these issues will be further explored in our forthcoming publications in the rest of this section we shall verify that a regular solution must be a stochastic viscosity solution in the sense of definition 6 2 which will provide a justification for our new definition to this end let us assume that the coefficient f is proper in the following sense h 1 the function f t u p x f x u p x is degenerate elliptic that is f is con tinuous in all variables and is non decreasing in the variable x assume that u is a regular solution to 1 4 then we have u t x u 0 x t 0 f s x ds t 0 g x du s x dbs t 0 6 19 where f t x f x u du d 2 u t x 1 2 dzg x du t x dx g du t t x for any given pair of random variables and an arbitrary test field such that u attains a local left maximum at on a subset of with positive probability let be the process associated to by 6 18 where the remainder can be chosen to be zero and be defined by 6 10 34 we first apply the taylor expansion on u at point x and evaluated at t t x d t x and then use the expansion of t t d t x recall 6 10 to get u t t x d t x u x f x u du d 2 u x t g x du x bt b 1 2 dzg x du x dxg x du x dzg x du x 2 d 2 xxu t x bt b 2 dxu x t x d t x x 1 2 d 2 xxu x t x d t x x 2 dx g x du x bt b t x d t x x t 3 r m t x t x d t x u x f x u du d 2 u x t g x du x bt b 1 2 dzgdxg x du x dzg x du x 2 d 2 xu x bt b 2 6 20 du x dzg x d x bt b du x d 2 zg x d x t d x t bt b 1 2 du x f x d x bt b 2 1 2 d 2 xu x dzg x d x 2 bt b 2 dxg x du x dzg x d x bt b 2 dzg x du x dzg x d x d 2 xu x bt b 2 t 3 r m loc we will now replace x by the random point to specify the left neighhood required for the viscosity property we also define for any 0 the following subset of u t x u t and x b to wit is the subset of on which u attains a left local maximum at now setting x in 6 20 and noting that du d and u we have u t t d t u f u du d 2 u t g du bt b 1 2 dzgdxg du bt b 2 du x dzg du bt b 1 2 du f x du bt b 2 du d 2 zg du t d t bt b t 3 r m loc almost surely on consequently from 6 16 we obtain that p a s on 0 u t t d t u t t d t f u du d 2 u t t 3 r m loc 35 since t on we deduce that f u du d 2 u 0 p a s on finally since the mapping x 7 f x u p x is non decreasing thanks to h 1 and since d 2 d 2 u on we have f d d 2 p a s on this proves that the classical solution u is a stochastic viscosity subsolution that u is also a supersolution can be proved using a similar argument therefore u is a stochastic viscosity solution references 1 azencott r 1982 formule de taylor stochastique et de veloppement asymptotique d inte grales de feynman seminar on probability xvi supplement lecture notes in math 921 237 285 springer berlin 2 bardi m and capuzzo dolcetta i 1997 optimal control and viscosity solutions of hamilton jacobi bellman equations systems control foundations applications with appendices by maurizio falcone and pierpaolo soravia birkha user boston 3 ben arous g 1989 flots et se ries de taylor stochastiques probab theory related fields 81 1 29 77 4 buckdahn r and ma j 2002 pathwise stochastic taylor expansions and stochastic vis cosity solutions for fully nonlinear stochastic pdes ann probab 30 3 1131 1171 5 buckdahn r and ma j 2001 stochastic viscosity solutions for nonlinear stochastic partial differential equations i stochastic process appl 93 2 181 204 6 buckdahn r and ma j 2001 stochastic viscosity solutions for nonlinear stochastic partial differential equations ii stochastic process appl 93 2 205 228 7 caruana m friz p and oberhauser h 2009 a rough pathwise approach to fully non linear stochastic partial differential equations arxiv preprint 8 dellacherie c and meyer p a 1975 probabilite s et potentiel chapitres i a iv e dition entie rement refondue publications de l institut de mathe matique de l universite de stras bourg no xv actualite s scientifiques et industrielles no 1372 hermann paris 36 9 hida t and ikeda n 1967 analysis on hilbert space with reproducing kernel arising from multiple wiener integral proc 5 th berkeley symp math stat probab univ calif 1965 66 2 part 1 117 143 10 jentzen a and kloeden p e 2009 pathwise taylor schemes for random ordinary differ ential equations bit numerical mathematics 49 1 113 140 11 kloeden p e and platen e 1999 numerical solution of stochastic differential equations springer 12 kunita h 1990 stochastic flows and stochastic differential equations cambridge studies in advanced mathematics 24 cambridge university press cambridge 13 lions p l and souganidis p e 1998 fully nonlinear stochastic partial differential equa tions c r acad sci paris se r i math 326 9 1085 1092 14 lions p l and souganidis p e 1998 fully nonlinear stochastic partial differential equa tions non smooth equations and applications c r acad sci paris se r i math 327 8 735 741 15 lions p l and souganidis p e 1999 e quations aux de rive es partielles stochastiques nonline aires et solutions de viscosite seminaire e quations aux de rive es partielles 1998 1999 se min e qu de riv partielles exp no i 15 e cole polytech 16 lions p l and souganidis p e 2000 fully nonlinear stochastic pde with semilinear stochastic dependence c r acad sci paris se r i math 331 8 617 624 17 lions p l and souganidis p e 2002 viscosity solutions of fully nonlinear stochastic partial differential equations viscosity solutions of differential equations and related topics japanese kyoto 2001 surikaisekikenkyusho kokyuroku 1287 58 65 18 lyons t caruana m and le vy t 2007 differential equations driven by rough paths lecture notes in mathematics 1908 lectures from the 34 th summer school on probability theory held in saint flour july 6 24 2004 with an introduction concerning the summer school by jean picard springer berlin 19 nualart d 2006 the malliavin calculus and related topics springer 20 nualart d and pardoux e 1988 stochastic calculus with anticipating integrands probab theory related fields 78 4 535 581 37 21 pardoux e and peng s 1994 backward doubly stochastic differential equations and sys tems of quasilinear spdes probab theory related fields 98 2 209 227 22 pardoux e and peng s 1991 backward stochastic differential equations and quasilinear parabolic partial differential equations stochastic partial differential equations and their ap plications charlotte nc 1991 lecture notes in control and inform sci 176 200 217 springer berlin 23 revuz d and yor m 1991 continuous martingales and brownian motion springer verlag berlin 38 1 introduction 2 preliminaries and statement of the main theorem 3 some fundamental estimates 4 forward taylor expansion 4 1 forward temporal expansion 4 2 forward temporal spatial taylor expansion 5 backward taylor expansion 5 1 backward temporal expansion 5 2 backward temporal spatial expansion 6 application to stochastic pdes