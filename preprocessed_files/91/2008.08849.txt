the curse of shared knowledge recursive belief reasoning in a coordination game with imperfect information thomas bolander 1 robin engelhardt 2 and thomas s nicolet 2 1 department of applied mathematics and computer science technical university of denmark richard petersens plads building 324 dk 2800 lyngby denmark 2 center for information and bubble studies department of communication university of copenhagen karen blixens plads 8 dk 2300 copenhagen s common knowledge is a necessary condition for safe group coordination when common knowl edge can not be obtained humans routinely use their ability to attribute beliefs and intentions in order to infer what is known but such shared knowledge attributions are limited in depth and therefore prone to coordination failures because any finite order knowledge attribution allows for an even higher order attribution that may change what is known by whom in three separate ex periments we investigate to which degree human participants n 802 are able to recognize the difference between common knowledge and nth order shared knowledge we use a new two person coordination game with imperfect information that is able to cast the recursive game structure and higher order uncertainties into a simple everyday like setting our results show that participants have a very hard time accepting the fact that common knowledge is not reducible to shared knowl edge instead participants try to coordinate even at the shallowest depths of shared knowledge and in spite of huge payoff penalties introduction successful group coordination requires complementary choices among group members which in turn requires communication of beliefs and intentions in such a way that they become common knowledge 1 a fact is said to be common knowledge if everyone knows it and ev eryone knows everyone knows it and everyone knows ev eryone knows everyone knows it and so on ad infinitum 2 5 if the premise of everyone knows is not infinitely nested but only nested to finite depth we instead have shared knowledge if there is no nested knowledge about knowledge at all and not everyone necessarily knows the fact we have private knowledge let us illustrate the difference between these notions with an example two friends agnes and bertram are taking different trekking routes to the top of a moun tain in the morning they agree that if the weather gets bad they will go back down and sleep in the mountain hut at the base otherwise they strongly prefer to stay overnight at the top the equipment essential for an overnight stay at the top has been divided between their backpacks it is therefore crucial that if one of them de cides to go to the top the other one does the same on the way to the top they both observe a thunderstorm approaching but are uncertain about whether the other person has seen it at this point they both know the fact that a thunderstorm approaches but don t know whether the other knows in this situation we would say that agnes and bertram both have private knowledge that a thunderstorm approaches and since they both know it it is also shared knowledge between them more generally a fact is private knowledge in a group of agents if some non empty subset of the agents know the fact for the special case where everybody in the group knows it we say that there is shared knowledge to depth one or first order shared knowledge of the fact 3 since bertram doesn t know whether agnes knows about the thunderstorm he would like to warn her so he sends a text message thunderstorm approaching let s meet at base however due to the unstable mo bile network signals he is not certain that the message will go through therefore he asks agnes to confirm that she has received the message a few minutes later he receives her confirmation at this point it has be come shared knowledge to depth two or second order shared knowledge that a thunderstorm is approaching she knows that he knows since she received his message and he knows that she knows because he received her confirmation to have shared knowledge to depth three third order shared knowledge it would additionally be required that a he knows that she knows that he knows and b that she knows that he knows that she knows in fact a already holds since she confirmed receiving his message however b doesn t hold since she will be un certain about whether her confirmation was received in good order thus we have an asymmetry in the level of knowledge of the two agents if she also asks him to con firm her message and she receives such a confirmation then of course she will get to know that he knows that she knows then there will be shared knowledge to depth three however there will still be a higher order knowl edge asymmetry since bertram can t be certain that the last message was received how many messages back and forth does it take for agnes and bertram to coordinate going back to the base in the evening at first it might seem that it is suffi cient for both of them to know that at least one of them plans to go to the base however that is not so af ter the first message has been received both know that bertram plans to go to the base but he is still uncer tain whether she knows and if she doesn t he might risk leaving her alone at the top so shared knowledge to depth one is clearly not sufficient even shared knowl ar x iv 2 00 8 08 84 9 v 1 cs m a 2 0 a ug 2 02 0 2 edge to depth two is not sufficient after she has con firmed receiving his original message from her perspec tive it is still entirely possible that he doesn t know that she knows and hence he might decide to go to the top to not leave her alone and in this case she also has to go to the top in order not to leave him alone this ar gument can be generalised to prove that even nth order shared knowledge for any arbitrary large n is insufficient for safe coordination 1 the consequence is that no finite number of messages successfully delivered will guarantee that agnes and bertram manage to meet at the base in order to guarantee meeting at the base they would need to have shared nth order knowledge for all n n shared nth order knowledge of some fact for all n n is called common knowledge of the fact for a more formal definition of private shared and common knowledge see the supplementary information in practice shouldn t it be possible to coordinate meet ing at the base after one or two messages being sent back and forth isn t it a purely mathematical problem with no practical implications for humans trying to coordinate their actions one of the main goals of this paper is to argue that the answer to both questions is no in order to make that argument we have designed a coordination game that has a similar underlying mathematical struc ture as the example just given but cast in a simpler more everyday like setting where the higher order uncertainty is established already when the game is initialised and not as above through a series of message passings the game was originally developed to illustrate how the dif ference between shared and common knowledge can have a real impact on human behaviour humans generally find the concept of common knowledge hard to grasp and even harder to grasp the practical relevance of due to the unbounded nesting of knowledge involved the game we developed intends to make it clear that human intuitions about common knowledge can be misleading 1 to derive a contradiction suppose nth order shared knowledge for some n is sufficient to make it safe to go to the base in the sense of guaranteeing that the other person will also go there this implies that the succesful delivery of the nth message is sufficient to guarantee meeting at the base there must then exist a smallest number n 0 such that the succesful delivery of the n 0 th message is sufficient to guarantee meeting at the base since n 0 is the smallest such number the succesful delivery of the n 0 1 st message is not sufficient to guarantee meeting at the base now note that at the moment when the n 0 th message has been successfully delivered the sender of this message is still uncertain about whether it was actually received and hence the sender is only certain that the first n 0 1 messages has been successfully delivered in other words the sender of the n 0 th message considers it possible even after the successful delivery of the message that only the first n 0 1 messages were suc cessfully delivered in which case it is not safe to go to the base hence that person will after having sent the n 0 th message stil consider it unsafe to go to the base and will choose to go to the top this is a contradiction completing the proof this proof is stated in rather informal terms but can be turned into a formal mathematical proof 1 and may have costly consequences the curse of shared knowledge reasoning about the knowledge of others their reason ing about you and your reasoning about their reasoning and so on is famous in cognitive science for its presumed computational intractability 6 because of this coordi nating species typically use heuristic shortcuts in order to work with nested knowledge states like common knowl edge such as joint perceptual cues and broadcasted sig nals 7 9 humans may obtain common knowledge via mutually accessible first order sensory experiences 10 13 eye contact 14 public rituals and conventions 2 or salient focal points 15 what most prominently is believed to distinguish human coordination from other animals however is the enormous flexibility by which humans can imagine and articulate the mental states of their peers 16 17 the abilities to blush to tell jokes and to write novels testify that humans readily attribute higher order beliefs intentions and reasoning capabili ties to other people such as thinking explicitly about the mental states of others who think about the thoughts and beliefs of others and so on while at the same time ap preciating that those thoughts and beliefs can differ from each other and from reality such higher order cognition has seen substantial scientific attention and has brought about various technical terms such as theory of mind tom 18 mentalizing 19 mind reading 20 21 mental models 22 mind perception 23 perspec tive taking and social intelligence 24 which often are used interchangeably for studying the cognitive mech anisms of shared knowledge but sometimes focus on slightly different ideas and associated meanings 25 de pending on the field of investigation looking at the tom literature conclusions about human belief reasoning abilities are rather heteroge neous 26 27 human reasoning about the reasoning processes of other humans is limited 18 28 33 contex tual and possibly domain specific 34 36 three year old children tend to fail in the well known first order false belief tasks by falsely assuming that their private infor mation is shared by others while second order false be lief tasks are mastered around ages 5 7 37 38 adults may reliably master up to four orders 39 but still have difficulties ignoring the private information they possess when assessing the beliefs of others resulting in a curse of knowledge bias which can compromise their ability to make predictions about other people s beliefs and ac tions 1 40 when the nested mental states represent a succession of different people such as alice thinks that bob thinks that carol is contemplating the idea that david is thinking about evelyn we have less prob lems following along 2 than when the nested mental states 2 especially when those successions of mental states are qualified by psychological attribute words such as alice thinks that bob is 3 are successions of the same people over and over again and thus are truly recursive such as i think that you think that i contemplate the idea that you are thinking about me we get confused more easily by the latter formulation since we need to keep track of several rep resentations of ourselves and of the other each represen tation differing in its perspective and in the number of mental states it presupposes 6 when humans compete or try to detect cheaters higher order belief reasoning seems to perform better than lower order belief reason ing 44 in negotiations and other mixed motive situa tions where innuendo threads bribes and other kinds of indirect propositions are common humans are very good at the strategic use of higher order belief reasoning for instance as a means to prevent common knowledge in certain groups of agents or as a means to form specific knowledge alliances 45 47 tom proficiency may also be facilitated by providing games with stepwise increase in tom 48 in pure coordination problems such as pedestrians choosing sides or people agreeing on new words or on new technical standards common knowledge is the pref ered informational state for all members of the group because it ensures that all sides find an optimal common equilibrium if there are no or limited means by which to communicate however people face an equilibrium selection problem for which neither game theory nor the tom literature has any clear solution although some ex perimental evidence 49 suggests that higher order tom reasoning may improve coordination efforts other work seems to suggest that coordination favours lower orders of tom sophistication 50 51 the challenge of tacit coordination is particularly relevant for artificial intelli gence research and for social cognitive robotics where the implementation of tom like processes into artificial social agents is believed to be an important step towards reliable human robot interaction 52 55 recently researchers have investigated whether hu mans have adapted specifically to recognizing common knowledge as a separate cognitive category distinct from both private and shared knowledge 6 controlled pure coordination experiments in social settings on market collaboration 56 the bystander effect 57 indirect speech 58 self conscious emotions 59 and charity 60 consistently find that people indeed make strategically different choices under common knowledge conditions typically presented in the form of public anouncements compared to situations in which there is only private knowledge in the form of private messages or shared knowledge private messages that elaborate on the depth of knowledge of other participants apart from seeing a clear benefit of common knowledge some of these studies also showed that people have a hard time discriminating mistakenly worrying that carol is offended by misunderstanding something dave had said to evelyn 42 between various orders of shared knowledge and that coordination efforts do not correlate with payoff condi tions 56 which is in contrast to the assumptions of stan dard rational choice theory in which payoffs are expected to be maximized 61 so if humans indeed have adapted to recognize com mon knowledge in the wild the question remains if they are also able to recognize the difference between common knowledge and nth order shared knowledge for some po tentially large n in other words while humans are able to reliably detect proper common knowledge in a wide range of situations how good are they at refraining from inferring common knowledge in situations with only nth order shared knowledge we do not know in part be cause many existing experimental designs stop after de scribing 2 3 orders of belief reasoning to the participants as higher orders require quite convoluted sentences that tend to become incomprehensible and increase experi mental error or as in the mountain trekking example they require reasoning about the consequences of a high number of message passing actions that each change the mental state of the involved agents the latter has been explored theoretically in the elec tronic mail game by rubinstein 62 a game version of the mountain trekking example presented above and of the structurally equivalent coordinated attack prob lem 1 the rubinstein paper shows that almost com mon knowledge in the sense of nth order shared knowl edge for some large n leads to a very different expected player behaviour than absolute common knowledge es sentially his conclusion translated into the context of the mountain trekking example is that common knowledge will make the two mountain hikers both go to the base whereas if there is only nth order shared knowledge for some n then both will meet at the top independent of n and despite the bad weather condition resulting in non maximal payoffs rubinstein does a pure game theoretic analysis of the game with no experiments and only spec ulates what people playing the game might do we find it interesting to dig deeper into how humans would play and reason about such games in practice what would their intuition recommend them to do which depth of shared knowledge if any would be enough to attempt risky coordination that would lead to maximal payoff if successful how would they be certain that the person they try to coordinate with thinks that the same depth is sufficient the electronic mail game and the mountain trekking example are complicated in terms of the dynamics of it erated message passing in this paper we devise a novel game in which the higher orders of shared knowledge are not achieved dynamically via actions but are already present at the beginning of the game using uncertainty about arrival times this we believe makes the game easier to understand letting humans play our game we have been able to address the previous questions in more detail our results show that people indeed have a very hard time accepting the fact that common knowl 4 edge is not reducible to shared knowledge of finite depth on the contrary participants try to coordinate even at the shallowest depths of shared knowledge and in spite of huge payoff risks the reason we believe is that the sole presence of shared knowledge is enough to make par ticipants try to coordinate and that moderate depths of shared knowledge become effectively indistinguishable from common knowledge due to the recursive nature of the game we call this effect the curse of shared knowl edge because even small depths of shared knowledge raises the participant s expectation of being able to co ordinate in spite of repeated payoff penalties for having miscoordinated before experimental design the experiment is designed as a two player coordination game with imperfect information the game is inspired by the structure of the consecutive number riddle also called the conway paradox see e g van emde boas et al 63 van ditmarsch and kooi 64 our game is framed as an everyday situation where two colleagues arrive at their workplace in the morning and have to decide whether to meet in the canteen for a morning coffee or go straight to their offices and start working immediately we call the game the canteen dilemma the purpose of framing it in an everyday situation is to attempt to make some of the recursive reasoning easier to compre hend 65 66 the introductory story of the game goes as follows every morning you arrive at work between 8 10 am and 9 10 am you and your colleague will arrive by bus 10 minutes apart example you arrive at 8 40 am your colleague may arrive at 8 30 am or 8 50 am both of you like to meet in the canteen for a cup of coffee if you arrive before 9 00 am you have time to go to the canteen but you should only go if your colleague goes to the canteen as well if you or your colleague arrive at 9 00 am or after you should go straight to your offices the game has 10 rounds on mturk and participants are told that at the beginning of each round they will know only their own arrival time and based on this will have to decide whether to go to the canteen or the office af ter choosing an option participants are asked to estimate their certainty that their colleague will choose the same option on a five point likert scale we call the value chosen the certainty estimate of the participant a fixed participation fee of 2 is given to all players who finish the game additional bonuses are calculated with a log arithmic scoring rule whereby each participant is given an initial bonus of 10 which is then reduced by a vari able penalty in each round depending on the players decisions and certainty estimates the game has three possible outcomes 1 both choose the canteen which we refer to as coordination into the canteen 2 both choose their respective offices which we refer to as coordination into the offices 3 one chooses the canteen and the other chooses the office which we refer to as miscoordination penalties are tiered in such a way that a small penalty is deducted for successful co ordination into the canteen achieving the highest pay off which is doubled for coordination into the offices achieving the second highest payoff while the penalty for miscoordination or forbidden choices i e going to the canteen at 9 am or after is much larger up to 921 times larger meaning a significantly lower payoff than the pre vious two see materials and methods for details about the payoff structure in the instructions shown to the participants beforehand we also include payoff examples of both successful and failed coordinations screenshots and full descriptions of the experimental setup can be found in the supplementary information for the main experiment we recruited a total of 680 participants from amazon mechanical turk mturk to play for a maximum of 10 rounds making a total of n 4260 choices in addition we conducted two supple mentary classroom experiments with 80 students dtu 1 n 2160 from the technical university of denmark dtu taking a course on artificial intelligence and multi agent systems and 42 additional student dtu 2 n 1012 taking an introductory course in artifi cial intelligence the two classroom experiments differed slightly from the mturk experiment in that the students got an initial bonus endowment of 30 instead of 10 and played 30 rounds instead of 10 also in the class room experiments all students were told that they would not receive any monetary rewards for playing the game but they should still try to do their best the students also had to answer a few additional post game questions see the supplementary information for a full list of those questions game strategies what are the relevant strategies for this game first note that going to the canteen at 9 00 or after results in the worst possible payoff so both players should always go to the office if they arrive at 9 00 or after how about if both arrive strictly before 9 00 if both choose canteen they getter a better payoff than if both choose office now consider a case where you are one of the players and you arrive at 8 50 then your colleague will be arriving at either 9 00 or 8 40 if your colleague arrives at 9 00 she has to choose office according to the previous argument and then you would have to choose office as well to avoid the large penalty of miscoordination however if your colleague arrives at 8 40 you may both choose the can teen and this will lead to the highest payoff in other words depending on the arrival time of your colleague a piece of information that you don t have access to the best choice is either office or canteen so which one to choose since the penalty of miscoordination is very high it would seem best to choose office what if you then in stead arrive at 8 40 in this case your colleague either 5 arrives at 8 30 or 8 50 in both cases you have time to meet for a cup of coffee in the canteen and doing so will give you the highest payoff at first it might seem like an easy choice however we just concluded that the best strategy at 8 50 would be to go to the office so if you arrive at 8 40 and contemplate that your colleague might arrive at 8 50 and if you believe your colleague would reason as yourself and go to the office at 8 50 you also ought to go to the office at 8 40 this argument can of course be iterated because if the optimal choice at 8 40 is to go to the office then the optimal choice at 8 30 must also be to go to the office in other words the optimal strategy seems to be to always go to the of fice independent of arrival time and indeed so it is if both players go to the office in all rounds and declare the highest possible certainty in their decision they will both leave the experiment with 9 80 excluding the 2 participation fee this is the highest possible payoff that can be guaranteed by any strategy in the game and very close to the 10 that the players start out with as we will see later the payoffs that people actually get when playing the game are significantly lower than this the all office strategy described above where you al ways decide to go to the office independent of arrival time is a safe strategy if both players follow it by safe is meant that there is never any risk of miscoordination and hence no risk of getting the highest penalty the penalty for miscoordination is up to 9 21 in a single round it is actually the only safe strategy the reason is that if at least one of the players say a has the strategy of going to the canteen at some time t before 9 00 then since they both have to go to the office at 9 00 or later there must exist at least one pair of arrival times for which the two players are miscoordinated 3 the fact that the all office strategy is the only safe one is counter intuitive to most people before being presented with the proof and for some people even after the issue is that intuitively it would seem to be safe to go to the canteen at say 8 30 why would you ever go to the office that early you know that your colleague will then be arriving at 8 40 which is still plenty of time to get a cup of coffee before 9 00 the issue is of course that if you take the perspective of your colleague then your colleague arriving at 8 40 will consider it possible that you arrived at 8 50 and if you had indeed arrived at 8 50 you would consider it possible that your colleague had arrived at 9 00 in that case you would be forced to 3 since a chooses to go to the canteen at time t player b also has to go to the canteen at time t 10 since otherwise whey would be miscoordinated when a arrives at t and b at t 10 but if b goes to the canteen at time t 10 a also has to go to the canteen at time t 20 since otherwise they would be miscoordinated when b arrives at t 10 and a at t 20 this can be generalized to conclude that a would have to go to the canteen at any time t 20 x for x 0 and b would have to go to the canteen at any time t 10 20 y for y 0 clearly this implies going to the canteen after 9 00 choose the office a major point of our experiments is to test whether this kind of recursive perspective taking is utilized by human players of the game the argument of the all office strategy being safe of course relies on the other player following the same strat egy since we don t allow players to agree on a strategy with their co player beforehand the all office strategy doesn t necessarily in practice lead to the highest payoff for a particular player another issue is that one might decide to play risky instead of safe consider the canteen before 9 strategy of always going to the canteen before 9 00 and going to the office at later times all with the highest certainty estimate if both players choose this strategy and are fortunate to play 10 rounds without any of them arriving at 9 00 or later they will get the highest possible payoff of 9 90 slightly higher than the guaran teed payoff 9 80 of the all office strategy however if all pairs of arrival times are equally likely the probability of miscoordination is then 1 6 there are 12 pairs of arrival times in total and 2 of those have one player arriving at 8 50 and the other at 9 00 miscoordination with the highest possible certainty estimate gives a penalty of 9 21 so in practice this strategy is of course still sig nificantly worse than the all office strategy even if only playing one round the expected payoff for a single round game will be 10 00 9 21 1 6 0 01 5 6 8 46 in the methods section we make the reasoning about game strategies formally precise we show that indepen dently of the particular payoff structure only using the order of the payoffs not their exact values there will only be two candidates for the optimal strategy the all office strategy and the canteen before 9 strategy which one is then optimal depends on the particular payoff structure and the number of arrival times before and after 9 am in our specific experiments with our specific ar rival times and payoff structure the all office strategy has a significantly higher expected utility than the canteen before 9 strategy as already argued as we will see the human players in our experiments very rarely play any of these strategies but seem to believe that it is safe to go to the canteen if arriving sufficiently ahead of 9 am e g before 8 50 but unsafe when arriving later a strategy to always go to the canteen if arriving before some cut off time tc and always go to the office if arriving after tc is called a cut off strategy with cut off tc the canteen before 9 strategy is a cut off strategy with cut off 8 55 see materials and methods for more details results the maximal theoretical payoff described in the previous section was never observed in the experiments actually quite far from it despite doing the experiment with more than 800 people recall that the payoff of the all office strategy is 9 80 independent of arrival times the av erage bonus paid to our mturk participants was a mere 2 36 due to the penalty based payoff structure only 46 out of 340 mturk groups 14 were able to play 10 rounds and still have any bonus left while the average 6 number of rounds played was 6 3 see table i as soon as one of the players had no money left the game would terminate exp n r r ruin payoff s mturk 680 10 6 3 52 8 23 6 1 59 dtu 1 80 30 27 0 17 5 27 0 0 83 dtu 2 42 30 24 1 31 0 24 1 0 98 table i exp experiment n number of subjects r maximum number of rounds r average number of rounds played ruin percentage of participants loosing all their bonus before or in round r payoff average earnings given as the retained percentage of the initial endowment s average penalty per player per round comparing the mturk experiment with the dtu ex periments in table i shows that the dtu participants were slightly better on average while more than half of the mturk participants had lost their initial bonus and had to end the game before the last round only 18 and 31 of the dtu participants respectively had done so especially the students from the artificial intelli gence and multi agent systems course dtu 1 managed well by retaining 27 of the initial endowment and loos ing only 0 83 per round on average this may come as no surprise because these students were later into their studies and had already been taught about social cogni tion looking at figure 1 we see the frequency of par ticipants canteen choices as a function of their arrival time together with a fitted binary logistic regression line while dtu students orange and green show similar steep profiles mturk participants have a slightly more gradual decline in canteen choices for increasing arrival times however the point at which there is a 50 proba bility of choosing the canteen or the office see materials and methods is close to 8 50 in all three experiments in the discussion we therefore combine all three experi ments in figure 5 in order to understand the experimen tal results in terms of degrees of shared knowledge figure 2 shows the distribution of certainty estimates for each arrival time it clearly shows that it is exceed ingly rare for any of the participants to consider it even problematic to go to the canteen when arriving early arriving at 8 40 or earlier is deemed sufficiently early to visit the canteen with high confidence arriving at 9 00 or later is deemed office time with high confidence and arriving at 8 50 is deemed either office or canteen with at least being somewhat certain the difference in cer tainty estimates between mturk participants and dtu students show that the latter tend to be more certain that their co players follow a similar strategy higher certainty estimates for the early and late arrival times and also that they are more aware of the danger of miscoordina tion lower certainty estimates around the cut off this is in particular the case for the dtu 1 experiment that has the steepest profile being more certain that your co players follow a similar strategy probably indicates that you believe such a strategy to be optimal so interest ingly the dtu 1 participants are both the ones that ap pear to be most aware of the danger of miscoordination and at the same time those who most firmly believe a cut off strategy is optimal i e believing that the risk of miscoordination is unavoidable the differences between the three experiments are however still relatively minor and in the following we will combine data from all three experiments group dynamics starting with the group dynamics in figure 12 we see the number of successful group coordinations into the canteen office green purple together with the number of miscoordinations red as a function of all possible arrival time combinations the figure shows clearly that players are able to coordinate into the canteen more than 80 of the time if both of them arrive before 8 50 as soon as a group has a player who arrives at 8 50 however the result changes drastically suddenly almost half of such groups miscoordinate as players experience harsh penalties for miscoordinating one could perhaps expect to see a tendency of choosing office more often when ar riving at 8 40 or 8 50 in subsequent rounds that is we might expect that players learn and converge to the all office strategy in order to avoid miscoordination alto gether but this is not what we see figure 4 shows the mean frequency of canteen choices as a function of rounds played for all three experiments each color corresponds to a certain arrival time clearly the only arrival times that do not converge towards either the canteen or the office are the arrival times of 8 40 and 8 50 with the former fluctuating around 90 canteen choices and the latter fluctuating around 50 canteen 8 00 8 10 8 20 8 30 8 40 8 50 9 00 9 10 arrival 0 0 0 1 0 2 0 3 0 4 0 5 0 6 0 7 0 8 0 9 1 0 fre qu en cy o f c an te en c ho ic e mturk n 4260 dtu 1 n 2160 dtu 2 n 1012 fig 1 frequency of canteen choices as a function of arrival times circles indicate the mean frequency of participants choosing the canteen at a certain arrival time with error bars colored lines are logistic regression lines with bootstrapped 95 confidence intervals 10 000 resamples shown as translu cent bands fitted parameters show significant differences for all three experiments 7 8 00 8 10 8 20 8 30 8 40 8 50 9 00 9 10 arrival very uncertain slightly certain somewhat certain quite certain very certain ce rta in ty o f c oo rd in at io n fig 2 violin plots of certainty estimates in each round participants were asked how certain they were of successful co ordination with their colleague blue areas show the results from mturk n 4260 and orange areas show the results from dtu 1 and dtu 2 combined n 3172 we predefined a five point likert scale of certainty estimates as very un certain slightly certain somewhat certain quite certain and very certain and translated them into the numerical values of probability estimates used in the payoff calculations see materials and methods choices this indicates that participants arriving at 8 40 or 8 50 do not feel incentivized to change their behavior significantly in subsequent rounds even though there is a high risk of miscoordination this is not to say that par ticipants do not learn that canteen choices at 8 40 or 8 50 are dangerous partitioning the data from figure 1 into two bins corresponding to groups having had no mis coordination and groups having had one or more misco ordinations see the supplementary data analysis in the 8 0 0 8 10 8 1 0 8 20 8 2 0 8 30 8 3 0 8 40 8 4 0 8 50 8 5 0 9 00 9 0 0 9 10 arrival time 0 100 200 300 400 500 600 nu m be r o f c ho ic es n fig 3 number of coordinations and miscoordinations as a function of arrival times green means coordinating into the canteen purple means coordinating into the office and red means miscoordination we use the notation 8 00 8 10 to de note the union of the arrival pairs 8 00 8 10 and 8 10 8 00 i e the arrival time combinations where one of the players ar rive at 8 00 and the other at 8 10 miscoordinations approach 50 at 8 40 8 50 and 8 50 9 00 0 5 10 15 20 25 30 round 0 0 0 2 0 4 0 6 0 8 1 0 fre qu en cy o f c an te en c ho ic e arrival time 8 00 8 10 8 20 8 30 8 40 8 50 9 00 9 10 wls fig 4 mean frequencies of canteen choices for all possible arrival times as a function of the number of rounds played the fitted straight lines are weighted linear squares wls with the weights chosen to be the square root of the number of data points constituting the mean frequencies for each round also shown by dot size supplementary information shows somewhat decreas ing certainty estimates around the critical arrival times especially for dtu student however this does not affect their actual choices mturk participants do choose the canteen a little less often after a miscoordination see figure s 6 in the supplementary information but this does not translate into better payoffs as later miscoordi nations just move to earlier arrival times so even though participants learn that their choices are risky they don t see any way to improve their strategy specifically they never converge to the optimal all office strategy and also not to the alternative canteen before 9 strategy cf the orem 4 in materials and methods this apparent lack of behavioral change in higher order social reasoning games is also shown in verbrugge mol 67 discussion let us try to analyse the experimental results in terms of the depth of knowledge of the participants the highest payoff is achieved when coordinating into the canteen be fore 9 am with the aim of achieving the highest possible payoff each participant can be expected to consider her own arrival time and try to assess whether there is still time to meet in the canteen when a participant arrives strictly before 9 am i e at 8 50 or earlier she has private knowledge that she arrives sufficiently early to go to the canteen if participants only make choices based on their private knowledge we should then expect participants to always go to the canteen at 8 50 this is not what we see cf figure 1 thus other considerations in addition to the player s private knowledge must play a role in their decision making when participants know that they both have arrived before 9 00 they have shared knowledge of having ar rived in time for going to the canteen this happens for any arrival pair t 1 t 2 with ti 8 50 i 1 2 where 8 players knowledge level of sufficient time for canteen arrival time player 1 arrival time player 2 8 20 8 20 8 30 8 30 8 40 8 40 8 50 8 50 9 00 9 00 9 10 9 10 nonenoneprivate shared depth 1 shared depth 2 shared depth 3 fig 5 the solid black lines express indistinguishability for the players e g the arrival time 8 40 for player 1 has a line to both of the arrival times 8 30 and 8 50 for player 2 since these are the two arrival times for player 2 that player 1 will consider possible when herself arriving at 8 40 below each possible arrival time we have marked the highest level of knowledge concerning whether there is sufficient time to go to the canteen e g when arriving at 8 40 there is shared knowledge to depth 1 of this fact but not shared knowledge to depth 2 in blue a binary logistic regression model was used to predict the probability of a participant going to the canteen upper limit or to the office lower limit at the shown arrival times the width of the regression line indicates the 95 confidence interval using 10 000 bootstrapped resamples of all choices in all three experiments n 7432 again an arrival pair t 1 t 2 denotes that player 1 arrives at time t 1 and player 2 at time t 2 note that for an ar rival pair 8 50 8 40 there is shared knowledge of there being sufficient time to go to the canteen but only player 2 knows this fact player 2 knows that also player 1 must have arrived before 9 00 but player 1 doesn t know this about player 2 in other words when a player arrives at 8 50 that player considers it possible that there is shared knowledge of being sufficient time for a cup of coffee in the canteen but only if arriving at 8 40 or before will that player know there to be shared knowledge to depth 1 when arriving at 8 30 or before the player addi tionally knows there to be shared knowledge to depth 2 we illustrate this in figure 5 note that in general if a player arrives at time 8 50 10 n n 0 then that player knows that there is nth order shared knowledge but the player doesn t know there to be n 1 st order shared knowledge this follows a similar pattern as the moun tain trekking example except here the depth of shared knowledge is determined by how early ahead of 9 am the agents arrive rather than how many messages have successfully been delivered no number of messages was sufficient to achieve common knowledge in the mountain trekking example we similarly get that no arrival time is sufficiently early to establish common knowledge about having time to meet in the canteen the participants seem to clearly be able to distin guish between private and shared knowledge which is supported by their significantly different choices at 8 50 and 8 40 see again figure 5 however it is less clear whether they are able to robustly distinguish different levels of shared knowledge and whether they are able to distinguish that from common knowledge indeed most participants relatively robustly choose the canteen at 8 40 and any time before that despite the difference in depth of shared knowledge in those possible arrival times the certainty estimates are however slowly decreasing from 8 10 to 8 50 in all three experiments see figure 2 show ing that the participants are not completely ignorant to the differences this could suggest that many partici pants are aware that it is less safe to go to the canteen based on nth order shared knowledge than n 1 st order shared knowledge however very few seem to draw the conclusion that it is never safe to go to the canteen our game theoretic analysis showed that they ought to only choose the canteen when there is common knowledge that it is safe which in this case actually means never why do participants not regard earlier office choices as viable options why do participants not continue their train of thought and deduce that when 8 50 turns out to be unsafe 8 40 will become unsafe as well which means that 8 30 will be unsafe also etc one reason may be that the benefits of an all office strategy are cognitively unavailable for the participants in the sense that partic ipants have a limited ability to take the perspective of each other recursively another reason may be that the benefits of an all office strategy are vaguely understood but participants do not believe that their colleague will reason the same way as they do themselves and instead try to guess what their colleague will choose one can didate of such a mixed strategy may be the following 1 always go to the canteen before 8 50 2 always go ing to the office after 8 50 and 3 do some guesswork at 8 50 the arrival time combinations 8 40 8 50 and 8 50 9 00 will then coordinate 50 of the time match ing well with what we observe in figure 12 if this is the strategy followed players should also be aware of the 50 probability of miscoordination at 8 50 in figure 2 we indeed see a much lower certainty estimate at those arrival times 9 probing theses questions further we asked participants the following post game question imagine you could have agreed beforehand with your colleague about a point in time where it is safe to go to the canteen what time would that be i don t know there is no such time 8 00 8 10 8 20 8 30 8 40 8 50 9 00 9 10 the results in figure 6 a show that most answers range from 8 30 to 8 50 approximately 75 of all answers giving support to the verdict that participants are not able to continue taking the perspective of each other re cursively or at least that they believe that shared knowl edge of some modest finite depth is sufficient for the can teen choice to be safe rather they stop after one or two possibly three iterations thus believing that as long as they arrive sufficiently early they can be sure to coordi nate safely in the canteen notice that the correct answer there is no such time is chosen by less than 4 of all participants close to the margin of random error i d on t kn ow th er e is no su ch ti m e 8 00 8 10 8 20 8 30 8 40 8 50 9 00 9 10 0 0 0 1 0 2 0 3 fr ac tio n of p ar tic ip an ts a cutoff point n 798 yes no don t know 0 0 0 2 0 4 0 6 0 8 fr ac tio n of p ar tic ip an ts b common knowledge fig 6 a frequencies of answers to the question imagine you could have agreed beforehand with your colleague about a point in time where it is safe to go to the canteen what time would that be due to the pragmatics of language we assume that an answer like 8 30 entails the belief that all ear lier arrival times would also be deemed safe b frequencies of answers to the question imagine you arrive at 8 10 is it common knowledge between you and your colleague that it is safe to go to the canteen that is that you both arrived before 9 00 this indicates that participants indeed do believe that there exists a strategy that includes canteen choices with out the risk of miscoordination supporting the conjec ture stated in the introduction that moderate depths of shared knowledge become effectively indistinguishable from common knowledge participants might of course not necessarily have a precise idea of the technical no tion of common knowledge but as discussed in the in troduction there is actually quite a number of studies demonstrating that humans have adapted to recognize common knowledge and making distinct strategic choices depending on whether there is common shared or pri vate knowledge in our experiments we see the player behavior stabilizing already at relatively modest depths of shared knowledge both in terms of action choices and certainty estimates and that player behavior matches what we would expect to see if they indeed wrongly infer common knowledge from shared knowledge to some finite depth to specifically address the issue of whether they wrongly infer common knowledge we asked a final post game question imagine you arrive at 8 10 am is it common knowledge between you and your colleague that it is safe to go to the canteen that is you both arrived before 9 00 am yes no don t know this question inquires about participants understand ing of the term common knowledge and how it ap plies to the given situation in figure 6 b the results show that 89 of all participants responded that it was common knowledge that both players arrived before 9 00 when they themselves had arrived at 8 10 the answers may signify that indeed they believe there to be common knowledge in the strict technical logical sense but of course the answers could also pertain to the everyday lin guistic usage of the term common knowledge which is less strict conclusion we have devised a new coordination game the canteen dilemma to investigate human higher order social rea soning our experimental results show that high levels of recursive perspective taking are cognitively unavail able to the vast majority of players of the game we see a significant amount of miscoordination which seems to occur due to a curse of shared knowledge the guise of common knowledge existing in situations where there is only shared knowledge to some limited depth our experience from playing the canteen dilemma with many people and explaining to them its unintuitive result is that many players simply do not accept the ar gument that they cannot at any time coordinate safely into the canteen on top of this the certainty of partici pants that they will coordinate into the canteen at early arrival times indicates that when participants fail at nth order reasoning they do not default to agnosticism but the opposite that is when there is a sufficiently large order of shared knowledge about a fact it is possible that such a fact is mistaken for proper common knowl edge an interesting avenue for future research would be to investigate if there may be any social and psycholog ical benefits of having an illusion of common knowledge such as a higher willingness to cooperate thus what we have called the curse of shared knowledge in the can teen dilemma may turn out to be a blessing in other settings an obvious question is how often this illusion of com mon knowledge occurs in real life for instance in the real world version of the canteen dilemma scenario the two colleagues would be likely to simply coordinate their 10 actions via cell phone i ll arrive at 8 50 today are you up for a cup of coffee in the canteen this suggests that the advent of modern technology could have made the information asymmetry inherent in shared knowledge situations less widespread however modern technology has also given us the internet and social media where the flow of information is much more complex creating more intricate cases of information asymmetry than ever before that humans tend to confuse shared and common knowledge could possibly be due to a limited evolution ary importance of being able to make the distinction it could also be due to the distinction requiring too many cognitive ressources or it could be that the confusion actually leads to evolutionary benefits in terms of higher degrees of cooperation in most practically occurring set tings what exactly has lead to the confusion and to what degree it has any practical importance today we leave as open problems methods experimental design and data collection experiments on amazon mechanical turk had a total of 714 participants including dropouts see supplementary infor mation while the two classroom experiments at the tech nical university of denmark dtu 1 and dtu 2 had a to tal of 106 and 50 participants respectively the average payout to mturk workers was 4 17 including a general participation fee of 2 after accepting our task and pro viding informed consent participants from mturk were put in a waiting room until they were paired up with an other participant after an instructions page detailing the rules of the game participants were given an arrival time t 8 00 8 10 8 20 8 30 8 40 8 50 9 00 9 10 and asked to make a decision between between going to the canteen or to the office next participants were asked to estimate how cer tain they were that their colleague made the same choice as them ranging from very uncertain over slightly certain somewhat certain and quite certain to very certain which were translated into numerical values ei used in the payoff calculations see below a results page was shown between each round showing the results of the previous rounds includ ing arrival times for both players their choices their own cer tainty estimates and resulting payoffs after 30 seconds the game would automatically proceed to the next round after the last round we asked all participants a few final questions about their strategy and their understanding of the game the experiments were implemented using otree 2 1 35 68 the two classroom experiments dtu 1 and dtu 2 differed from the mturk experiment in a few aspects 1 the maximum number of rounds played was increased from 10 to 30 2 the initial bonus given each participant was increased accordingly from 10 to 30 3 three additional questions were asked in order to elicit more explicitly some of the implicit assumptions and explicit behaviours by the students 4 participants were told that they would not receive any monetary rewards but that they should try to do their best dtu 1 received prizes screenshots additional questions experimental settings and a detailed walk through can be found in the supplementary information payoffs and penalties all mturk players finishing the game were paid a partici pation fee of 2 in addition a bonus could be earned if players did well before the game started the bonus was set to 10 for all participants after each round the bonus was reduced by a personal penalty depending on the two players choices penalties are calculated using a logarithmic scor ing rule and by ordering them to be minimized by success ful coordinations into the canteen penalties are maximized by any type of miscoordination or forbidden choice i e go ing to the canteen at 9 am or later office coordinations are designed to have larger penalties than canteen coordina tions but smaller penalties than miscoordinations in order to make sure that coordination remains the main objective of the game penalties are defined as negative utility values in the following way first we define the chosen action ai by player i i 1 2 to take binary values encoding the canteen option ai 0 and the office option ai 1 and define their re spective certainty estimates ei 0 5 0 625 0 75 0 875 0 99 we can then express the utility u received by player 1 as u e 1 a 1 a 2 1 a 1 a 2 a 1 a 2 ln e 1 2 a 1 a 2 ln 1 e 1 and symmetric for player 2 if any of the players choose the canteen at 9 am or after the utility becomes u e 1 a 1 a 2 2 ln 1 e 1 for player 1 and symmetric for player 2 cor responding to a miscoordination as an example imagine player 1 arrives at 8 40 and choses the canteen a 1 0 she estimates the probability that her colleague also will to go to the canteen to somewhat certain e 1 0 75 if her colleague indeed chooses the canteen a 2 0 her utility will be u e 1 a 1 a 2 ln e 1 0 29 but if her predic tion proves false and her colleague chooses the office instead her utility will be u e 1 a 1 a 2 2 ln 1 e 1 2 77 if she goes to the office just like her colleague her utility is u e 1 a 1 a 2 2 ln e 1 0 58 it should be noted that the logarithmic scoring rule used here is not strictly proper since office and canteen coordinations are penalized differ ently nevertheless we find a good match between estimates and actual choices at arrival times different from those that are prone to miscoordinations as seen in figure 2 indicating that loss minimization remained a central concern and that participants made their choices and estimates as honestly as possible 69 70 formal analysis the game can be represented as a game with three players nature player 1 and player 2 nature is the player that ini tially decides the arrival times of player 1 and 2 then player 1 and 2 are each informed of their own arrival time and each have to choose among two actions o for going to the office and c for going to the canteen based on the choice of actions by all three agents player 1 and 2 receive a payoff and they always receive the same payoff we are disregarding the cer tainty estimates for now the action choice of nature can be represented as an arrival pair t t 1 t 2 consisting of the ar rival time t 1 for player 1 and t 2 for player 2 any arrival pair t has to satisfy that t 1 t 2 10 minutes we will suppress mentioning the unit minutes in the following in our spe cific version of the game we additionally have the restriction that 8 10 ti 9 10 for i 1 2 the analysis of optimal strategies however doesn t depend on the exact arrival times available so we will make things a bit more general and only assume that there is an earliest arrival time tmin and a lat est arrival time tmax and that tmin 8 50 and tmax 9 00 11 given tmin and tmax the set of possible arrival pairs is de fined as t t t 10 tmin t tmax 10 t t 10 tmin 10 t tmax the game starts by nature choosing an element t t na ture is not a strategic player so we assume that t is chosen uniformly at random which is exactly how t is chosen in our experiments the participants do not know that the arrival times are chosen uniformly at random as this is left implicit in the description of the game the following analysis of opti mal strategies in the game could potentially change if arrival times were chosen according to a highly skewed probability distribution when nature has chosen its action t t and player 1 and 2 have chosen their actions a 1 and a 2 player 1 and 2 receive their payoff which we denote ut a 1 a 2 the utility resulting from player 1 choosing a 1 and player 2 choosing a 2 given that nature played t we don t need to make any assumptions regarding the exact utility values payoff values except that succesful coordination into the canteen is always better than succesful coordination into the offices which again is always better than being miscoordinated hence we put the following constraints on the utility function for all t t u 1 if t 1 t 2 9 00 then ut c c ut o o ut c o ut o c u 2 if ti 9 00 for some i then ut o o ut c o ut o c ut c c a strategy for player i i 1 2 is a mapping from arrival pairs to actions that is a mapping si t c o a strategy for i simply determines which action i will choose given the arrival pair each agent only observes her own arrival time that is any two arrival pairs t and t with ti t i will be indistinguishable to player i i 1 2 this immediately leads to the following formal definition of the indistinguishability relation i for player i t i t iff ti t i we need to require the strategy of each player to be uniform that is any two arrival pairs that are indistinguishable by that player should be mapped to the same action if t i t then si t si t due to the uniformity condition we can allow ourselves to overload the meaning of the symbol si and write si ti as an abbreviation of si t 1 t 2 for i 1 2 note that the defined strategies are memoryless markov strategies that is a player s choice only depends on the ob served arrival time in the current round not the history of arrival times and chosen actions in earlier rounds human players playing the game should not be expected to necessar ily play memoryless strategies as they might seek to adopt to the observed strategy of the other player however since it is a repeated game every round is a new instance of the same game perfectly rational players playing the game for a suffi cient number of rounds should converge to an optimal mem oryless strategy we will leave further discussion of history dependent strategies and focus on the optimal memoryless strategies in the following given strategies s 1 and s 2 the pair s s 1 s 2 is called a strategy profile given an arrival pair t t 1 t 2 we use s t as a shorthand for s 1 t 1 s 2 t 2 hence s t denotes the choices made by players 1 and 2 when their strategies are given by s and their arrival times are given by t the payoff of those choices is then ut s t we will use ut s as an abbreviation of ut s t i e ut s is the utility received by player 1 and 2 when they play by strategy profile s in the game with arrival pair t the expected utility eu s of a strategy profile s is the average of the payoffs 71 eu s 1 t t t ut s note again that player 1 and 2 get the same payoff common payoff game so there is only one expected utility value to be computed a strategy profile s pareto dominates another strategy profile s if eu s eu s 71 a strategy profile is pareto optimal if there does not exist another strategy profile dominating it a strategy profile s weakly pareto dominates another strategy profile s if eu s eu s the game is cooperative between player 1 and 2 so both players should seek to play a pareto optimal strategy profile also since it is a common payoff game all pareto optimal strategy profiles have the same expected utility 71 define subsets of arrival pairs t 1 t 2 t by t 1 8 10 20 x 8 20 20 y t y x y 1 t 2 8 20 20 y 8 10 20 x t y x y 1 note that t 1 and t 2 are disjoint and that t t 1 t 2 we hence get for any strategy profile s eu s 1 t t t ut s 1 t i 1 2 t ti ut s 1 given a strategy profile s we let s ti be the restriction of s to ti that is s ti is as s except it is only defined on the arrival pairs in ti so s ti is the strategy profile for the subgame in which only the arrival pairs in ti can be chosen we can now rewrite formula 1 as eu s 1 t t t ut s 1 t i 1 2 t ti ut s ti 2 note that there exists no t t 1 t t 2 and i 1 2 such that t i t hence the strategy profile s t 1 can be cho sen completely independently of the strategy profile s t 2 using formula 2 it then follows that a strategy profile s is pareto optimal in the full game if and only if each of the strategy profiles s t 1 and s t 2 are pareto optimal on the subgames with arrival pairs only in t 1 and t 2 respec tively when looking for pareto optimal strategy profiles in the game we can hence look for pareto optimal strategy pro files on each of the two subgames independently essentially the game consists of two disjoint subgames note also that the two games are completely symmetric since t 1 t 2 t 1 if and only if t 2 t 1 t 2 hence the two subgames necessarily have the exactly the same strategy profiles up to symmetry swapping the roles of player 1 and 2 it is hence sufficient to only investigate pareto optimal strategies for one of these subgames say the subgame with arrival pairs in t 1 we will now try to determine the possible candidates for being pareto optimal strategy profiles for the subgame with arrival pairs in t 1 we do this by iteratively removing strategy profiles that are not pareto optimal lemma 1 going to the canteen at 9 00 or after can never be part of a pareto optimal strategy profile more precisely no strategy profile s with si ti c for some i 1 2 and ti 9 00 can be pareto optimal proof consider a strategy profile s with si ti c for some i 1 2 and some t t 1 with ti 9 00 we only consider 12 the case of i 1 the case of i 2 being proved similarly then we have s 1 t 1 c and t 1 9 10 20 x for some x recall that we have restricted attention to the arrival pairs in t 1 now define a strategy profile s which is identical to s except s j t j o for all j 1 2 and t j 9 00 we want to show that s pareto dominates s first note that u 9 10 20 x 9 00 20 x s u 9 10 20 x 9 00 20 x o o def of s u 9 10 20 x 9 00 20 x c by u 2 u 9 10 20 x 9 00 20 x s where the last equality follows from s 1 9 10 20 x s 1 t 1 c this proves the existence of an arrival pair for which s has a strictly higher utility than s to prove eu s eu s we hence only need to prove that ut s ut s for all t t 1 when t 1 t 2 9 00 this is trivial as we then have s t s t by definition of s when t j 9 00 for some j s t will by definition of s necessarily have an o in each position where s t also has one it follows by constraint u 2 that ut s ut s as required lemma 2 assume si t o and s 3 i t 10 c for some strategy profile s some arrival time t and some i 1 2 then s is not pareto optimal proof let s t and i be as stated above we need to find a strategy profile s pareto dominating s we only consider the case i 1 the case of i 2 being symmetric then we have s 1 t o and s 2 t 10 c if sj t j c for some j 1 2 and t j 9 00 the existence of a strategy dominating s follows immediately from lemma 1 we can hence in the following assume that sj t j o for all j 1 2 and t j 9 00 since s 2 t 10 c we can thus also conclude that t 10 9 00 now define s to be identical to s except that we let s 1 t 20 x c for x 0 s 2 t 10 20 y c for y 0 recalling that we are only considering arrival pairs in t 1 we want to show that eu s eu s first note that u t t 10 s u t t 10 c s 2 t 10 by def of s u t t 10 c c by def of s u t t 10 o c by u 1 as t 10 9 00 u t t 10 s by def of s to prove eu s eu s we hence only need to prove that ut s ut s for all t t the only non trivial cases are when either t 1 t 20 x for some x 0 or t 2 t 10 20 y for some y 0 in all other cases s t s t consider first a t with t 2 t 10 20 y for some y 0 then t 1 t 20 x for some x 0 and hence ut s ut c c constraint u 1 now immediately gives ut c c ut s and hence ut s ut s as required consider instead t with t 1 t 20 x for some x 0 then either t 2 t 10 20 y for some y 0 or we have t 1 t and t 2 t 10 both cases have already previously been covered this completes the proof definition 3 a cut off strategy with cut off t is a strategy s with s t c for all t t and s t o for all t t a cut off strategy profile with cut off t is a pair s 1 s 2 where both s 1 and s 2 are cut off strategies with cut off t a cut off strategy profile with cut off before 8 10 is called an all office strategy profile note that the strategy we in the informal discussions above referred to as the canteen before 9 strategy is the cut off strategy with cut off 8 55 we now get the result on optimal strategies claimed in the informal discussion theorem 4 any pareto optimal strategy profile is either the all office strategy profile or the cut off strategy profile with cut off 8 55 proof let s be a pareto optimal strategy profile assume that tmin is of the form 8 50 20 x for some x 0 and tmax is of the form 9 00 20 y for some y 0 the other cases be ing treated symmetrically let be the following string over the alphabet o c where we alternate between the strategy choices of player 1 and 2 from tmin to tmax s 1 tmin s 2 tmin 10 s 1 tmin 20 s 2 tmin 30 s 2 tmax note that when t 1 t 2 t 1 then s 1 t 1 and s 2 t 2 both occur in the string from lemma 2 it follows that cannot contain the substring oc suppose the first letter of is o then since does not contain the substring oc we have o a string of only os hence s 1 t s 2 t o for all t t 1 this means that s is the all office strategy profile suppose alternatively that the first letter of is c the last letter of is necessarily o since tmax 9 00 and s is pareto optimal cf lemma 1 since is then a string that starts with c and ends with o but doesn t contain oc it must have the form cnom for some n m 1 with m n hence there exists a t such that si t c for all t t and si t o for all t t and all i 1 2 in other words s is a cut off strategy profile with cut off t what is left to prove is then only that s has cut off 8 55 first note that we must necessarily have t 9 00 since otherwise s would not be pareto optimal according to lemma 1 from this it follows that we for all arrival pairs t 1 t 2 t 1 must have 1 if t 1 t 2 t the two players coordinate into the can teen receiving the highest possible payoff 2 if t 1 t t 2 or t 2 t t 1 the two players are miscoordinated one chooses canteen the other office receiving the lowest possible payoff 3 if t 1 t 2 t the two players coordinate into their of fices receiving a payoff strictly between the lowest and highest note that there will always be exactly one arrival pair in t 1 of type 2 independent of t since arrival pairs of type 1 have a higher payoff than arrival pairs of type 3 and s is pareto optimal s must have the maximal number of arrival pairs of type 1 that is it is the cut off strategy with the latest possible cut off that is exactly the cut off 8 55 or more precisely any cut off strictly between 8 50 and 9 00 the theorem proves what was argued in the main text there are only two candidates for an optimal strategy the all office strategy or the canteen before 9 strategy this does not in any way imply that we should expect human players to adopt any of these two strategies but if two perfectly rational players were to play the game and if they knew they could expect the other player to play perfectly rational as well of course the optimal strategy would be played and as earlier mentioned in our particular version of the game the optimal strategy is the all office strategy 13 logistic regression the experimental results were analyzed using a logistic regres sion model with the arrival time t as predictor the model was specified as i i it with i being the log odds i log pi 1 pi and i 1 2 3 denoting the mturk dtu 1 and dtu 2 experiments respectively allowing for dif fering slopes and intercepts results are shown in figure 1 the steepest slope occurs at p t 1 2 which for the mturk and dtu 1 experiments is t 8 48 and for dtu 2 is t 8 52 the regression line in figure 5 is obtained similarly by combining observations from all three experiments the high number of observations imply small confidence bands hence conclusions from the models can be viewed as robust acknowledgments server infrastructure and devops was handled by mikkel birkegaard andersen the authors wish to thank vincent f hendricks for enabling the project this research was ap proved by the institutional review board at the university of copenhagen and included informed consent by all partic ipants in the study the authors gratefully acknowledge the support provided by the carlsberg foundation under grant number cf 15 0212 author contributions thomas bolander developed the game made the theoretical analysis and contributed as lead author robin engelhardt designed the experiment analyzed the data and contributed as lead author thomas s nicolet designed the experiment analyzed the data and contributed as lead author the au thors declare no conflict of interest 1 r fagin j y halpern y moses m y vardi reasoning about knowledge mit press 1995 2 d lewis convention a philosophical study 1969 3 h h clark c r marshall definite knowledge and mu tual knowledge 1981 4 t c schelling the strategy of conflict harvard univer sity press 1980 5 r j aumann agreeing to disagree the annals of statis tics 1976 1236 1239 6 i van de pol i van rooij j szymanik parameterized complexity of theory of mind reasoning in dynamic epis temic logic journal of logic language and information 27 2018 255 294 7 p milgrom an axiomatic characterization of common knowledge econometrica journal of the econometric society 1981 219 222 8 h h clark using language cambridge university press 1996 9 j w bradbury s l vehrencamp et al principles of animal communication 1998 10 m tomasello joint attention as social cognition joint attention its origins and role in development 1995 103 130 11 e lorini l tummolini a herzig establishing mutual beliefs by joint attention towards a formal model of public events in proc of cogsci pp 1325 1330 12 t bolander h van ditmarsch a herzig e lorini p pardo f schwarzentruber announcements to atten tive agents journal of logic language and information 2015 1 35 13 h gintis rationality and common knowledge ratio nality and society 22 2010 259 282 14 m f friedell on the structure of shared awareness behavioral science 14 1969 28 39 15 t c schelling bargaining communication and limited war conflict resolution 1 1957 19 36 16 j tooby l cosmides groups in mind the coalitional roots of war and morality human morality and sociality evolutionary and comparative perspectives 2010 91 234 17 y n harari sapiens a brief history of humankind random house 2014 18 d premack g woodruff does the chimpanzee have a theory of mind behavioral and brain sciences 1 1978 515 526 19 u frith c d frith development and neurophysiology of mentalizing philosophical transactions of the royal society of london series b biological sciences 358 2003 459 473 20 k vogeley p bussfeld a newen s herrmann f happe p falkai w maier n j shah g r fink k zilles mind reading neural mechanisms of theory of mind and self perspective neuroimage 14 2001 170 181 21 i apperly mindreaders the cognitive basis of theory of mind psychology press 2010 22 p n johnson laird mental models towards a cogni tive science of language inference and consciousness 6 harvard university press 1983 23 k gray a c jenkins a s heberlein d m wegner distortions of mind perception in psychopathology pro ceedings of the national academy of sciences 108 2011 477 479 24 s baron cohen h a ring s wheelwright e t bull more m j brammer a simmons s c williams so cial intelligence in the normal and autistic brain an fmri study european journal of neuroscience 11 1999 1891 1898 25 s m schaafsma d w pfaff r p spunt r adolphs deconstructing and reconstructing theory of mind trends in cognitive sciences 19 2015 65 72 26 i a apperly s a butterfill do humans have two sys tems to track beliefs and belief like states psychological review 116 2009 953 27 r saxe l young theory of mind how brains think about thoughts the oxford handbook of cognitive neu roscience 2 2013 204 213 28 a gopnik j w astington children s understanding of representational change and its relation to the understand ing of false belief and the appearance reality distinction child development 1988 26 37 29 d o stahl p w wilson on players models of other players theory and experimental evidence games and economic behavior 10 1995 218 254 30 r nagel unraveling in guessing games an experi mental study the american economic review 85 1995 14 1313 1326 31 t hedden j zhang what do you think i think you think strategic reasoning in matrix games cognition 85 2002 1 36 32 b keysar s lin d j barr limits on theory of mind use in adults cognition 89 2003 25 41 33 s pinker the language instinct how the mind creates language penguin uk 2003 34 a m leslie l thaiss domain specificity in conceptual development neuropsychological evidence from autism cognition 43 1992 225 251 35 r saxe theory of mind neural basis encyclopedia of consciousness 2 2009 401 410 36 c heyes submentalizing i am not really reading your mind perspectives on psychological science 9 2014 131 143 37 j perner h wimmer john thinks that mary thinks that attribution of second order beliefs by 5 to 10 year old children journal of experimental child psychol ogy 39 1985 437 471 38 k sullivan d zaitchik h tager flusberg preschoolers can attribute second order beliefs developmental psy chology 30 1994 395 39 p kinderman r dunbar r p bentall theory of mind deficits and causal attributions british journal of psy chology 89 1998 191 204 40 c camerer g loewenstein m weber the curse of knowledge in economic settings an experimental analy sis journal of political economy 97 1989 1232 1254 1 s a birch p bloom the curse of knowledge in reasoning about false beliefs psychological science 18 2007 382 386 42 academian unrolling social metacognition three levels of meta are not enough lesswrong 2018 6 j de freitas k thomas p descioli s pinker common knowledge coordination and strategic mentalizing in hu man social life proceedings of the national academy of sciences 116 2019 13751 13758 44 a s goodie p doshi d l young levels of theory of mind reasoning in competitive games journal of behav ioral decision making 25 2012 95 108 45 s pinker the stuff of thought language as a window into human nature penguin 2007 46 s pinker m a nowak j j lee the logic of indirect speech proceedings of the national academy of sciences 105 2008 833 838 47 h de weerd r verbrugge b verheij negotiating with other minds the role of recursive theory of mind in nego tiation with incomplete information autonomous agents and multi agent systems 31 2017 250 287 48 r verbrugge b meijering s wierda h van rijn n taatgen et al stepwise training supports strategic second order theory of mind in turn taking games judg ment and decision making 13 2018 79 98 49 o curry m j chesters putting ourselves in the other fellow s shoes the role of theory of mind in solving co ordination problems journal of cognition and culture 12 2012 147 159 50 m devaine g hollard j daunizeau theory of mind did evolution fool us plos one 9 2014 e 87619 51 h de weerd r verbrugge b verheij higher order theory of mind in the tacit communication game biolog ically inspired cognitive architectures 11 2015 10 21 52 b erb artificial intelligence theory of mind 2016 53 t bolander seeing is believing formalising false belief tasks in dynamic epistemic logic in jaakko hintikka on knowledge and game theoretical semantics springer 2018 pp 207 236 54 n bard j n foerster s chandar n burch m lanc tot h f song e parisotto v dumoulin s moitra e hughes et al the hanabi challenge a new frontier for ai research artificial intelligence 280 2020 103216 55 l dissing t bolander implementing theory of mind on a robot using dynamic epistemic logic in proceedings of the international joint conference on artificial intelli gence ijcai 56 k a thomas p descioli o s haque s pinker the psychology of coordination and common knowledge jour nal of personality and social psychology 107 2014 657 57 k a thomas j de freitas p descioli s pinker recursive mentalizing and common knowledge in the by stander effect journal of experimental psychology gen eral 145 2016 621 58 j j lee s pinker rationales for indirect speech the theory of the strategic speaker psychological review 117 2010 785 59 k a thomas p descioli s pinker common knowl edge coordination and the logic of self conscious emo tions evol hum behav 39 2018 179 190 60 j de freitas p descioli k a thomas s pinker mai monides ladder states of mutual knowledge and the per ception of charitability journal of experimental psychol ogy general 148 2019 158 61 g s becker the economic approach to human behavior university of chicago press 1976 62 a rubinstein the electronic mail game strategic be havior under almost common knowledge the american economic review 1989 385 391 63 p van emde boas j groenendijk m stokhof the conway paradox its solution in an epistemic framework in proceedings of the third amsterdam montague sym posion pp 159 182 64 h van ditmarsch b kooi one hundred prisoners and a light bulb in one hundred prisoners and a light bulb springer 2015 pp 83 94 65 b meijering l van maanen h van rijn r verbrugge the facilitative effect of context on second order social reasoning in proceedings of the annual meeting of the cognitive science society volume 32 66 p c wason d shapiro natural and contrived experi ence in a reasoning problem quarterly journal of exper imental psychology 23 1971 63 71 67 r verbrugge l mol learning to apply theory of mind journal of logic language and information 17 2008 489 511 68 d chen m schonger c wickens otree an open source platform for laboratory online and field experi ments journal of behavioral and experimental finance 9 2016 88 97 69 t seidenfeld calibration coherence and scoring rules philosophy of science 52 1985 274 294 70 t r palfrey s w wang on eliciting beliefs in strategic games journal of economic behavior organization 71 2009 98 109 71 y shoham k leyton brown multiagent systems al gorithmic game theoretic and logical foundations cam bridge university press 2008 15 supplementary information mturk walkthrough and screenshots after accepting our human intelligence task hit and providing informed consent participants from mturk were put in a waiting room until they were paired up with another participant after a group of two was formed participants were directed to an initial instruction page which detailed the rules of the game with a time limit of 240 seconds see screenshot in fig 7 after reading the instructions participants were directed to round 1 of 10 where they were given their own arrival time and asked to make a decision between between going to the canteen or the office each round had a time limit of 61 seconds and rules from the instructions were repeated on the bottom of the page see example screenshots for round 1 fig 8 after making their decision canteen or office participants were asked to estimate how certain they were that the other player made the same choice as them ranging from very uncertain over slightly certain somewhat certain and quite certain to very certain see fig 9 after both players have made their choices and their certainty estimates they are prompted to a results page showing them the results of the previous rounds including arrival times for both players their choices their own certainty estimate and resulting payoff see example screenshot after round 6 fig 10 after 30 seconds the game would automatically proceed to the next round in many instances groups were not able to play the maximal number of rounds because one or both of the participants had lost all their bonuses an example of such a situation is shown in fig 11 in such cases the game would end for both players and they were asked to answer a follow up question 1 the game is over do you think it was your fault it is over your colleagues fault or do you think it was because of some other reason possible answers my fault other s fault other reason this question probes into participants ability to rise above their possibly myopic understanding of the game in addition to this question all participants were asked three additional post game questions about their strategy of play and their understanding of the game the first was 2 what strategy did you use while playing this game open ended the answers to this question provided insight into the reasoning and thoughts of the participants the next question was used to gauge the depths of recursive reasoning and reads 3 imagine you could have agreed beforehand with your colleague about a point in time where it is safe to go to the canteen what time would that be i don t know there is no such time 8 00 8 10 8 20 8 30 8 40 8 50 9 00 9 10 a final question pertaining all participant s understanding of the concept of common knowledge was the following 4 imagine you arrive at 8 10 am is it common knowledge between you and your colleague that it is safe to go to the canteen that is you both arrived before 9 00 am yes no don t know dtu experiments the dtu students were asked three additional post game questions 5 did you ever go to the canteen at an arrival time later than what was safe according to your previous answer why or why not open ended 6 did you ever choose differently after seeing the same arrival time again at a later point in the game why or why not open ended 7 imagine you arrived at 8 40 9 00 and you have been secretly informed that your colleague s arrival time is 8 50 where do you think your colleague will go canteen office in the last question half of the participants were given 8 40 as their own arrival time while the other half were given 9 00 the question concerns whether player s own knowledge of the other s arrival time affect their prediction of the other player s decision it relates to the curse of knowledge 1 since participants might attribute their own belief that it is early enough or too late to go to the canteen to the other player 16 mturk settings looking at table ii the average payout to mturk workers was 4 17 including a general participation fee of 2 which amounts to an average of more than 20 per hour which is considered very generous according to mturk guidelines and certainly above the recently estimated average of 6 per hour when excluding un submitted and rejected work 2 students in the dtu experiments dtu 1 and dtu 2 did not receive any monetary reward but were told to try to maximize their payoff and awarded prizes for doing well experiment participants attrition rate n rounds avgpayout mturk 714 0 02 680 10 4 36 dtu 1 106 0 13 80 30 prizes dtu 2 50 0 08 42 30 table ii the main experiment on amazon mechanical turk mturk had 714 participants of which 17 participants 2 4 quit prematurely some of them quite early in the game these quitters were told in the consent form that they would receive no bonus and no participantion fee they are excluded from the data analysis their lucky colleagues however got both their bonuses and participation fee but are likewise excluded from the data analysis therefore the final number of subjects n is reduced by twice the attrition rate in the two dtu experiments with students from the technical university of denmark dtu 1 and dtu 2 attrition rates were slightly higher mainly due to the higher number of rounds played participants quitting a study before completing it is prevalent on mturk and varies systemically across experimental conditions 3 in our experiments on amazon mechanical turk attrition rates were 2 witnessing that we had managed to design the experiment in a way that minimized drop out rates a combination of high payouts a logarithmic scoring rule taking advantage of loss aversion biases a consent form stipulating the revocation of the participation fee after dropout and minimization of waiting times may have been the main reasons all participants automatically received a qualification when accepting a hit this qualification ensured that participants could not play the game again in addition we required that participants should have had completed at least 500 hits have an accepted hit rate of 98 or above and should be from the united states or canada this ensured that we would get relatively experienced and qualified participants mturk participant attention was expected to be equal to or better than undergraduate participant s attention 4 while various forms of dishonesty practical joking or trying to pair up with a friend was expected to be rare due to the high turnover rate experienced for our hits in addition during the experiment participants had easy access to our email for questions and possible bug reports apart from a few timeouts participants had no comments or complaints formal definitions of private shared and common knowledge we can define the notion of common knowledge and related notions a bit more precisely as follows following the conventions from epistemic logic see e g herzig and mauffre 5 given a proposition p and an agent i we use kip to denote that agent i knows p given a group of agents g 1 m we say that p is private knowledge in g if at least one of the agents know p that is if kip is true for some i g we use egp to denote that everybody in g knows p that is for all i g it is true that kip whenever it is not necessary to be explicit about the group of agents g we will just write ep and say everybody knows p for all n we then recursively define enp to be shorthand for een 1 p where e 1 p is shorthand for ep so for instance e 2 p expresses that everybody knows that everybody knows that p and in general enp means we have n iterations of everybody knows that in front of p we read enp as everybody knows p to depth order n we also call this shared knowledge of p to depth order n or nth order shared knowledge when we say that p is shared knowledge we mean that it is shared knowledge to depth n for some n 1 common knowledge of p then means that enp is true for all n n in epistemic logic the three notions private shared and common knowledge are usually not considered to be mutually exclusive so if p is common knowledge it is also automatically both shared and private since when the conditions for p being common knowledge are satisfied also the conditions for it being shared and private are satisfied however in many cases as in our paper we want to make an exclusive distinction between the three types of knowledge we can define p to be shared knowledge only if it is shared knowledge but not common knowledge thus p is shared knowledge only if for some n we have enp but not en 1 p similarly we can say that p is private knowledge only if p is private but not shared knowledge thus p is private knowledge only if kip holds for some but not all i in most texts as in ours it is left implicit whether private and shared knowledge are interpreted inclusive or exclusive that is one doesn t explicitly distinguish between shared knowledge and shared knowledge only normally it is clear from the context whether one intends the concept to be interpreted exclusively or inclusively in our paper we interpret the concepts exclusively although we make an exception for private knowledge when p is known by all agents we say that p is both private and first order shared knowledge the exact border between private and shared knowledge vary significantly between different papers de freitas 6 consider the case ep to still 17 only be private knowledge and for p to be considered shared knowledge furthermore requires that there is at least one agent i knowing ep to be true that is requires kiep to be true for some i g the point of de freitas et al is that if only ep is true it is not really shared knowledge but only private knowledge held by everyone in g in our paper we have sought a compromise between the terminology by de freitas et al and the standard terminology in epistemic logic and hence we have the overlap between private and shared knowledge supporting data analysis when a group experiences a round of miscoordination we expect some kind of learning to take place why did my colleague choose differently than i did should be an obvious question a player asks herself prompting deeper perspective taking and possibly an understanding of the lack of common knowledge we investigate this by partitioning decisions into those in which a participant never before has experienced a miscoodination with her colleague m 0 and those in which a participant has experienced one or more miscoodinations m 0 furthermore since the number of rounds and hence miscoordinations are very different for mturk participants and dtu students results from mturk and dtu are shown separately with the two dtu experiments combined results for the choices in figure 12 show significant differences between mturk groups having miscoordinated or not while for dtu students those differences are not significant looking into the corresponding certainty estimates as shown in figure 13 we see a similar pattern as before much steeper profiles among dtu students but also much lower certainty estimates around critical arrival times datasets mturk anonymous xlsx dtu 1 anonymous xlsx and dtu 2 anonymous xlsx anonymized data set of all mechanical turk experiments parameters session name of experiment code anonymized participant id group group number in session id in group player id in group round round number arrival arrival time choice choice made by participant certainty certainty estimate by participant bonus penalty in dollars strategy free text question after game has ended simple answers to question 4 cutoff answers to question 3 fault answers to question 1 payoff money left after game has finished 1 s a birch p bloom the curse of knowledge in reasoning about false beliefs psychological science 18 2007 382 386 2 k hara et al a data driven analysis of workers earnings on amazon mechanical turk proc of the 2018 conference on human factors in computing systems acm 2018 449 3 h zhou a fishbach the pitfall of experimenting on the web how unattended selective attrition leads to surprising yet false research conclusions journal of personality and social psychology 111 2016 493 504 4 d g rand p bloom the promise of mechanical turk how online labor markets can help theorists run behavioral experiments journal of theoretical biology 299 2012 172 9 5 a herzig f maffre how to share knowledge by gossiping springer 2015 249 263 6 j de freitas k a thomas p descioli s pinker common knowledge coordination and strategic mentalizing in human social life proceedings of the national academy of sciences 116 2019 13751 13758 18 fig 7 screenshot of instructions page 19 fig 8 screenshot of choice page round 1 fig 9 screenshot of page where participants had to estimate the probability that their colleague would make the same choice 20 fig 10 screenshot of results page round 6 21 fig 11 screenshot after a player has lost all her bonus 22 8 00 8 10 8 20 8 30 8 40 8 50 9 00 9 10 arrival 0 0 0 1 0 2 0 3 0 4 0 5 0 6 0 7 0 8 0 9 1 0 fre qu en cy o f c an te en c ho ic e mturk miscoordinations 0 n 2762 0 n 1498 a 8 00 8 10 8 20 8 30 8 40 8 50 9 00 9 10 arrival 0 0 0 1 0 2 0 3 0 4 0 5 0 6 0 7 0 8 0 9 1 0 fre qu en cy o f c an te en c ho ic e dtu 1 dtu 2 miscoordinations 0 n 688 0 n 2484 b fig 12 participant s decisions of going to the canteen as a function of their arrival time here partitioned into those groups who previous have experienced zero blue or one or more orange miscoordinations mturk participants are shown one the left dtu students on the right 8 00 8 10 8 20 8 30 8 40 8 50 9 00 9 10 arrival very uncertain slightly certain somewhat certain quite certain very certain ce rta in ty o f c oo rd in at io n mturk a 8 00 8 10 8 20 8 30 8 40 8 50 9 00 9 10 arrival very uncertain slightly certain somewhat certain quite certain very certain ce rta in ty o f c oo rd in at io n dtu 1 dtu 2 b fig 13 participant s certainty estimates of being able to coordinate with their colleauge as a function of their arrival time partitioned into those groups who previous have experienced zero blue or one or more orange miscoordinations mturk participants are shown one the left dtu students on the right references references