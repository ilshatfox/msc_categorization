finding the second best candidate under the mallows model xujun liu and olgica milenkovic university of illinois urbana champaign july 9 2021 abstract the well known secretary problem in sequential analysis and optimal stopping theory asks one to max imize the probability of finding the optimal candidate in a sequentially examined list under the constraint that accept reject decisions are made in real time the problem has received significant interest in the mathematics community and is related to practical questions arising in online search data streaming daily purchase modeling and multi arm bandit mechanisms a version of the problem is the so called postdoc problem for which the question of interest is to devise a strategy that identifies the second best candidate with highest possible probability of success we study the postdoc problem in its combinatorial form in this setting a permutation of length n is sampled according to some distribution on the symmetric group sn and the elements of are revealed one by one from left to right so that at each step one can only observe the relative orders of the elements at each step one must decide to either accept or reject the currently presented element and cannot recall the decision in the future the question of interest is to find the optimal strategy for selecting the position of the second largest value we solve the postdoc problem for the untraditional setting where the candidates are not presented uniformly at random but rather according to permutations drawn from the mallows distribution the mallows distribution assigns to each permutation sn a weight c where the function c counts the number of inversions in to identify the optimal stopping criteria for the significantly more challenging postdoc problem we adopt a combinatorial methodology that includes new proof techniques and novel methodological extensions compared to the analysis first introduced in the setting of the secretary problem the optimal strategies depend on the parameter of the mallows distribution and can be determined exactly by solving well defined recurrence relations 1 introduction the secretary problem was introduced by cayley but the first formal description was given by gardner 11 12 in 1960 in its most well known form the question reads as follows n individuals can be ranked from best to worst according to their qualifications without ties they apply for a secretary position and are interviewed one by one in random order when the ith candidate appears we can only compare or rank her him relative to the i 1 previously seen individuals at the time of the ith interview we can hire the person presented or continue with the interview process by rejecting the current candidate once a rejection is made the decision cannot be recalled we must select one of the n individuals what selection strategy i e stopping rule maximizes the probability of selecting the best highest ranked candidate the first published solution was given by lindley 16 using direct algebraic methods while dynkin 7 considered the process as a markov chain and solved the problem in a different way the solution turns out to be surprisingly elegant and simple reject the first n e candidates where e is the base of the natural logarithm and then select the first candidate that outranks all previously seen candidates 1 this strategy ensures a probability of successfully identifying the best candidate with probability 1 e when n parts of the work will be presented at the international symposium on information theory isit 2021 melbourne australia 1 the initial rejection stage is referred to the exploration stage of stage of the process 1 ar x iv 2 01 1 07 66 6 v 3 m at h c o 1 0 ju l 20 21 both the problem formulation and solution have several practical drawbacks if the selection policy that rejects more than 1 3 of the candidate without regards to their qualifications is publicly known it is hard to incentivize candidates to appear for the interview furthermore the actual number of candidates appearing for an interview is usually random with an unknown distribution the candidates may also be presented to the evaluator in a nonuniform order e g jones 14 and multiple selections or queries may be allowed e g 17 despite these issues the secretary problem has attracted significant interest in the theoretical computer science and machine learning community as modifications of the problem allow for more realistic interview settings e g szajowski 21 the prophet problem closely related to the secretary problem but involving probabilistic models has received significant attention as illustrated in the work by esfandiari hajiaghayi liaghat and monemizadeh 8 and rubinstein 20 and see references therein as well the classical paper of kleinberg 15 introduced a variation of the original problem in which the algorithm is allowed to choose a fixed sized subset of candidates and the goal is to maximize their sum provided that the best candidates have the highest values the work also tied this problem to online auction analysis the interested reader is also referred to the work by babaioff immorlica kempe and kleinberg 1 a stochastic version of the secretary problem with payoff values was introduced by bearden 4 and used to model how traders make their selling decisions the more recent work of zhao hu rahimi and king 23 demonstrated that the groupon data describing the behavior of users in daily deal websites can be formulated in terms of the secretary problem the work of jones 13 14 fowlkes and jones 10 and crews jones myers taalman urbanski and wilson 6 departed from the standard assumption that candidates are interviewed uniformly at random and proposed using the mallows model 18 instead this modeling strategy is of significant practical interest as candidates are usually not interviewed blindly but based on prior reviews of their resumes side information provided by other institutions or other evaluation approaches the readers are referred to the paper of busa fekete fotakis sz r nyi and zampetakis 5 and the references therein for more details on the mallows model another extension of the secretary problem is in terms of identifying the ath best candidate where a 2 the case a 2 for which the goal is to identify the second best candidate is known as the postdoc problem and appears to have been introduced by dynkin in the 1980 s and was further studied by bay n ayuso grau oller marc n and ruiz 2 3 a rationale for choosing to find and hire the second best candidate is that the best candidate may be interviewed for multiple jobs and may not accept the given offer an optimal selection strategy similar to the one derived for the secretary problem was first proposed by rose 19 and independently analyzed by vanderbei 22 using hamilton jacobi bellman equations an optimal strategy involves an exploration stage after which the first left to right second best candidate i e second best ranked when comparing with all appeared candidates is selected for an offer this strategy succeeds in finding the second best candidate with probability 1 4 given that n here we present the first study of the postdoc problem in the exponential mallows model parametrized by 0 our results reveal that for 1 the optimal strategy is to reject the first k candidates and then accept the next left to right second best candidate this coincides with the optimal strategy derived in 22 for which 1 and rankings are drawn uniformly at random for 0 1 2 the optimal strategy is to reject the first k candidates and then accept the next left to right best candidate if no selection is made before the last candidate then the last candidate is accepted the most interesting optimal strategy arises for 1 2 1 in which case under certain constraints the optimal strategy is to reject the first k 1 candidates and then accept the next left to right maximum or reject the first k 2 k 1 candidates and then accept the next left to right second maximum whichever comes first although some of our proofs build upon the techniques described in 14 most of the results require new combinatorial ideas and strategies that are significantly more complicated than their secretary problem counterparts moreover our result implies as a special case a combinatorial proof of the classical postdoc problem 1 which differs from the one presented in 19 and 22 the paper is organized as follows section 2 introduces the relevant concepts terminology and models used throughout the paper this section also contains a number of technical lemmas that help in establishing our main results pertaining to the optimal selection strategies described in section 3 an in depth analysis 2 of the exploration phase length and the probability of success for the postdoc selection process under the mallows distribution is presented in section 4 simulation results for exploration phase lengths versus the parameter of the mallows distribution are listed at the end of section 4 2 preliminaries we assume that the sample space is the set of all permutations of n elements i e the symmetric group sn the underlying algebra equals the power set of sn the best candidate is indexed by n the second best candidate by n 1 while the worst candidate is indexed by 1 we use both the term postdoc and second best candidate to refer to the element indexed by n 1 it is assumed that the committee can accurately compare the candidates presented but not the candidates unseen at the given point of the decision making process unlike standard approaches for the postdoc problem we assume that the candidates are presented according to a permutation order dictated by the mallows distributionm parametrized by a real number 0 the probability of presenting a permutation sn to the postdoc hiring committee equals f c sn c where c sn n is a permutation statistic equal to the smallest number of adjacent transpositions needed to transform into the identity permutation 12 n or equivalently equal to the number of pairwise element inversions this inversion count is known under the name kendall distance between the permutation and the identity permutation 12 n 2 note that the notation for a permutation in square bracket form should not be confused with the notation for a set a b a a 1 b b a and the meaning will be clear from the context for a given permutation sn drawn according to the mallows model we say that a strategy wins the game if it correctly identifies the second best candidate when presented with the next definitions are based on the work of jones 14 definition 2 1 given a sn the k th prefix of denoted by k is a permutation in sk that represents the relabelling of the first k elements of according to their relative order from smallest to largest a proper prefix of is a prefix of with length for example for 165243 s 6 and k 4 we have 4 1432 definition 2 2 a strike set is a list of prefixes of possibly different lengths that immediately trigger an acceptance decision for the last candidate observed in other words a strike set a ni 1 si corresponds to a collection of permutations b sn such that for each a with k we include in b all permutations such that the k th prefix of equals when the permutation sn is presented we choose to accept the k th position of since we see when there are exactly k candidates already showed up note that any strategy can be represented by a strike set during the game if the prefix we have seen so far is not in the strike set which describes the winning strategy then we reject the current candidate and continue definition 2 3 let ni 1 si and assume that the length of the permutation equals k we say that a sn is prefixed if k for example 165243 s 6 is 1432 prefixed given that is prefixed we say that is winnable if accepting the prefix i e if accepting the th candidate when is encountered identifies the second best candidate i e wins the game with interview ordering more precisely for 1 2 k we have that is winnable if is prefixed and k n 1 strike sets are key to determining the optimal strategy and the largest possible probability of winning the game as described in theorem 2 13 two other important concepts in our analysis are three conditional 2 the kendall distance is more frequently referred to as the kendall distance since we make frequent use of the symbol to denote permutations and their prefixes we use the name kendall instead of kendall 3 probabilities of winning the game based on the type of prefix encountered defined below and the notion of a prefix equivalent statistic which includes the kendall statistic definition 2 4 we say a prefix is eligible if either a it ends in a left to right maxima type i or b it ends in a left to right second maxima type ii or c it has length n definition 2 5 a strike set is valid if it 1 consists of prefixes that are eligible and 2 it has no pair of elements such that one contains the other as prefix i e the strike set is minimal and 3 every permutation sn contains some element of the strike set as a prefix i e one can always make a selection an optimal strategy for identifying the global second best candidate is represented by a valid strike set definition 2 6 let be a permutation of length k n we define the standard denominator sd of according to sd prefixed sn c throughout the remainder of the paper we also use for the operator defined as a b c d a c b d using the standard denominator with the operator allows for simplifying all pertinent explanations as one can only focus on the numerators of fractions when a probability is written as a fraction we view the numerator as the cardinality of an event and the denominator as the cardinality of the sample space and thus we do not cancel out their greatest common divisor to simplify the expression until the final stages of the proof definition 2 7 for a prefix of length k such that 1 k n define q p win the game with the strategy accepting is prefixed 1 qo p win with the best strategy available after rejecting is prefixed q p win with the best strategy available after rejecting k 1 is prefixed based on the previous definitions it is clear that q winnable sn c sd and q max q qo 2 intuitively the probability q measures the chance of winning by accepting the current candidate while qo measures the best chance to win by selecting a future candidate definition 2 8 for each s 1 where n we define j 1 j to be the prefixed permutation of length such that its last position has value j after relabelling according to the first 1 positions of for example for 123 a permutation of length 3 we have 1 2341 2 1342 3 1243 and 4 1234 next let 1 k n 1 then qo represents a fraction with denominator sd and numerator equal to the sum of c over all prefixed permutations such that the second best candidate indexed by n 1 in can be selected using an optimal strategy after rejecting the th candidate thus qo q 1 q k 1 and sd k 1 j 1 sd j 3 definition 2 9 we call a prefix positive if q qo and negative otherwise in words a prefix of length k is positive if the probability of winning by accepting k is greater than or equal to the probability of winning after deciding to reject k we call a prefix strictly positive if q qo 4 proposition 2 10 let be any permutation of length at most n the probabilities qo q and q can be pre calculated using a sequential procedure proof we first observe that the prefixes of length n are positive which serves as a base case for induction on the length of a prefix more precisely for a permutation of lengthn if n n 1 then q q 1 and qo 0 if n n 2 or n n then q qo q 0 assume that the probabilities q qo q for permutations of length longer than k 1 k n 1 are already known we show that qo q and q can be pre calculated where now is a permutation of length k by 2 we know the value of q the probability qo can be obtained from qo k 1 j 1 q j since each j has length larger than that of the q probabilities can be determined from q max q qo 2 note that this it is not the most efficient way for computing the probabilities lemma 2 22 describes another way of computing the probabilities q qo of type i and type ii permutations of length k using the probabilities q qo q of type i and type ii permutations of length k 1 the probabilities q equal to 0 for prefixes that are neither type i nor type ii moreover we describe an optimal strategy in section 3 and show in section 4 how to find the maximum probability of winning through our optimal strategy using well defined recurrence relations recall that by 2 q can be written as a fraction with denominator sd and the numerator equal to the sum of c over all that are winnable next we show in proposition 2 11 that qo can be expressed in a similar manner proposition 2 11 let be a permutation of length 1 with n there is a collection of prefixed permutations a such that each a is of length larger than and positive and qo a q moreover the above expression is equivalent to qo sd a q sd and sd a sd 4 proof by 3 we know that qo q 1 q 2 q holds we now describe an algorithm that establishes the proof of the proposition initialization step let a and b 1 we repeat the main step below until the process terminates main step check if b if true then stop and return the set a if not then do the following pick a b say of length q with q n check if is both eligible and q qo holds if true then set a a and b b if not then do not update a and let b b q 1 j 1 j since the permutations of length n are positive the algorithm will terminate the main step of the algorithm will produce a set a of positive eligible permutations that are also minimal at the end of the process b is an empty set to see this we make the following two observations observation i there is no pair of elements a such that is a prefix of i e a contains minimal prefixes only since otherwise the forest t o will not be processed by the algorithm and it will be impossible for to be selected for inclusion in a observation ii since we choose a prefix only if it is positive and eligible every prefix in a is positive and eligible 5 1 12 21 132 123 231 213 312 321 1234 1342 2341 1243 1423 1432 2431 1324 3412 2413 2314 3421 2143 3142 3241 2134 4123 4132 4231 3124 4213 4312 4321 3214 figure 1 a prefix tree for the game of second best choice with four candidates therefore we can write a 1 r where each of the a has length larger than furthermore by the main step of the algorithm qo q 1 q 2 q r 5 moreover by 5 qo can be expressed as a fraction where the numerator is the sum of c over all prefixed permutations whose best candidate can be captured by an optimal strategy after rejecting the th candidate i e the collection of 1 winnable 2 winnable r winnable permutations in sn the denominator is the standard denominator i e prefixed sn c 2 in lemma 2 20 and 2 21 we show that the probabilities q qo of a prefix only depend on its length and the relative order of the last position in in lemma 2 22 we describe the relations between the probabilities q qo of a few relevant prefixes of consecutive lengths which are used to derive theorem 2 23 and 2 24 and describe the winning strategy for any prefix equivalent statistic definition 2 12 let t be the subtree rooted at i e the tree comprising and its children and let t o t be the subforest obtained by deleting from the graph t since the set of all prefixes n i 1 si also represents all possible positions in the game we follow the approach suggested in 14 for the secretary problem and make use of prefix trees which naturally capture relations between all prefixes of a permutation a prefix tree for the game of second best choice with n candidates is a partially ordered set defined on n i 1 si where if and only if is a prefix of see figure 1 for a prefix tree that represents the game with four candidates the following theorem establishes that there exists a valid strike set such that its corresponding strategy is optimal the algorithm described in the proof also suggests a way to compute the optimal probability of winning the postdoc game note that the optimal strategy may not be unique and that each optimal strategy corresponds to a valid strike set theorem 2 13 the maximum probability of correctly identifying the second best candidate equals a q a q sd a sd a q sd sn c where a is a valid strike set with all elements positive proof the maximum probability of winning equals q 1 where 1 is a permutation of length 1 by proposition 2 11 the theorem holds true 2 note that for a given valid strike set a its corresponding strategy is to accept the candidate if the permutation prefix up to that point belongs to a in the other direction given a strategy one can easily determine the corresponding strike set 6 1 12 21 132 123 231 213 312 321 1234 1342 2341 1243 1423 1432 2431 1324 3412 2413 2314 3421 2143 3142 3241 2134 4123 4132 4231 3124 4213 4312 4321 3214 6 24 8 24 4 12 4 12 2 12 4 12 2 4 1 4 1 4 1 4 0 4 1 4 1 4 1 4 2 4 1 4 0 4 1 4 0 1 0 1 0 1 0 1 0 1 0 1 1 1 0 1 1 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 1 1 0 1 0 1 0 1 0 1 0 1 1 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 1 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 1 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 figure 2 a prefix tree the q and qo probabilities for the game of second best choice with four candidates remark 2 14 in order to identify a strategy that maximizes the probability of winning we can actually choose to either include a permutation in the set a described in theorem 2 13 or exclude it when q qo this is also the reason why an optimal strategy may not be unique example 2 15 we execute the steps of the algorithm described in proposition 2 11 to find an optimal strategy and maximum probability of winning i e q 1 when n 4 and 1 we write the probabilities q qo for each prefix 4 i 1 si see figure 2 the probability of winning is q 1 824 which is obtained for the strike set a 12 213 312 4213 boxed in figure 2 the strategy is pick the first left to right maximum after position 1 or the first left to right second maximum after position 2 whichever comes first if no decisions are made before the last position accept the corresponding candidate observe that there is more than one optimum strategy when 1 another optimum strategy is to reject the first two candidates and then accept the first second maximum thereafter the corresponding strike set is circled in figure 2 1 we first compare q 1 with qo 1 since qo 1 824 6 24 q 1 let a and b 12 21 2 since q 12 412 4 12 q o 12 we have a 12 and b 21 next we compare q 21 with qo 21 and obtain a 12 and b 213 312 321 3 we compare the prefixes in b at the end of step 3 we obtain a 12 213 312 and b 3214 4213 4312 4321 4 we once more compare the prefixes inb the final lists area 12 213 312 4213 3214 4312 4321 and b definition 2 16 let 12 k and let g be a permutation operator that rearranges the elements in the permutation to produce another permutation of length k we extend the action of this operator to t say t by similarly permuting the first k entries and fixing the last m k entries of where m is the length of t note that the operator g is a bijection from t to t example 2 17 let n 6 132 and 245361 clearly is 123 prefixed and g 254361 definition 2 18 a statistic c is prefix equivalent if it satisfies c c g c 12 k c for all prefixes and all t 12 k where k is the length of intuitively the condition c c g c 12 k c requires the statistic c to have the property that permuting the first k entries does not create or remove any structure that is counted by the statistic c and which lies beyond entry k the condition ensures many useful properties for the probabilities q qo q including invariance under local changes say permuting the elements in a prefix prefix equivalence will be used intensively in the proofs of the theorems and lemmas to follow in this section before proceeding with the description of the more complicated results we prove in lemma 2 19 that the kendall statistic is prefix equivalent 7 lemma 2 19 the kendall statistic is prefix equivalent proof note that the kendall statistic counts the number of inversions in a permutation permuting the first k entries will not influence any inversion involving elements in positions in k 1 n and an inversion between an entry at a position at most k and another entry in a position following k remains an inversion as the relative order of the two sets of elements is unchanged 2 in lemma 2 20 we prove that the probabilities q of permutations only depend on the length of the permutations and the value seen at their last position see figure 2 for an example lemma 2 20 let c be a prefix equivalent statistic including the kendall statistic 1 for all prefixes of length k the q probabilities are preserved under the restricted bijection g t o 12 k t o 2 if is type i eligible then q 12 k q 3 if is type ii eligible then q 12 k 2 k k 1 q proof 1 let be a prefix of length k and let t o 12 k be of length m then since c c g c 12 k c for all t o 12 k we have q g g winnable sn c g prefixed sn c winnable sn c g prefixed sn c g 6 winnable sn c prefixed sn c c c 12 k c c 12 k q 2 let be a type i eligible prefix of the same length as applying 1 of this theorem to 12 k 1 and the prefix k 1 of produces the claimed result 3 let be a type ii eligible prefix of the same length as applying 1 of this theorem to 12 k 1 and the prefix k 1 of produces the claimed result 2 in lemma 2 21 we prove that the probabilities qo only depend on the length of the underlying permu tations and do not depend on the value at the last position see figure 2 for an example lemma 2 21 the following claims hold true for a prefix of length k in claim 1 2 and 3 1 for t o 12 k the probabilities qo are preserved by g 2 for t o 12 k the probabilities q are preserved by g 3 one has qo 12 k qo if is of type i then q 12 k 1 k q if is of type ii then q 12 k 2 k k 1 q 4 if 1 and 2 are permutations with the same length then qo 1 qo 2 and their q q probabilities are equal provided that they agree in the last position proof the proofs of the claims in the lemma follow from straightforward algebraic manipulations 1 if has length n then qo 0 qo g since every permutation of length n has the qo probability equal to 0 thus we may assume that has length less than n we prove the statement by induction on the length of assume the statement works for all t o 12 k of length at least m 1 where k 1 m n 1 and we will show the statement for of length m by proposition 2 11 we know the probability qo is a sum of q probabilities say qo q r 1 q r 2 q rn 8 for some prefixes ri of length at least 1 m 1 for each t o we know by induction hypothesis that qo qo g by lemma 2 20 we know q q g as well thus for the algorithm described in proposition 2 11 if we process and end up obtaining the set a r 1 rn then when we process g we will end up obtaining the set a g r 1 g rn therefore qo g q g r 1 q g r 2 q g rn 7 c c 12 k c c 12 k q r 1 c c 12 k c c 12 k q r 2 c c 12 k c c 12 k q rn qo 2 the result follows from 1 lemma 2 20 and q max qo q 3 let i be 12 k prefixed and of length k 1 such that the last position has relative value i where 1 i k 1 similarly let i be prefixed and of length k 1 such that the last position has relative value i where 1 i k 1 by 2 q i q i for 1 i k 1 therefore qo 12 k k 1 i 1 q i k 1 i 1 q i qo this establishes the correctness of the first part of the claim from q max qo q lemma 2 20 and the first part of statement 3 we know the second and third part of 3 hold true as well 4 qo 1 qo 2 follows from 3 now assume that 1 2 q and that the last position of 1 and 2 takes the value x where 1 x q let q q 1 and let t o 12 q be such that q and that the last position of equals x applying 1 of lemma 2 20 to the q th prefix of 1 2 we obtain q 1 q q 2 and thus q 1 q 2 2 for the prefixes 12 k 1 and 12 k 3 k 1 k 2 recall by definition 2 8 we have k 12 k 1 2 k 1 i 1 i 1 i 1 ki k 12 k 3 k 1 k 2 k k 1 12 k 3 k k 2 k 1 k 2 12 k 3 k k 1 k 2 1 2 k 1 i 1 i 1 i 1 k 2 k k 1 i with a slight abuse of notation that leads to simplified expressions for probabilities of interest we henceforth let q qo and q each stand for the numerators in their corresponding definitions where the denominator is self understood to be prefixed sn c and henceforth referred to as the standard denominator in subsequent proofs confined to this section we omit the denominator whenever it agrees for all quantities of interest in 8 and 9 of the lemma to follow we express the probabilities qo and q of a type i prefix of length k 1 via the probabilities qo q and q of a type i prefix k of length k and a type ii prefix k 1 of length k similarly we express the probabilities qo and q of a type ii prefix of length k 1 via the probabilities qo q and q of a type i prefix k of length k and a type ii prefix k 1 of length k lemma 2 22 we have qo q k q k 1 qo k k 2 i 1 c i c k 8 q q k k 1 i 1 c i c k c k c k 1 q k 1 9 qo q k c k c k q k 1 c k 1 c k 1 qo k 1 k 2 i 1 c i c k 1 10 and q q k 1 k 2 i 1 c i c k 1 11 9 proof there are k children of in the prefix tree namely 1 k and k children of in the prefix tree namely 1 k the prefixes k and k 1 are eligible so q k and q k 1 are the optimal probabilities for the subtrees rooted at k and k 1 respectively the subtrees under each of the other k 2 children of are isomorphic to the subtree under k via the bijection g i a sn in t o k wins if and only if g i which is in t o i wins the game moreover for each sn that wins under qo k we have c g i c c i c k since c is a prefix equivalent statistic as it is impossible for 1 k 2 to win for 8 we have qo q 1 q k qo 1 qo k 2 q k 1 q k q k q k 1 qo k k 2 i 1 c i c k for 9 note that a winnable permutation can be i prefixed 1 i k a i prefixed winnable permutation where 1 i k 1 can arise by applying g i i 1 k 1 to a k winnable permutation in words g 1 i where g 1 i is the inverse action of g i this has an effect of placing the valuen 1 originally at position k of a k winnable permutation into position k 1 moreover a winnable permutation can also be a k prefixed permutation which has n at position k and n 1 at position k 1 it can arise from a k 1 winnable permutation which has n 1 at position k and so must have n at position k 1 by applying g 1 k 1 the inverse action of g k 1 to convert the prefix k 1 into the prefix k therefore q q k k 1 i 1 c i c k c k c k 1 q k 1 for 10 similarly to the analysis performed for 8 we have qo q k q k 1 qo k 2 qo 1 q k q k 1 qo k 1 k 2 i 1 c i c k 1 q k c k c k q k 1 c k 1 c k 1 qo k 1 k 2 i 1 c i c k 1 for 11 similarly to the analysis for 9 and based on the fact that we know that no k and k 1 prefixed permutation can be winnable as the value in the k 1 th position is already smaller than the value in two positions i e k 2 and k we have q q k 1 k 2 i 1 c i c k 1 this completes the proof 2 theorem 2 23 for any type ii prefixes and with 1 k 1 we have that if is negative then is negative proof let 1 k 3 k 1 k 2 and 1 k 2 k k 1 suppose that is negative so that qo q then by lemma 2 22 we have qo q k c k c k q k 1 c k 1 c k 1 qo k 1 k 2 i 1 c i c k 1 q k c k c k qo k 1 k 1 i 1 c i c k 1 q k c k c k q k 1 k 1 i 1 c i c k 1 q 10 the same conclusion is valid for every pair of type ii prefixes and with 1 k 1 since qo qo c c q c c q 2 theorem 2 24 let and be type i prefixes with 1 k 1 let qo k 1 q k 1 where k 1 is a type ii prefix of length k then if is negative then is negative proof let 1 k 1 and 1 k suppose that is negative so that qo q then by lemma 2 22 we have qo q q k q k 1 qo k k 2 i 1 c i c k q k k 1 i 1 c i c k q k 1 c k c k 1 q k q k 1 q k c k 1 c k q k 1 c k c k 1 qo k q k k 2 i 1 c i c k q k q k 1 q k c k 1 c k q k 1 c k c k 1 q k q k 1 c k c k 1 where the last inequality holds since q k 1 qo k 1 qo k c k 1 c k q k c k 1 c k since qo k 1 q k 1 we have q k q k 1 c k c k 1 qo k q k 1 c k c k 1 qo k 1 q k 1 c k c k 1 0 the same conclusion holds for every pair of type i prefixes and with 1 k 1 since qo qo c c q c c q 2 3 winning strategies under the mallows model henceforth we use k 6 to denote that there exists a constant c 0 such that k c we simplify our notation as follows qoi k will henceforth denote the numerator of the probability q over the standard denominator for type i prefixes of length k where i 2 similarly qoi k will denote the numerator of the probability qo over the standard denominator for type i prefixes of length k where i 2 using this notation in lemma 2 22 we have qo 1 k 1 q o q 1 k 1 q qo 2 k 1 q o q 2 k 1 q since c k 0 c i k i and c i k 1 i the results of lemma 2 22 reduce to qo 1 k 1 q 1 k q 2 k q o 1 k k 1 k 2 2 12 q 1 k 1 q 1 k k 1 k 2 1 q 2 k 13 qo 2 k 1 q 1 k q 2 k q o 2 k k 1 k 2 2 14 q 2 k 1 q 2 k k 1 k 2 2 15 where qoi n 0 q 1 n q 2 n q o 2 k qo 1 k and every value taken by q qo q is nonnegative in this section we will assume by default that 1 unless stated otherwise 11 definition 3 1 let pn henceforth written as pn to avoid notational clutter be the polynomial in equal to 1 2 n 1 furthermore let pn be the polynomial in equal to pn pn pn 1 p 1 claim 3 2 one has q 2 k 2 n 2 k 1 pn 2 pk 2 proof since 15 can be written as q 2 k 1 q 2 k 2 pk 2 and we know that q 2 n we can solve the recurrence relation details are omitted to obtain the claimed formula 2 claim 3 3 one has q 1 k n k 1 pn k pn 2 pk 1 where q 1 n 0 proof by claim 3 2 and 13 it holds q 1 k 1 q 1 k pk 1 1 q 2 k solving the recurrence details are omitted proves the claim 2 using claim 3 2 and 3 3 we arrive at q 2 k q 1 k n k 2 pk 1 pn k n k 2 k 1 1 n k 1 2 k 1 1 1 1 n k 16 since we are interested in asymptotic strategies we assume throughout this section that n our main results are derived in subsections 3 1 and 3 2 these are followed by a discussion of general optimal strategies without specific thresholds in subsection 3 3 the precise optimal strategies with specific thresholds and the optimal probabilities are presented in section 4 3 1 the case 1 and 1 theorem 3 4 let 2 k n if qo 1 k q 1 k then qo 1 k 1 q 1 k 1 proof let f k q 1 k q 2 k q 1 k 1 q 2 k case a k since 1 1 1 1 n k 1 it holds that 16 moreover since qo 1 k q 1 k 1 is a constant 16 and 12 and 13 hold true we have qo 1 k 1 q 1 k 1 f k q o 1 k q 1 k 2 k 1 f k 1 q 1 k 1 1 q 2 k 0 the second inequality holds since q 1 k q 1 k and q 2 k q 2 k case b k 6 then 16 2 k 1 1 and by 1 and k 2 we have k 1 1 1 17 case b 1 q 2 k q 1 k since qo 1 k q 1 k we have qo 2 k qo 1 k q 1 k thus qo 1 k 1 q 1 k 1 f k q o 1 k q 1 k 2 k 1 f k q 1 k qo 2 k q 1 k 1 q 2 k q 1 k q 1 k q 1 k 1 q 2 k q 1 k 1 q 2 k 0 12 the second inequality holds since q 1 k q 1 k and q 2 k qo 2 k while the third and fourth inequality follow from the first line of case b 1 case b 2 q 2 k q 1 k therefore by q 2 k q 1 k 2 k 1 1 and from 17 and 1 qo 1 k 1 q 1 k 1 f k q 1 k q 2 k q 1 k 1 q 2 k q 1 k k 1 1 2 q 1 k q 1 k k 1 1 q 1 k 1 k 1 2 k q 1 k k 1 1 q 1 k 0 2 remark 3 5 for 1 by taking the difference of 12 and 13 we have qo 1 k 1 q 1 k 1 q 1 k q 1 k q 2 k q 2 k q o 1 k q 1 k k 2 since q 1 n qo 1 n 0 and q 2 n 0 qo 2 n qo 1 k q 1 k remains zero until the inequality q 2 k qo 2 k starts to hold more precisely by theorem 2 24 if k 2 is the largest index such that q 2 k 2 qo 2 k 2 then the largest index k 1 such that q 1 k 1 qo 1 k 1 equals k 2 1 3 2 the case 1 3 2 1 the subcase 0 1 2 since the type ii prefixes of length at most n 1 are negative we only need to consider type i prefixes by theorem 2 24 there exists a threshold k 1 for negative type i prefixes and positive type i prefixes 3 2 2 the subcase 1 2 1 theorem 3 6 let and be type i prefixes with 1 k 1 let n k then if is negative then is negative proof let n and f k q 1 k q 2 k q 1 k 1 q 2 k by claim 3 2 and claim 3 3 q 1 k q 2 k 1 2 1 n k pn k pk 1 1 2 1 n k 1 n k 1 k 1 18 moreover since is type i negative one has qo 1 k q 1 k by noting that 1 2 1 is a constant that q 1 k q 1 k q 2 k q 2 k and from 18 we obtain qo 1 k 1 q 1 k 1 f k q o 1 k q 1 k 2 k 1 f k 1 q 1 k 1 1 q 2 k 0 2 theorem 3 7 let and be a type i prefix and a type ii prefix of length k respectively let 1 2 1 and n k 6 for k n if is strictly positive then is strictly positive proof the proof is postponed to the appendix section 5 2 since q 2 n 0 qo 2 n type ii prefixes of length n are strictly positive by theorem 2 23 there is a threshold k 2 such that all type ii prefixes of length at most k 2 are negative and all type ii prefixes of length at least k 2 1 are positive by theorem 3 6 3 7 and 2 24 we know that there is another threshold k 1 k 2 such that all type i prefixes of length at most k 1 are negative and all type i prefixes of length at least k 1 1 are positive 13 remark 3 8 we separately discuss the case 12 by 26 27 28 and 29 we have that when n the standard numerators satisfy qo 1 n 0 q 1 n 0 q o 2 n 0 q 2 n 1 2 qo 1 n 1 1 2 q 1 n 1 1 q o 2 n 1 1 4 q 2 n 1 1 4 qo 1 n 2 3 2 q 1 n 2 3 2 q o 2 n 2 3 4 q 2 n 2 1 8 qo 1 n 3 3 q 1 n 3 7 4 q o 2 n 3 3 2 q 2 n 3 1 16 therefore by theorem 2 23 we know that type ii prefixes of length at most n 2 are negative that we can be indifferent i e either reject or accept to type ii prefixes of length n 1 that type ii prefixes of length n are strictly positive that by theorem 2 24 we know that type i prefixes of length at most n 3 are negative that we can be indifferent i e either reject or accept to type i prefixes of length n 2 that type i prefixes of length n 1 are strictly positive and that we can be indifferent to type i prefixes of length n 3 3 optimal strategies let 12 n 1 and 12 n 3 n 1 n 2 recall by definition 2 8 we can define i and i where 1 i n furthermore unlike in section 2 and previous subsections in section 3 we now use q qo q to denote the original probabilities and not only their numerators corresponding to the standard denominator we describe an optimal strategy for each 0 and n next note that c n 0 c n 1 1 c i n i for i 1 n 2 we compare q c n c 1 c 2 c n 1 n 1 n 2 1 19 and qo c n 1 c 1 c 2 c n n 1 n 2 1 20 as well as q c 1 c 2 c n 2 c 1 c 2 c n n n 1 3 n n 1 3 2 21 and qo c n 1 c 1 c 2 c n 2 n n 1 3 2 22 results from subsections 3 1 and 3 2 allow us to determine the winning strategies based on the proba bilities qo q qo and q note that the results in theorems 2 24 2 23 3 4 3 6 and 3 7 still hold for the probabilities qo q as the prefixes are of the same length and the standard denominator is positive case 1 1 by 19 20 21 and 22 we have that q qo and q qo all the type i prefixes of length at most n 1 are negative by theorem 3 4 and furthermore q n q o n 0 thus we only need to consider type ii prefixes by theorem 2 23 the goal is to solve for k 2 such that all the type ii prefixes of length k 2 are negative and all the type ii prefixes of length greater than k 2 are positive thus the optimal strategy in this case is to reject the first k 2 candidates where 0 k 2 n 1 and then accept the next left to right second maximum thereafter the precise parameter values are described in section 4 1 case 2 1 by 19 20 21 and 22 we have q qo and q qo by remark 3 5 and theorem 2 24 we need to determine a k 1 and a k 2 such that k 1 k 2 1 the optimal strategy is to reject the first k 1 candidates then be indifferent either accept or reject to any left to right maximum thereafter and reject the k 1 1 th candidate if it is not a left to right maximum and then accept the next left to right second maximum the precise parameter values are described in remark 4 12 at the end of section 4 1 14 case 3 0 1 by 19 and 20 we have q qo by 21 and 22 we only need to compare the numerators of q and qo i e n n 1 3 and 2 case 3 1 0 12 then q qo and q n 1 q o n 1 by theorem 2 23 all type ii prefixes of length at most n 1 are negative even though type ii prefixes of length n are positive the best strategy is to only consider type i prefixes and accept the last candidate no matter what i e the best strategy is to reject the first k 1 candidates and then accept the next left to right maximum if no selection is made before the last candidate the latter is accepted the precise parameter settings are stated section 4 2 case 3 2 12 by remark 3 8 the optimal strategy is to 1 reject all but the last three candidates 2 if the third last candidate is a left to right maximum we can either accept or reject him her otherwise we reject this candidate 3 if the second last candidate is a left to right maximum then we accept him her or if the second last candidate is a left to right second maximum then we can either decide to accept or reject otherwise we reject this candidate 4 if the last candidate is a left to right second maximum we accept him her otherwise we can either accept or reject the candidate case 3 3 12 1 when n we have q qo by theorem 2 23 there is a 0 k 2 n 2 such that every type ii prefix of length at most k 2 is negative and every type ii prefix of length longer than k 2 is positive we then have two cases to consider we show that case 3 3 1 is impossible and then focus on case 3 3 2 case 3 3 1 n k 2 6 since all type ii prefixes with length such that n 6 are positive we know by theorem 3 7 that every type i prefix of length with n 6 is also positive suppose now that n by theorem 3 6 there exists a k 1 0 with n k 1 such that every type i prefix of length at most k 1 is negative and every type i prefix of length longer than k 1 is positive in this case the optimal strategy is a k 1 k 2 strategy where k 1 k 2 or a k 2 k 1 strategy where k 2 k 1 in other words for a fixed 12 1 there exists a pair of numbers k 1 k 2 such that the optimal strategy under the assumption for this case is either 1 reject the first k 1 candidates and then accept the next left to right maximum thereafter or reject the first k 2 k 1 candidates and then accept the next left to right second maximum thereafter whichever appears first or 2 reject the first k 2 candidates and then accept the next left to right second maximum thereafter or reject the first k 1 k 2 candidates and then accept the next left to right maximum thereafter whichever appears first however we show in section 4 3 that the optimal strategy among all k 1 k 2 strategies and k 2 k 1 strategies always arises when n k 1 6 and n k 2 6 which implies that case 3 3 1 is impossible case 3 3 2 n k 2 then by theorem 3 7 every type i prefix of length longer than k 2 is positive furthermore by theorem 2 24 since every type ii prefix of length at most k 2 is negative we conclude that there exists a 0 k 1 k 2 n 2 such that every type i prefix of length at most k 1 is negative and every type i prefix of length larger than k 1 is positive therefore the optimal strategy is the k 1 k 2 strategy i e we reject the first k 1 candidates and then accept the next left to right maximum thereafter or reject the first k 2 k 1 candidates and then accept the next left to right second maximum thereafter whichever appears first the precise parameter settings are described in section 4 3 4 precise parameter settings for the mallows model the following result is well known and also proved in 14 lemma 4 1 lemma 6 2 in 14 18 we have pn sn inversions in for the set 1 n m an ordered 2 partition of the values into two parts 1 and 2 with 1 n and 2 m is a partition where all values in 1 are ahead of all values of 2 while the internal order of 1 15 and 2 is irrelevant we define b n m all 1 2 ordered partition of n m crossing inversions of 1 2 where a crossing inversion with respect to 1 2 is an inversions of the form a b where a 1 and b 2 lemma 4 2 the numbers b n m satisfy b n m b n 1 m m b n m 1 23 and b n m b n 1 m b n m 1 n 24 with the initial conditions set as b 0 x 1 and b x 0 1 proof to establish the first recurrence relation we need to consider two separate cases according to the value n m case 1 n m 1 then we delete n m from 1 and arrive at a partition of n m 1 elements into subsets of size n 1 and m the value n m contributes m to each partition 1 2 thus it overall contributes m b n 1 m to the term b n m case 2 n m 2 then we delete n m from 2 and arrive at a partition of n m 1 elements into subsets of size n and m 1 the value n m does not feature in the multiplier and the contribution to b n m is b n m 1 similarly we can consider in which part the element 1 lies in and obtain the second recurrence relation the initial conditions are obvious since one part is empty 2 when 1 we have b n m b n 1 m b n m 1 a straightforward induction argument can be used to prove that b n m n m n it turns out one can also solve the above recurrence relations even when 1 lemma 4 3 for 1 n m 1 b n m 1 n m 1 n m 1 1 n 1 1 m 1 m 1 1 and b n 0 b 0 m 1 proof we subtract from both sides in 23 m 24 to obtain 1 m b n m 1 n m b n m 1 since we know that b n 1 1 n 1 1 the claimed result follows 2 note that b n m pn m pn 2 pn 1 pm p 2 p 1 pn m pn 16 4 1 precise results for case 1 and case 2 from section 3 3 in section 4 1 we use the term k pickable permutation to describe a permutation which results in a pick using the strategy that rejects the first k candidates and then accepts the next left to right second maximum we also use the term non k pickable permutation to refer to a permutation which is not k pickable define p 1 p 0 0 and 0 1 let t 2 n k non k pickable permutation sn inversions in lemma 4 4 for n k 1 and k 1 t 2 n k 2 n 2 k pk pk 1 pn 2 n i k 1 2 n 2 i b i 2 n i t 2 i 1 k pn i where t 2 k k pk since no permutation in sk is k pickable proof we have to consider two cases depending on the value n for this purpose let sn case 1 n is at a position within 1 k then is not k pickable if and only if the value n 1 is also at a position in 1 k the remaining values form an arbitrary permutation thus this case contributes 2 n 2 k pk pk 1 pn 2 n 1 n k n 2 n k pn 2 to t 2 n k case 2 n is at a position within i k 1 n then n 1 must be located before position i and the positions 1 i 1 must form a non k pickable permutation thus the contribution of this case to t 2 n k may be computed as follows the value n 1 gives a factor of n i for inversions with values in positions i 1 n while the remaining values in positions 1 i 1 and i 1 n form a partition 1 2 of the values 1 n 2 and thus contribute a factor of b i 2 n i to this case the values in positions 1 i 1 form a non k pickable permutation and thus contribute t 2 i 1 k there is no restriction on the values positioned in i 1 n and these contribute pn i moreover the value n contributes n i in conclusion the total contribution from this case for k 1 i n equals n i k 1 n i b i 2 n i t 2 i 1 k pn i n i 2 remark 4 5 when k 0 we have t 2 2 0 t 2 1 0 1 and t 2 n 0 n i 2 2 n i pn 2 pi 2 t 2 i 1 0 we can solve the recurrence relation in lemma 4 4 in closed form lemma 4 6 we have t 2 k k pk for n k 1 and k 1 t 2 n k pk 1 2 pk 1 1 2 pk 1 2 pn 2 25 proof we know from lemma 4 4 that t 2 k k pk we assume the argument is valid for at most n 1 and then prove it for n again by lemma 4 4 we know t 2 n k 2 n 2 k pk pk 1 pn 2 n i k 1 2 n 2 i b i 2 n i t 2 i 1 k pn i 17 2 n 2 k pk pk 1 pn 2 2 n 2 k 2 pn 2 pk 1 pk 2 n 2 k 4 pn 2 pk pk 1 2 pk 1 2 pn 2 pn 3 pk 1 2 pk 1 1 2 pk 1 2 pn 4 pk 1 2 pk 1 1 2 pk 1 2 pn 3 note that if we add the terms one by one then the first j terms we arrive at are 2 n 2 k 2 j 1 pn 2 pk 3 j pk 1 pk 1 2 1 pk 3 j 2 hence we obtain pk 1 pk 1 2 1 pk 2 1 pn 2 2 2 remark 4 7 for k 0 and n 3 we can solve by remark 4 5 that t 2 n 0 1 2 1 2 p 2 1 2 pn 2 which agrees with the formula obtained by plugging in k 0 to 25 next we introduce the notion of a k winnable permutation corresponding to a permutation such that the global second best candidate n 1 can be identified using the positional strategy that rejects the first k candidates and accepts the next left to right second maximum thereafter to this end we define w 2 n k k winnable sn inversions in theorem 4 8 one has w 2 n k 2 pn 2 w 2 n 1 k t 2 n 1 k with the initial condition w 2 k 1 k pk proof if the last position has the value n then the permutation cannot be k winnable as the value n 1 is never going to be picked as a left to right second maximum thus we have two possible scenarios for a k winnable permutation sn case 1 the last position contains one of the values i 1 2 n 2 then it contributes n i to the inversion count and we may view the remaining values as some k winnable sn 1 these contribute w 2 n 1 k n 1 n 2 2 2 pn 2 w 2 n 1 k to w 2 n k case 2 the last position is n 1 then the first n 1 positions form a non k pickable permutation the value n 1 at the position n contributes the initial condition holds because when there are in total k 1 positions then the k 1 th position must be k and the elements in positions 1 k can represent any permutation in sk 2 theorem 4 9 for k 1 we have w 2 n k t 2 n k 2 n 2 k 1 pn 2 pk pk 1 pk 1 2 pn 2 1 2 pn 3 1 2 pk 1 2 pk 1 2 n 2 k pn 2 pn 3 pk 1 proof by theorem 4 8 we have the recurrence relation for w 2 n k relation 1 w 2 n 1 k relation 2 w 2 k 2 k relation n k 1 then we multiply relation 1 with 1 relation 2 with 2 pn 2 relation j with 2 j 2 pn 2 pn 3 pn j j 3 n k 1 then we add those equations and use the initial condition w 2 k 1 k pk to obtain the desired formula 2 18 figure 3 probability of winning using the optimal strategy for a mallows distribution with 1 remark 4 10 for k 0 we have w 2 n 0 t 2 n 0 since the strategy of rejecting no candidate in the beginning and then accepting the next left to right second maximum is the same as rejecting the first candidate and then accepting the next left to right second maximum the case when k 0 is going to be included in the case when k 1 theorem 4 11 when 1 and n the optimal strategy is to reject the first j k candidates where k is a function of that does not depend on n and then select the next left to right second maximum thereafter numerical results for k are provided after the proof proof by simplifying the result of theorem 4 9 we have w 2 n k pn 1 1 n 1 1 1 n 1 1 1 1 k 1 1 2 n 2 k 1 k 1 k 1 1 n 1 n 1 1 case 1 k n then since 1 both the first and second term converge to thus the limit is 0 case 2 k 6 n then the second term converges to 1 1 k 1 1 k 1 the first term converges since j k 1 1 1 j 1 converges if and only if j k 1 1 j 1 converges the latter converges because of the integral test thus the optimal asymptotic probability will occur for some fixed k 2 although the infinite product always converges finding an explicit formula for the probability is hard thus we instead provide some numerical results in table 1 figure 3 and table 1 show the optimal success probabilities for various values of 1 the maximum winning probability converges to 0 25 as 1 which matches the well known result for the optimal probability 0 25 when 1 note that k 1 is optimal for 1 892 approximately k 2 is optimal for 1 385 1 891 approximately and k 3 is optimal for 1 247 1 384 approximately the winning probability is increasing and converging to 1 as increases when k 1 is the optimal the winning probability is maximized at p 1 81 0 340203 when k 2 is optimal the winning probability is maximized at p 1 37 0 298144 when k 3 is optimal see figure 4 19 reject first k max probability k max prob 1 01 69 0 25154698 1 6 2 0 33261548 1 02 35 0 25304761 1 7 2 0 33832874 1 03 24 0 25456399 1 8 2 0 34018156 1 04 18 0 25609089 1 9 1 0 34138762 1 05 15 0 25746213 2 1 0 36219565 1 06 12 0 25906545 3 1 0 51401101 1 07 11 0 26037841 4 1 0 6075226 1 08 9 0 26193451 5 1 0 67111688 1 09 8 0 26332955 6 1 0 71712202 1 10 8 0 26468079 7 1 0 75191395 1 2 4 0 27951623 8 1 0 77912838 1 3 3 0 29385177 9 1 0 80098779 1 4 2 0 30199267 10 1 0 81892569 1 5 2 0 32134993 table 1 maximum probabilities and optimal strategies for 1 figure 4 probability of winning for 1 when we use the strategy of rejecting the first k candidates and then accepting the next second maximum thereafter where k 1 2 and 3 intuitively we have that the mallows distribution becomes highly concentrated around the permutation n n 1 21 when increases and thus rejecting the first candidate and accepting the next left to right second maximum will capture the value n 1 most of the times the probability tends to 1 as however for k 2 and k 3 since the distribution concentrates around the permutation n n 1 21 as rejecting the first two or three candidates respectively and then accepting the next left to right second maximum is increasingly unlikely to capture the value n 1 remark 4 12 when 1 for k 1 we have by theorem 4 9 w 2 n k n k n k k 1 n n 1 k n k n n 1 and 1 n for k 0 therefore the maximum probability of winning is n 2 4 n n 1 1 4 and is realized at k n 2 the optimal strategy is to 1 reject the first n 2 1 candidates 2 accept or reject the n 2 th candidate if it is a left to right maximum reject this candidate otherwise 3 for a candidate j n 2 we either accept him her if the candidate is a left to right second maximum or we accept or reject the candidate if he she is a left to right maximum otherwise we reject the candidate 20 4 2 precise result for case 3 1 and case 3 2 unlike in the previous section in section 4 2 we use the term k pickable permutation for a permutation that corresponds to a strategy that rejects the first k candidates and then accepts the next left to right maximum and results in one pick we also use the term non k pickable permutation to describe a permutation which is not k pickable let t 1 n k non k pickable permutation sn inversions in lemma 4 13 we have t 1 n 0 0 and for k 1 t 1 n k n 1 n k pn 1 proof let sn be non k pickable if the value n is positioned in k 1 n then we must have one pick thus the value n is positioned in 1 k and the other positions can be viewed as an arbitrary permutation if the value n is at position i 1 k it contributes n i and the remaining terms contribute pn 1 2 in this subsection by a k winnable permutation we mean a permutation such that the global second best candidate n 1 can be identified using the positional strategy that rejects the first k candidates and accepts the next left to right maximum thereafter we define w 1 n k k winnable sn inversions in remark 4 14 when k 0 the strategy is to accept the first candidate thus we win if and only if the value n 1 appears first since the value n 1 contributes n 2 to w 1 n k and the remaining positions can be viewed as an arbitrary permutation in sn 1 the probability of winning is w 1 n 0 pn n 2 pn 1 pn 1 n 2 1 n 0 as n theorem 4 15 for k 1 w 1 n k 2 pn 2 w 1 n 1 k n 1 i k 1 n i 1 t 1 i 1 k b i 1 n i 1 pn i 1 with initial condition w 1 k 1 k 0 and w 1 k 2 k pk proof if the value in the last position is n 1 then the permutation cannot be k winnable as n appears before n 1 and the value n 1 is never going to be picked as a left to right maximum thus we have to consider two cases for a k winnable permutation sn case 1 the last position in is one of the values i 1 2 n 2 this contributes n i to the inversion count and we may view the remaining entries as some k winnable sn 1 these contribute w 1 n 1 k n 1 n 2 2 2 pn 2 w 1 n 1 k to w 1 n k case 2 the entry in the last position of is n the value n 1 must therefore be in positions k 1 n 1 say i then the entries in positions 1 i 1 form a non k pickable permutation and there is no restrictions on the values in positions i 1 n 1 therefore when n 1 is at position i k 1 n 1 t 1 i 1 k counts inversions in positions 1 i 1 b i 1 n i 1 counts the inversion in between pn i 1 counts the inversions for positions i 1 n 1 and n i 1 counts the inversions created by the value n 1 and values at positions in i 1 n 1 when there are k 1 values it is impossible to win using the strategy that rejects the first k positions and accepts the next left to right maximum when there are k 2 values the only case when we can win by rejecting the first k positions and accepting the next left to right maximum is when the value in the k 1 th position is n 1 k 1 and the value in the kth position is n k 2 while the remaining positions capture an arbitrary permutation in sk 2 21 figure 5 probability of winning using the optimal strategy for a mallows distribution with 0 12 the above recurrence relation can be solved for and the closed form expression is presented in the result below theorem 4 16 for n k 2 w 1 n k pn 2 n k 2 1 n k 1 1 1 n k 2 1 1 k 1 k 1 1 n k 3 1 1 k 1 k 2 1 2 1 1 k 1 n 3 1 1 1 k 1 n 2 and w 1 k 1 k 0 and w 1 k 2 k pk proof we first evaluate the sum in the recurrence relation of theorem 4 15 we have f n n 1 i k 1 n i 1 t 1 i 1 k b i 1 n i 1 pn i 1 n 1 i k 1 n i 1 t 1 i 1 k pn 2 pi 1 n k 2 pk pn 2 pk n k 3 pk pk pn 2 pk 1 n k 4 2 pk pk 1 pn 2 pk 2 n k 2 pk pn 3 pn 2 pn 2 n k 2 pn 2 1 pk pk 1 pk pk 2 pk pn 2 similarly to what was done in the proof in theorem 4 9 we can obtain the stated result after some simplification 2 the game winning probability of our strategy is then w 1 n k plus the probability that no selection was made before the last position and n 1 appears at the last position which is w 1 n k w 1 n k t 1 n 1 k where k n 1 theorem 4 17 when 0 12 the optimal strategy as n tends to infinity is to reject all but the last two candidates and then accept the next left to right maximum and if no selection is made before the last position then accept the last position the maximum probability of winning is 1 1 2 see figure 5 proof the proof is postponed to the appendix section 5 2 22 4 3 precise result for case 3 3 by case 3 3 described in section 3 3 we know that the optimal strategy is a k 1 k 2 strategy or a k 2 k 1 strategy such that 0 k 1 k 2 n 2 we show in this subsection that n k 1 6 and n k 2 6 for both strategies by theorem 3 7 we know k 1 k 2 and thus only case 3 3 2 in section 3 3 can occur we call a permutation sn k 1 k 2 winnable if it results in a win using the k 1 k 2 strategy i e by rejecting the first k 1 candidates then accept the next left to right maximum thereafter or rejecting the first k 2 candidates then accept the next left to right second maximum thereafter whichever appears first let w 1 n k 1 k 2 stand for k 1 k 2 winnable permutations sn inversions in throughout this section we call a permutation sn k 1 k 2 pickable if it results in one selection using the k 1 k 2 strategy let t 1 n k 1 k 2 stand for non k 1 k 2 pickable permutations sn inversions in recall that we know t 1 n 0 0 and for k 1 1 n k 1 t 1 n k 1 n 1 n k 1 pn 1 n k 1 pk 1 pn 1 lemma 4 18 for n k 2 t 1 n k 1 k 2 2 n k 1 k 2 pk 1 pk 2 1 pn 2 proof let sn be non k 1 k 2 pickable then the value n must be positioned in 1 k 1 and the value n 1 must be positioned in 1 k 2 there are no restrictions on the other values thus we have t 1 n k 1 k 2 n 1 n k 1 n 2 n 3 n k 2 pn 2 2 n k 1 k 2 pk 1 pk 2 1 pn 2 2 theorem 4 19 for k 1 k 2 n 2 w 1 n k 1 k 2 2 pn 2 w 1 n 1 k 1 k 2 t 1 n 1 k 1 k 2 k 2 1 i k 1 1 n i 1 t 1 i 1 k 1 b i 1 n i 1 pn i 1 n 1 i k 2 2 n i 1 t 1 i 1 k 1 k 2 b i 1 n i 1 pn i 1 proof the proof is postponed to the appendix section 5 2 we can solve the recurrence relation in theorem 4 19 as described in the result to follow theorem 4 20 for k 1 k 2 n 3 w 1 n k 1 k 2 n k 1 2 pk 1 pn 2 n k 2 1 n k 2 1 pk 2 1 n 2 i k 2 1 pi k 2 i k 1 pn i 1 pi pk 2 1 n 3 i k 2 i k 2 pn i 2 pi pi 1 23 moreover when n k 2 1 we have w 1 k 2 1 k 1 k 2 pk 2 1 pk 1 k 2 k 1 1 2 k 2 1 k 1 pk 2 i pi and when n k 2 2 w 1 k 2 2 k 1 k 2 n k 1 2 pk 1 pn 2 n k 2 1 n k 2 1 pk 2 1 pk 2 k 2 i k 1 pn i 1 pi proof the proof is postponed to the appendix section 5 2 we did not consider the case when k 1 0 since it means that we are using a strategy that accepts the first candidate the probability of winning with this strategy equals n 2 pn 1 pn n 2 1 1 n 0 as n 1 2 1 theorem 4 21 for 12 1 1 k 1 k 2 n 2 and n the optimal k 1 k 2 strategy is to have k 1 k 1 and k 2 k 2 for some functions k 1 and k 2 such that n k 1 6 and n k 2 6 numerical results are presented after the proof define x n k 1 6 and y n k 2 6 the probability of winning equals f x y x 2 1 y 1 y 1 y 1 x y 1 y 1 1 x y 1 1 1 y 2 1 y 2 y 2 proof the proof is postponed to the appendix section 5 2 we define the k 2 k 1 strategy with k 2 k 1 n 2 to be the strategy that rejects the first k 2 candidates then accepts the next left to right second maximum thereafter or rejects the first k 1 candidates and then accepts the next left to right maximum thereafter whichever appears first we can also similarly define a k 2 k 1 pickable permutation sn t 2 n k 2 k 1 andw 2 n k 2 k 1 by arguments similar to those used in lemma 4 18 theorem 4 19 4 20 and 4 21 we can prove theorem 4 22 the proof is postponed to the appendix section 5 theorem 4 22 for 12 1 n the optimal k 2 k 1 strategy is to have k 1 k 1 and k 2 k 2 for some functions k 1 and k 2 such that n k 1 6 and n k 2 6 by theorem 3 7 every type i prefix of length longer than k 2 is positive therefore we have k 1 k 2 and conclude that the optimal strategy is the k 1 k 2 strategy i e we reject the first k 1 candidates and then accept the next left to right maximum thereafter or reject the first k 2 k 1 candidates and then accept the next left to right second maximum thereafter whichever appears first since for f x y as defined in theorem 4 21 we have that x and y must both be integers and since f x y 0 as x and y we can pick a large number say 100 as an upper bound for x and y and for each 0 51 0 52 0 99 use brute force search to find the maximum of f x y subject to the constraint 1 y x 100 the number 100 is large enough as we also ran computer simulations to find the maximum of f x y subject to 1 y x without restricting ourselves to integer values of x and y it turns out that the x y which realize the maximum of f x y obtained with integer constraints are floors or ceilings of the x y that maximize f x y without the integer constraints the optimal strategy is a k 1 k 2 strategy for some k 1 k 2 such that both n k 1 and n k 2 6 see figure 6 and table 2 note that as x y we have that the probability of winning 0 25 as 1 which matches the well known result for 1 and also the same and more detailed result by our approach presented in remark 4 12 the results of our analysis are summarized in figure 7 depicting the maximum probability of winning versus the value of 0 24 figure 6 probability of winning using the optimal strategy for a mallows distribution with 12 1 x n k 1 y n k 2 f x y x n k 1 y n k 2 f x y 0 51 3 2 0 37365098 0 76 4 3 0 30035513 0 52 3 2 0 37210767 0 77 4 3 0 29758801 0 53 3 2 0 37037533 0 78 5 3 0 29534636 0 54 3 2 0 36845868 0 79 5 3 0 29278142 0 55 3 2 0 36636187 0 80 5 3 0 28950528 0 56 3 2 0 36408852 0 81 5 4 0 28636405 0 57 3 2 0 36164162 0 82 5 4 0 28475072 0 58 3 2 0 35902353 0 83 6 4 0 28323769 0 59 3 2 0 35623597 0 84 6 4 0 2807399 0 60 3 2 0 35328 0 85 6 5 0 27723561 0 61 3 2 0 35015597 0 86 7 5 0 27631243 0 62 3 2 0 34686351 0 87 7 5 0 27407495 0 63 3 2 0 34340152 0 88 8 6 0 27172552 0 64 3 2 0 33976812 0 89 8 6 0 26989821 0 65 3 2 0 33596062 0 90 9 7 0 26791563 0 66 3 2 0 33197556 0 91 10 8 0 26567038 0 67 3 2 0 32780861 0 92 11 9 0 26372892 0 68 3 2 0 32345457 0 93 12 10 0 26203596 0 69 4 2 0 31915211 0 94 14 11 0 2601134 0 70 4 2 0 316491 0 95 17 14 0 25839363 0 71 4 2 0 31340159 0 96 21 17 0 25663997 0 72 4 2 0 30987746 0 97 27 23 0 25492095 0 73 4 3 0 30605788 0 98 39 35 0 25320664 0 74 4 3 0 30456693 0 99 76 69 0 25158519 0 75 4 3 0 30267334 table 2 maximum winning probabilities and optimal strategies for 12 1 25 figure 7 probability of winning using the optimal strategy for a mallows distribution with 0 remark 4 23 an interesting open question is to find the optimal strategy for identifying the kth best candidate when candidates are presented according to the mallows distribution we believe that the problem may be addressed using similar proof techniques acknowledgment the work was supported in part by the nsf grants nsf ccf 15 26875 and the center for science of information at purdue university under contract number 239 sbc purdue 4101 38050 early parts of the work were also supported by the darpa molecular informatics program references 1 m babaioff n immorlica d kempe and r kleinberg online auctions and generalized secretary problems acm sigecom exchange vol 7 no 2 pp 1 11 2008 2 l bay n p f ayuso j grau a oller marc n and m ruiz the best or worst and the postdoc problems journal of combinatorial optimization vol 35 no 3 pp 703 723 2018 3 l bay n p f ayuso j grau a oller marc n and m ruiz the best or worst and the postdoc problems with random number of candidates journal of combinatorial optimization vol 38 no 1 pp 86 110 2019 4 j n bearden a new secretary problem with rank based selection and cardinal payoffs journal of mathematical psychology vol 50 no 1 pp 58 59 2006 5 r busa fekete d fotakis sz r nyi zampetakis optimal learning for mallows block model pro ceedings of machine learning research vol 99 pp 1 4 2019 6 m crews b jones k myers l taalman m urbanski and b wilson opportunity costs in the game of best choice the electronic journal of combinatorics vol 26 no 1 p 1 45 2019 7 e dynkin the optimal choice of the stopping moment for a markov process dokl akad nauk sssr vol 150 pp 238 240 1963 26 8 h esfandiari m hajiaghayi v liaghat and m monemizadeh prophet secretary siam journal on discrete mathematics vol 31 no 3 pp 1685 1701 2017 9 t s ferguson who solved the secretary problem statistical science vol 4 no 3 pp 282 289 1989 10 a fowlkes b jones positional strategies in games of best choice involve a journal of mathematics vol 12 no 4 pp 647 658 2019 11 m gardner mathematical games scientific american vol 202 no 2 pp 152 1960 a 12 m gardner mathematical games scientific american vol 202 no 3 pp 178 179 1960 b 13 b jones avoiding patterns and making the best choice discrete mathematics vol 342 no 6 pp 1529 1545 2019 14 b jones weighted games of best choice siam journal on discrete mathematics vol 34 no 1 pp 399 414 2020 15 r d kleinberg a multiple choice secretary algorithm with applications to online auctions in soda vol 5 pp 630 631 2005 16 d lindley dynamic programming and decision theory appl statist vol 10 pp 39 52 1961 17 x liu o milenkovic and g moustakides query based selection of optimal candidates under the mallows model https arxiv org pdf 2101 07250 pdf 18 c l mallows non null ranking models biometrika vol 44 no 1 2 pp 114 130 1957 19 j s rose a problem of optimal choice and assignment operations research vol 30 pp 172 181 1982 20 a rubinstein beyond matroids secretary problem and prophet inequality with general constraints proceedings of the forty eighth annual acm symposium on theory of computing stoc pp 324 332 2016 21 k szajowski a rank based selection with cardinal payoffs and a cost of choice sci math jpn vol 69 no 2 pp 285 293 2009 22 r j vanderbei the postdoc variant of the secretary problem technical report princeton university tech rep 2012 23 t zhao m hu r rahimi and i king it s about time modeling customer behaviors as the secretary problem in daily deal websites in 2017 international joint conference on neural networks ijcnn ieee pp 3670 3679 2017 5 appendix proof of theorem 3 7 since n k 6 we know that k and 12 13 14 15 become qo 1 k 1 q 1 k q 2 k q o 1 k 2 1 26 q 1 k 1 q 1 k 1 1 q 2 k 27 qo 2 k 1 q 1 k q 2 k q o 2 k 2 1 28 q 2 k 1 q 2 k 2 1 29 respectively when n k 0 q 2 n 0 qo 2 n and q 1 n 0 0 qo 1 n 27 we prove the theorem by induction we first examine the base case n k 1 for which q 2 n 1 n 3 2 qo 2 n 1 since 12 1 and q 1 n 1 0 1 qo 1 n 1 now we assume the argument applies for k n j 1 and prove it for k n j by the induction hypothesis we have q 2 k q 2 n j qo 2 n j qo 2 k claim 5 1 under the assumptions 1 j n k 6 2 for all n 1 k n j 1 q 2 k qo 2 k and q 1 k qo 1 k and 3 q 2 n j qo 2 n j we have qo 1 n j j 2 j 1 1 j 1 2 j 4 p 1 j 2 pj 1 1 j 2 and qo 2 n j q o 1 n j proof by the assumptions of the claim 26 and 28 reduce to qo 1 k 1 q 1 k q 2 k q o 1 k 2 1 30 qo 2 k 1 q 1 k q 2 k q o 2 k 2 1 31 and we can solve the recurrence using the formulas for q 1 and q 2 provided in claim 3 2 and claim 3 3 with the additional conditions that n and n k 6 and some simple algebra which we omitted 2 under the assumption q 2 n j qo 2 n j we define h 1 j as h 1 j j 1 j 2 j j 1 j 1 j j j 1 1 32 so that h 1 j 0 we want to show that q 1 n j qo 1 n j which is equivalent to h 2 j 0 with h 2 j j j 2 j 1 j 1 j 1 j j j 1 1 33 to complete the proof we need to establish claim 5 2 claim 5 2 for any given 12 1 both equalities h 1 j 0 and h 2 j 0 with h 1 j h 2 j defined in 32 and 33 have exactly one real positive root which we write as j 1 and j 2 the inequalities h 1 j 0 and h 2 j 0 hold for 0 j j 1 and 0 j j 2 respectively moreover we always have j 2 j 1 proof we first show that both equations have exactly one root the root of 32 may be viewed as the intersection of f 1 j j 3 2 1 3 and f 2 j 1 j 1 the function f 1 is linear in j with positive slope 3 2 1 1 2 1 and positive intersection value 3 at j 0 the function f 2 is an exponential function with base 1 1 and intersection value 3 at j 0 therefore f 1 and f 2 only have one real positive intersection and h 1 0 for 0 j j 1 by graphing similarly the root of 33 may be viewed as the intersection of g 1 j j 3 2 1 2 and g 2 j 2 1 j we have that their intersection at j 0 are both equal to 2 and the slope for g 1 at j 0 is 3 2 1 1 2 1 which is always larger than the slope of g 2 at j 0 i e ln 2 for 12 1 the proof is omitted as it follows from simple calculus therefore g 1 and g 2 only have one real positive intersection and h 2 0 for 0 j j 2 by graphing we next show that h 2 j 1 0 for every 12 1 setting h 1 0 and plugging j 1 into h 2 shows that h 2 j 1 0 is equivalent to 1 j 1 j 1 1 0 for all 1 2 1 34 28 let h 3 j 1 j j 1 the function h 3 has exactly one positive real root j 3 ln 1 ln and h 3 0 0 when 12 1 if we can show that j 3 j 1 for all 1 2 1 then 34 is true equivalently if we can show that h 1 j 3 0 then our claim follows to prove this we show that h 1 j 3 j 3 1 3 j 3 2 j 3 1 j 3 2 1 1 j 3 2 2 j 3 1 0 i e j 3 2 2 j 3 0 which is equivalent to showing that j 3 ln 1 ln 2 1 2 we omit the proof of the fact that ln 1 ln 2 1 2 when 1 2 1 simple calculus or computer verification can be used to verify that this fact is true 2 2 proof of theorem 4 17 from theorem 4 15 and by simplifying the previous expressions we arrive at w 1 n k pn n k 2 1 2 1 n 1 n 1 1 n k 1 1 1 n k 2 1 1 k 1 k 1 1 n k 3 1 1 k 1 k 2 1 2 1 1 k 1 n 3 1 1 1 k 1 n 2 n k 1 1 k 1 n 1 n 1 let n and consider the following two cases case 1 n k since 12 n k 2 0 exponentially 1 2 1 n 1 n 1 1 2 1 and each term in the sum within the parentheses is bounded above by 2 thus the sum under parentheses is bounded by 2 n k 1 and 1 1 k 2 hence w 1 n k pn 0 case 2 n k 6 then we must have k if n k 1 then w 1 n k pn is zero since the strategy reject all but the last candidate and then pick the next left to right maximum only makes a selection when n appears in the last position and this selection results in a loss thus if n k 1 the best strategy is to simply just accept the last candidate and in this case the probability of winning is pn 1 pn 1 1 n 1 as n for n k 2 w 1 n k pn n k 2 1 2 1 n k 1 1 1 n k 2 1 1 2 1 1 1 n k 1 n k 2 1 n k 1 1 n k 1 1 n k 1 x n k x 2 x 1 1 1 x 1 x 1 since when n k 2 the probability converges to 1 2 2 1 1 when 0 12 thus we only need to consider the cases when n k 2 let f x x 2 x 1 1 1 x 1 x 1 claim 5 3 for x 3 and fixed 0 12 we have f x 1 f x 0 29 proof since 0 12 and x 3 f x 1 f x x 1 x 1 x 2 x x 1 1 x 2 x 1 2 x 2 x 1 x 1 x 2 1 x 1 1 1 x x 1 x 1 x 2 1 1 x 1 x 1 x 1 x 2 1 1 3 1 x 1 x 1 x 2 1 4 2 x 1 x 1 0 2 thus we only need to compare f 2 and f 3 it turns out that f 2 f 3 1 2 1 2 2 1 1 2 1 2 0 for all 0 12 therefore the optimal strategy is to reject all but the last two candidates and then accept the next left to right maximum if no selection is made before the last position then the only option is to accept the last position the maximum probability of winning is 1 1 2 see figure 5 2 proof of theorem 4 19 we need to consider three cases depending on the value in the last position case 1 the last position has a value i 1 2 n 2 these contribute n i to the sum the positions in 1 n 1 may be viewed as a k 1 k 2 winnable permutation in sn 1 thus together these contribute n 1 n 2 2 w 1 n 1 k 1 k 2 to the expression of interest case 2 the last position is occupied by the value n 1 this contributes to the sum the elements at positions 1 n 1 must form a non k 1 k 2 pickable permutation with a contribution of t 1 n 1 k 1 k 2 case 3 the last position is occupied by the value n then the value n 1 is at a position i k 1 1 n 1 the positions 1 i 1 form a non k 1 k 2 pickable permutation if i k 2 2 which contributes t 1 i 1 k 1 k 2 to the expression of interest and a non k 1 pickable permutation if k 1 1 i k 2 1 which contributes t 1 i 1 k 1 in this case furthermore b i 1 n i 1 counts the inversions in between there are no restrictions on the positions in i 1 n 1 and these contribute pn i 1 the value n 1 at position i contributes n i 1 2 proof of theorem 4 20 for n k 2 1 the only differences between the sets of k 1 k 2 winnable and k 1 winnable permutations are those permutations with value k 2 which equals n 1 in this case at position k 2 1 which equals n in this case and the value k 2 1 which equals n in this case at a position in 1 k 1 thus we have w 1 k 2 1 k 1 k 2 w 1 k 2 1 k 1 k 2 k 2 1 k 1 pk 2 1 similarly to what we did for the proof of theorem 4 16 we can solve for the case when n k 2 2 this completes the proof 2 proof of theorem 4 21 let n then w 1 n k 1 k 2 pn n k 1 2 pk 1 pn 1 pn n k 2 1 n k 2 1 pk 2 1 n 2 i k 2 1 pi k 2 i k 1 pn i 1 pi pk 2 1 n 3 i k 2 i k 2 pn i 2 pi pi 1 n k 1 2 1 k 1 1 n k 2 1 n k 2 1 1 k 2 1 1 k 2 1 k 2 1 1 n 2 1 n k 1 1 1 k 1 1 n k 2 1 1 k 2 30 1 k 2 1 1 1 n k 2 2 1 k 2 1 k 2 1 1 n k 2 3 1 k 2 1 1 k 2 2 n k 2 3 1 1 n 3 1 n 2 35 case 1 n k 1 since 12 1 n k 1 2 0 exponentially we hence have 35 is upper bounded by n k 1 2 1 1 n k 2 1 k 2 k 1 1 1 n k 2 2 1 2 0 case 2 n k 1 6 then n k 2 6 k 1 and k 2 let x n k 1 and y n k 2 then 35 converges to f x y x 2 1 y 1 y 1 y 1 x y 1 y 1 1 x y 1 1 1 y 2 1 y 2 y 2 2 the proof of theorem 4 22 we call a permutation sn k 2 k 1 winnable if it results in a win using the k 2 k 1 strategy let w 2 n k 2 k 1 denote k 2 k 1 winnable permutations sn inversions in throughout this subsection we call a permutation sn k 2 k 1 pickable if it results in at least one selection using the k 2 k 1 strategy let t 2 n k 2 k 1 denote non k 2 k 1 pickable permutations sn inversions in recall that by lemma 4 6 and remark 4 7 we have t 2 k k pk and when n k 1 and k 0 t 2 n k pk 1 2 pk 1 1 2 pk 1 2 pn 2 36 lemma 5 4 for n k 1 t 2 n k 2 k 1 2 n 2 k 1 pn 2 pk 1 2 t 2 k 1 k 2 proof let sn be non k 2 k 1 pickable then the value n must be in 1 k 1 since otherwise it would be picked as a left to right maximum if no selection was made before the value n 1 must also be in 1 k 1 since otherwise it would be picked as a left to right second maximum if no selection was made before the positions 1 k 1 form a non k 2 pickable permutation and thus positions 1 k 1 contribute t 2 k 1 k 2 pk 1 2 pk 1 1 2 pk 1 2 pk 1 2 furthermore each of the values n and n 1 contribute n k 1 for the inversions involving positions k 1 1 n there are no restrictions for positions in k 1 1 n and thus they contribute pn k 1 moreover b k 1 2 n k 1 counts the in between inversions thus together we have t 2 n k 2 k 1 2 n 2 k 1 t 2 k 1 k 2 b k 1 2 n k 1 pn k 1 2 n 2 k 1 pn 2 pk 1 2 t 2 k 1 k 2 2 lemma 5 5 for k 2 k 1 n 2 w 2 n k 2 k 1 2 pn 2 w 2 n 1 k 2 k 1 t 2 n 1 k 2 k 1 n 1 i k 1 1 n i 1 t 2 i 1 k 2 k 1 b i 1 n i 1 n i 1 31 proof we have to address three cases depending on the value of the last position case 1 the last position has values i 1 2 n 2 they contribute n i and the positions in 1 n 1 can be viewed as a k 2 k 1 winnable permutation in sn 1 thus together these contribute n 1 n 2 2 w 2 n 1 k 2 k 1 case 2 the last position is the value n 1 the value n 1 at the last position contributes then the positions 1 n 1 must form a non k 2 k 1 pickable permutation it contributes t 2 n 1 k 2 k 1 case 3 the last position has the value n then the value n 1 is at some position i k 1 1 n 1 since it must be picked as a left to right maximum the positions 1 i 1 form a non k 2 k 1 pickable permutation and it contributes t 2 i 1 k 2 k 1 we also have b i 1 n i 1 counting the inversions between positions 1 i 1 and i 1 n 1 there are no restrictions on positions in i 1 n 1 and thus they contributes pn i 1 the value n 1 at position i contributes n i 1 with respect to the positions i 1 n 1 2 it turns out that we can solve the recurrence relation in lemma 5 5 recall that for k 1 we have w 2 n k t 2 n k 2 n 2 k 1 pn 2 pk pk 1 pk 1 2 pn 2 1 2 pn 3 1 2 pk 1 2 pk 1 2 n 2 k pn 2 pn 3 pk 1 for k 0 we have w 2 n 0 t 2 n 0 lemma 5 6 for k 2 k 1 n 3 w 2 n k 2 k 1 2 n 2 k 1 1 pn 2 pk 1 2 2 n 2 k 1 1 pn 2 pk 1 2 n 2 i k 1 1 1 pi n k 1 2 pn 2 pk 1 2 n 3 i k 1 1 i k 1 1 1 n i 3 pi pi 1 t 2 k 1 k 2 2 n 2 k 2 1 pn 2 pk 2 pk 2 1 moreover when n k 1 1 w 2 k 1 1 k 2 k 1 1 2 pk 1 1 t 2 k 1 k 2 2 k 1 2 k 2 3 pk 1 1 pk 2 pk 2 1 and when n k 1 2 w 2 k 1 2 k 2 k 1 1 3 pk 1 1 3 pk 1 5 pk 1 pk 1 1 t k 1 k 2 2 k 1 2 k 2 5 pk 1 pk 2 pk 2 1 proof for n k 1 1 k 2 k 1 winnable permutations are the same as k 2 winnable permutations thus w 2 k 1 1 k 2 k 1 w 2 k 1 1 k 2 1 2 pk 1 1 t 2 k 1 k 2 2 k 1 2 k 2 3 pk 1 1 pk 2 pk 2 1 similarly to theorem 4 16 we can solve for the case when n k 1 2 by invoking the recurrence relation in theorem 5 5 we omit the tedious simplification process 2 we are now ready to complete the proof of theorem 4 22 let n by 36 and note that 1 2 pk pk 2 w 2 n k 2 k 1 pn t 2 k 1 k 2 pk 1 2 1 2 1 n 1 n 1 2 n 2 k 1 1 2 n 2 k 1 1 1 n 2 i k 1 1 1 1 i n k 1 2 n 3 i k 1 1 i k 1 1 n k 1 1 1 1 i 1 i 1 2 n 2 k 2 1 1 k 2 1 k 2 1 1 n 1 n 1 1 1 1 k 2 1 1 1 1 k 1 2 1 k 1 1 2 1 k 1 2 2 n 2 k 1 1 2 n 2 k 1 1 1 n 2 i k 1 1 1 1 i 32 n k 1 2 n 3 i k 1 1 i k 1 1 n k 1 1 1 1 i 1 i 1 2 n 2 k 2 1 1 k 2 1 k 2 1 37 when 12 1 1 1 1 k 2 1 1 1 1 k 1 2 1 k 1 1 2 1 k 1 2 4 38 case 1 n k 1 then n k 2 by 38 12 1 n k 1 and n k 2 0 exponentially we have 37 0 case 2 n k 1 6 then k 1 we have to consider two subcases depending on whether n k 2 case 2 1 n k 2 then k 1 k 2 and 2 n 2 k 2 1 1 k 2 1 k 2 1 0 exponentially again we have to consider two subcases depending on whether k 2 case 2 1 1 k 2 then since 0 75 1 2 1 when 12 1 1 1 1 k 2 1 1 1 1 k 1 2 1 k 1 1 2 1 k 1 2 1 2 k 1 k 2 0 exponentially thus we have 37 0 case 2 1 2 k 2 6 then since 1 1 1 k 1 2 1 2 where 0 75 1 2 1 we have 1 1 1 k 2 1 1 1 1 k 1 2 1 1 1 k 1 2 k 1 k 2 2 0 and thus 37 0 case 2 2 n k 2 6 then k 2 and 37 1 2 k 1 k 2 2 n 2 k 1 1 2 n 2 k 1 1 1 n k 1 n k 1 2 1 n k 1 1 n k 1 1 n k 1 1 1 2 n 2 k 2 1 let x n k 1 y n k 2 and 37 1 2 y x 2 x 1 2 x 1 1 x x 2 1 x 1 x 1 x 1 1 2 y 1 g x y the maximum value of g x y is positive and thus the optimal k 2 k 1 strategy must satisfy n k 1 6 and n k 2 6 2 33 1 introduction 2 preliminaries 3 winning strategies under the mallows model 3 1 the case 1 and 1 3 2 the case 1 3 2 1 the subcase 0 1 2 3 2 2 the subcase 1 2 1 3 3 optimal strategies 4 precise parameter settings for the mallows model 4 1 precise results for case 1 and case 2 from section 3 3 4 2 precise result for case 3 1 and case 3 2 4 3 precise result for case 3 3 5 appendix