ar x iv 2 00 9 05 11 5 v 2 m at h f a 1 9 a ug 2 02 1 the truncated moment problem for unital commutative r algebras rau l e curto mehdi ghasemi maria infusino and salma kuhlmann abstract let a be a unital commutative r algebra k a closed sub set of the character space of a and b a linear subspace of a for a linear functional l b r we investigate conditions under which l admits an integral representation with respect to a positive radon measure supported in k when a is equipped with a submultiplicative seminorm we employ techniques from the theory of positive extensions of linear functionals to prove a criterion for the existence of such an integral representation for l when no topology is prescribed on a we identify suitable assumptions on a k b and l which allow us to construct a seminormed structure on a so as to exploit our previous result to get an integral representation for l our main theorems allow us to extend some well known results on the classical truncated mo ment problem the truncated moment problem for point processes and the subnormal completion problem for 2 variable weighted shifts we also analyze the relation between the full and the truncated moment problem in our general setting we obtain a suitable generalization of stochel s theorem which readily applies to full moment problems for localized algebras this paper is dedicated to the memory of murray marshall who passed away in may 2015 and whose influence can be felt vividly throughout the article 1 introduction the classical truncated moment problem tmp dates back to the start of the twentieth century and was initially developed by a number of math ematicians including a a markov h hamburger n i akhiezer m g krein a a nudel man m riesz and i s iohvidov the theory ran paral lel to the developments in the full moment problem where the main focus was placed many decades later renewed interest in tmp arose in connec tion with the so called subnormal completion problem scp for unilateral weighted shifts in 1966 j stampfli 76 proved that for any three positive numbers a b c it is always possible to build a unilateral weighted shift w acting on 2 n 0 with n 0 having initial weights 0 a 1 b 2020 mathematics subject classification primary 44 a 60 47 a 57 28 c 05 secondary 46 j 05 28 e 99 11 c 99 60 g 57 key words and phrases truncated moment problem full moment problem measure integral representation linear functional 1 http arxiv org abs 2009 05115 v 2 2 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann 2 c and such that w is subnormal in 16 17 r e curto and l a fialkow solved the scp for unilateral weighted shifts by finding necessary and sufficient conditions for a finite collection of positive numbers to be the initial segment of weights of a subnormal unilateral weighted shift their approach was based on the fact that subnormality is detected by the exis tence of a positive radon measure on the closed interval 0 w 2 whose moments are the moments k of the weight sequence defined recursively as 0 1 and k 1 2 k k for all k n 0 thus the subnormality of w is intrinsically related to a tmp in the process curto and fialkow proved the so called flat extension theorem for moment matrices which is an essential component of their tmp theory in one and several real or complex variables a few years after the curto fialkow results were published j b lasserre discovered some significant connections between real algebraic geometry moment problems and polynomial optimization he introduced a method known as semidefinite relaxations see e g 53 which led to renewed in terest in solutions of tmp especially those with finitely atomic representing measures the importance of polynomial optimization problems and the convenience of working with polynomials as algebraic and computational ob jects as well as intensive research on this area is one of the main motivations for the study of moment problems for the algebra of polynomials for ample information on the above mentioned developments the reader is referred to 1 18 19 20 21 23 37 38 43 44 49 50 53 54 55 56 57 68 73 81 a fundamental tool in all those works is positivity given a closed subset k of rn a linear functional l defined on a subspace of r x r x 1 xn is said to be k positive when it assumes nonnegative values in all the elements of its domain which are nonnegative on k for a set a of monomials in r x a closed subset k of rn and a k positive linear functional l on the span a the a truncated k moment problem is the question of establishing whether l can be represented as an integral with respect to a positive radon measure whose support is contained in k if such a measure exists then it is called a k representing measure for l the a truncated k moment problem terminology was introduced by j nie in 65 although he only considered the case when the set a is finite when a x nn 0 d for some d n the a truncated k moment problem is usually known as the classical k tmp the full k moment problem for closed k rn corresponds to the case when a x nn 0 that is given a k positive linear functional l on r x find a criterion for the existence of a positive radon measure whose support is contained in k and such that l is represented as l p p d for all p r x the truncated moment problem for commutative r algebras 3 partial answers to the a truncated k moment problem are known for example when k is a closed subset of rn and a is the set of all monomials up to a certain degree 2 d or 2 d 1 the existence of such a k representing measure is proved to be equivalent to the k positive extendability of l to the set of all polynomials of degree at most 2 d 2 23 theorem 2 2 when k is compact and span a contains a polynomial that is strictly positive on k the existence of a k representing measure is known to be equivalent to the k positivity of l see 80 theorem i p 129 23 p 2710 28 theorem 2 2 and 65 algorithm 4 2 in the present article we show that all the above solutions can be con sidered as particular cases of a general result about the existence of positive extensions of linear functionals to larger linear subspaces containing an el ement that dominates all the members of the original domain the scope of our study is also much broader as we consider unital commutative r algebras instead of r x and arbitrary linear subspaces of the algebra in lieu of finite dimensional ones thus our setting is general enough to encompass also infinite dimensional instances of the moment problem e g when the algebra is not finitely generated or when the representing measure is supported on an infinite dimensional vector space infinite dimensional moment problems have been studied already in the sixties see e g 12 66 30 61 6 8 58 7 72 motivated by fundamental questions in applied areas such as statistical physics and quantummechanics since then there has been an extensive production on the infinite dimensional moment problems appearing in the analysis of interacting particle systems as well as in stochastic geometry spatial ecology neural spike trains hetero geneous materials and random packing see e g 2 59 52 63 9 77 79 despite the vast literature devoted to the theory of the infinite dimensional moment problem and more generally of the moment problem on unital com mutative algebras see 51 33 3 10 34 60 39 74 41 42 just to mention a few recent developments several questions remain open cf 40 let us briefly describe our contribution towards a better knowledge of the tmp in this general setting in section 2 notations and basic definitions are introduced in section 3 we give the definition of the b truncated k moment problem which is a generalization of the classical truncated k moment problem for linear functionals l defined on a linear subspace b of a unital commutative r algebra a and a closed subset k of characters of a see definition 3 1 in theorem 3 2 we prove a first criterion for solving this problem when a seminormed structure is present on a employing techniques from the theory of positive extensions of linear functionals the rest of the section deals with algebras that are not necessarily equipped with a seminorm but that 4 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann are considered in a setting which implies the existence of a seminormed structure theorem 3 7 respectively theorem 3 8 solves the b truncated k moment problem see definition 3 1 for k compact respectively k non compact closed subset of characters of a in section 4 we use the choquet bishop de leeuw theorem to determine the nature of the support of the representing measures obtained in previous sections in the case when b is a finite dimensional subspace of the algebra of continuous real valued functions on a compact space theorems 4 1 and 4 3 in section 5 we prove an analogue of j stochel s theorem 78 about the relation between the full moment problem and the truncated moment problem see theorem 5 2 the notion of truncatedk frames is introduced to treat stochel s result in our general setting we then use theorem 3 8 and theorem 5 2 to obtain a new proof of the main result in m putinar and f h vasilescu s paper on dimensional extensions 69 theorem 2 5 see theorem 5 5 and also an alternative proof of a result of m marshall on localization of r x at the multiplicative set of powers of a positive polynomial 62 corollary 6 2 4 see theorem 5 6 finally we reserve section 6 for a discussion of several applications of our main results ranging from the classical tmp to the tmp for point pro cesses and to the scp for 2 variable weighted shifts in particular in the case of bivariate polynomials our novel approach allows us to deal with not only the cases of the rectangular triangular and sparse connected tmp but also with a new hybrid case which includes the presence of infinitely many moments in one of the variables 2 notation and preliminaries in this article all the algebras are assumed to be commutative r algebras with unit a submultiplicative seminorm on an algebra a is a map a 0 satisfying 1 for all a a and r r ra r a positive homogeneous 2 for all a b a a b a b subadditive 3 for all a b a ab a b submultiplicative note that conditions 1 2 and 3 above imply continuity of scalar multipli cation addition and multiplication on a respectively the pair a is called a seminormed algebra we denote by x a the set of all real valued r algebra homomorphisms on a the character space of a one can identify x a as a subset of ra it is important to add the following assumption throughout this article the truncated moment problem for commutative r algebras 5 we assume that x a is nonempty this is always true when a is finitely generated see 26 corollary 5 p 639 instances when x a is empty are given by the unital commutative r algebra a r x of power series in x and the arens algebra l 0 1 p 1 l p 0 1 4 72 ex 2 5 5 for any subset s a we define ks to be the common nonnegativity set of s on x a i e ks x a s 0 every a a induces a map a x a r which is defined by a a for every in x a these are basically projection maps on the ath component of x a as a subset of ra we endow x a with the weakest topology which makes all maps a continuous note that this topology coincides with the subspace topology on x a inherited from ra equipped with the product topology when a r x the characters of a are in one to one correspondence with point evaluations i e x a rn and so p p for every p a as a result we will routinely omit the when dealing with elements of r x note that in this case for any s r x ks x r n q x 0 for all q s we consider the borel algebra on x a generated by this topology and given a borel set k x a we say that a radon measure has support contained in k if m k implies m 0 for all borel measurable subsets m in x a to any subset k x a and any linear subspace b a we associate posb k defined as posb k b b b 0 for all k posb k is a cone in b i e closed under sums and multiplication by non negative real numbers we also let a 2 denote the cone of sums of squares of elements of a and we similarly define a 2 d for d n for any d n a a 2 d module s a is a cone containing 1 such that for every a a a 2 d s s a a 2 d preorder is a a 2 d module which is closed under multiplication a linear functional l b r is said to be k positive if l posb k 0 when b a and k x a we say that l is positive if the algebra a is equipped with a submultiplicative seminorm then the subset sp a of all continuous elements of x a is called the gelfand spectrum of a and defined by sp a x a a a for all a a since sp a a a a a is closed and the latter set is compact in the product topology we see that sp a is compact also if k is a nonempty compact subset of x a then for every a a we have a k 6 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann cb k where cb k denotes the subalgebra of bounded continuous real valued functions on k thus the supremum norm 2 1 k f sup k f for all f cb k induces a submultiplicative seminorm on a more precisely given a a we will let 2 2 k a k a for all a a we will also let c x denote the algebra of continuous real valued functions on a topological space x remark 2 1 a particularly interesting instance of the gelfand spectrum appears when a is a uniform algebra i e when a can be realized as a subalgebra of bounded continuous real valued functions cb x equipped with the sup norm x for a completely regular space x if a cb x is a unital algebra separating points of x then for each x x ex the eval uation at x induces a continuous r algebra homomorphism on a hence ex belongs to sp x a it is easy to see that x 7 ex maps x injectively into sp x a and every f a extends continuously to sp x a as a re sult a a a a can be regarded as a subalgebra of c sp x a moreover x is dense in sp x a if not take sp x a x where x denotes the supremum norm on x by urysohn s lemma there is g c sp x a with g 1 and g x 0 note that here we are using the map x 7 ex so this precisely means that g ex 0 for all x x since a contains constant functions and separates points of x a and in particular separates the points of sp x a we have that the subalgebra a sp x a a sp x a a a of cb sp x a satisfies the requirements of the stone weierstrass theorem hence for any 0 there exists a a such that x g a supx x g ex a ex choosing in particular 0 such that 1 1 we get g a 1 a or equivalently 1 a 1 also for every x x g ex a ex 0 a x thus 1 sup sp x a a x a 1 which is a contradiction therefore x sp x a conversely every hausdorff compactification of x can be realized as the gelfand spectrum of a suitable subalgebra of cb x for more details see 29 chapter i theorem 8 1 the truncated moment problem for commutative r algebras 7 definition 2 2 let a be a seminormed algebra and c be a cone of a for every a a we define a c inf p c a p proposition 2 3 c is a sublinear function on a i e 1 for all a b a a b c a c b c and 2 for all 0 a a a c a c moreover for all a a a c a proof let a b a by definition 2 2 there are nets pt t 0 and qt t 0 in c such that lim t 0 a pt a c and lim t 0 b qt b c decreasingly then we get a b c infc c a b c lim inf t 0 a b pt qt lim inf 0 a pt b qt lim t 0 a pt lim t 0 b qt a c b c this establishes property 1 as for property 2 let a a and 0 if 0 then 2 3 clearly holds as 0 c 0 where 0 denotes the additive identity in a if 0 then a c inf c c a c inf c c a c inf c c a c a c moreover a c infc c a c a infc c c a proposition 2 4 let a be a commutative r algebra k a nonempty com pact subset of x a and k be as in 2 1 and 2 2 for a a let a max 0 a then a a 2 k k a a posa k k proof let a max 0 a then a a a and both functions a and a are nonnegative and continuous on the compact set k since a a a a contains constant functions and separates points of x a and in particular separates the points of k we have that the subalgebra a k a k a a of cb k satisfies the requirements of the stone weierstrass theorem hence for every 0 there exists b a such that k b a where 0 is chosen in a way that r s implies r 2 s 2 for r s in a suitable compact set containing a k the existence of such is guaranteed by uniform continuity of the square function on compact subsets of r then b 2 a 2 posa k and we have k a b 2 k a a b 2 k a 8 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann thus a a 2 k k a to see the reverse inequality note that k a max k a k a and for each p a 2 clearly k a k a p therefore k a a a 2 k moreover a 2 k posa k so a a 2 k a posa k k for every a a remark 2 5 in particular for any x a a a 2 a max 0 a 3 general truncated moment problems in this section we study the following generalization of the classical trun cated moment problem definition 3 1 let a be a unital commutative r algebra given a closed subset k of x a a linear subspace b of a and a linear functional l b r the b truncated k moment problem asks whether there exists a positive radon measure whose support is contained in k such that l b b d for all b b when this representation exists is called a k representing measure for l the following is one of the main results of this article and provides a necessary and sufficient condition for the existence of a solution to the b truncated k moment problem in the presence of a submultiplicative seminorm on a theorem 3 2 let a be a seminormed algebra b a linear subspace of a d n s a a 2 d module and l b r a linear functional then l admits an integral representation with respect to a positive radon measure whose support is contained in sp a ks if and only if there exists a d 0 such that l b d b s for all b b proof suppose that l admits an integral representation with respect to a positive radon measure supported in sp a ks then in particular l admits a continuous extension l to a which is also positive on s therefore for all p s l p 0 clearly for every a a and p s we have a a p on sp a ks and so l a l a p l a p l a p the truncated moment problem for commutative r algebras 9 here l sup a 1 l a which is finite by continuity thus l a l inf p s a p l a s a a which proves the necessity part now assume that there exists d 0 such that for every b b l b d b s since s is sublinear by the hahn banach theorem 71 theorem 3 2 l admits an extension l a r such that d a s l a d a s for all a a by proposition 2 3 d a s d a d a thus d a d a s l a d a s d a for all a a the above inequality implies that l is continuous we show that l is also nonnegative on s let p s then l p l p d p s by definition p s infq s q p and therefore p s 0 so l p 0 for each p s applying 35 corollary 3 8 we find a positive radon measure supported in sp a ks such that l a a d for all a a and hence on b itself as desired the previous result can be extended to the case when a is endowed with a locally multiplicatively convex lmc topology i e the topology on a generated by some family f of submultiplicative seminorms on a we denote by sp a the gelfand spectrum of a i e the set of all continuous x a since any linear functional on a is continuous if and only if it is continuous for some f see lemma 4 1 in 32 we have that 3 1 sp a f sp a without loss of generality we can always assume that the family f is directed this also implies that the union in 3 1 is directed by inclusion then it is easy to see that the following holds corollary 3 3 let a be a unital commutative r algebra endowed with the lmc topology generated by the directed family f of submultiplicative seminorms on a let b be a linear subspace of a d n s a a 2 d module and l b r a linear functional then l admits an integral representation with respect to a positive radon measure whose support is contained in sp a ks if and only if there exist a d 0 and a f such that l b d b s for all b b 10 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann where b s infp s b p we utilize the criterion in theorem 3 2 to study the existence of repre senting measures in the absence of a fixed seminorm we begin by giving a slight generalization of a result due to choquet 11 theorem 34 2 for the reader s convenience we include the proof lemma 3 4 choquet s lemma let w be a linear subspace of an r vector space v let c v be a convex cone and let wc w c w c let l w r be a linear functional with l w c 0 then l admits an extension l to wc such that l wc c 0 proof it is clear that wc is a linear subspace of v containing w we show that the function p v sup l w w wand v w c v wc is a sublinear function such that p w l to see this note that there are w w w and c c c such that v w c w c thus w w c c c w and hence l w w 0 or equivalently l w l w therefore the set l w w w v w c is nonempty and bounded above hence p v exists clearly p v p v so it remains to show that p v v p v p v if v w c and v w c then v v w w c c c thus p v p v p v v or equivalently p v v p v p v for every v w 0 v v c therefore p v l v also for every w w with v w c we have l w l v because l w c 0 therefore l v p v which proves p w l applying the hahn banach theorem l admits an extension l to wc such that l v p v on wc for c c wc p c 0 and hence 0 p c l c as desired corollary 3 5 riesz krein extension theorem cf 51 theorem 3 6 let v be a vector space of real valued functions on a set x and let v 0 be a linear subspace that dominates v i e for every v v there exist v 1 v 2 v 0 such that v 1 v v 2 then any positive linear functional on v 0 has at least one positive linear extension to all of v proof let c posv x then for every v v and v 1 v 2 v 0 as above v v 1 v 2 v c thus v v 0 c v 0 c now apply lemma 3 4 to obtain the desired positive extension remark 3 6 while the riesz krein extension theorem can be derived from choquet s lemma we do not know whether the converse is true we are now ready to state and prove the two main results of this section theorem 3 7 the compact case let a be a unital commutative r algebra suppose k x a is compact and b a is a linear subspace the truncated moment problem for commutative r algebras 11 such that there exists q b with q strictly positive on k then every k positive linear functional l b r admits an integral representation via a positive radon measure supported in k proof since q is strictly positive onk andk is compact a scalar multiple of q which we again denote by q is such that q 1 on k by the compactness of k every b b induces a bounded continuous function b on k so we define b c k by b b let l b r b 7 l b and note that b k b q k b q b k b q k b q b b pos b k b pos b k which gives a k positive extension of l to z span f f f b by lemma 3 4 taking s c k 2 or posc k k and a positive d l q we have for all b b l b l b b l b l k b q k b l q d b s then by theorem 3 2 applied to a c k k and l z r there exists a representing measure for l supported in sp k c k k this equality holds since k is compact cf remark 2 1 hence for all b b we have l b l b b d i e is a k representing measure for l theorem 3 8 the non compact case let a be a unital commutative r algebra suppose k x a is closed and non compact b a is a linear subspace and there exists p a b such that p 1 on k bp span b p contains 1 bp generates a and the following holds 3 2 for all b b there exists 0 such that p b posbp k let l b r a k positive linear functional and assume that l has a k positive extension l to bp then there exists a positive radon measure whose support is contained in k such that 3 3 l b b d for all b b i e is a k representing measure for l before we give the proof of theorem 3 8 we present some related examples and remarks 12 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann remark 3 9 it is not hard to prove that condition 3 2 in theorem 3 8 admits the following equivalent form 3 4 for all b b sup k b p we will often switch from one form to the other depending upon the cir cumstances in the sequel we will use r x d to denote the space of polynomials of degree at most d in x x 1 xn when n 1 we will write r x instead of r x example 3 10 in theorem 3 8 the assumption p a b is needed as the following example shows that is assuming only that p a might lead to the wrong conclusions for example if b r x 4 a r x k r x a and if l a 0 a 1 x a 2 x 2 a 3 x 3 a 4 x 4 a 0 a 1 a 2 a 3 2 a 4 then p x x 4 1 satisfies the assumptions of theorem 3 8 with the exception of p a b but the functional l which is r positive does not admit a representing measure as shown in 23 example 2 1 remark 3 11 the assumption p 1 on k in theorem 3 8 is a matter of convenience indeed since a is unital it would suffice to assume that p 0 for if there exists p a such that p 0 and 3 2 holds then p 1 always satisfies the requirement of being at least 1 on the other hand note that if inf p 0 and 3 2 holds then 1 there exists a net x k such that lim p x 0 2 for all b b there exists 0 such that p b 0 on k and hence lim b x 0 since bp generates a this holds for all elements of a observe now that a lim a x is an r algebra homomorphism which vanishes on a which is impossible since a is unital thus the existence of a p satisfying inf p 0 is inconsistent with 3 2 when a is unital we will now show that the requirement that the subspace bp generates the algebra a cannot be removed from the hypotheses in theorem 3 8 example 3 12 let a r x y and b r x 3 r x y let k r 0 r 2 x a and p x y 1 x 4 clearly p a b p 1 on k bp r x 4 contains 1 and for every b b given as b x 0 b 0 b 1 x b 2 x 2 b 3 x 3 one has b x 0 p x 0 4 maxi 0 1 2 3 bi for all x 0 k the truncated moment problem for commutative r algebras 13 however the subalgebra of a generated by bp is r x 6 a consider now the linear functional l b r defined by l b b 1 0 it is straightforward to verify that l is k positive now let l bp r be given by l c 0 c 1 x c 2 x 2 c 3 x 3 c 4 x 4 c 0 c 1 c 2 c 3 2 c 4 that is l c c 1 0 c 4 now observe that if c bp satisfies c 0 on k then c 4 0 it follows that l is a k positive extension of l however l does not have a k representing measure as shown in 23 example 2 1 proof of theorem 3 8 according to 3 2 for each c bp the function c p is bounded and continuous on k so we can consider the linear map bp cb k c 7 c p by assumption there exists a linear functional l bp r such that l b l b for all b b and l posbp k 0 note that ker ker l to see this let c ker which translates to c k 0 and hence c posbp k thus l c 0 and hence l c 0 therefore the following linear functional is well defined l bp r c p 7 l c note that pos bp k f bp f 0 on k as a result 3 5 l pos bp k l posbp k l posbp k 0 let z span f f f bp and recall that k f supk f then for all f bp we have f k f k f f k f k f f and so f bp posz k bp posz k hence by applying lemma 3 4 for v cb k w bp and c posz k we get that l has a k positive extension to z which we will denote with the same symbol l let us also denote by b the algebra generated by the elements of bp in cb k claim 1 b separates points of k proof take x 1 6 x 2 k note that bp must separate elements of k since a separates x a hence k so if for all b bp we have b x 1 b x 2 then this is also the case for all a a since bp generates a which is impossible two cases arise if p x 1 p x 2 then for some b b b x 1 6 b x 2 and b x 1 6 b x 2 if instead p x 1 6 p x 2 then 1 x 1 1 p x 1 6 1 p x 2 1 x 2 claim 1 therefore by remark 2 1 k sp k b is a hausdorff compactification of k and hence posb k posb k if we denote by s either b 2 or posb k then proposition 2 4 implies that f s k k f for all f b 14 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann observe that since k sp k b it follows that c x k c and there fore c cb k which implies that k c since for any b bp we have b p k b p onk and since l posz k 0 we then obtain that l b p l b p b p l b p k b p l 1 d b p s k for all b bp and for a positive d l 1 therefore theorem 3 2 applies to l bp r and gives a positive radon measure supported in k such that l c p c p d for all c bp where with abuse of notation we have still denoted by c p the continuous extension to k the measure is a k representing measure for l consider now the restriction of l to b given as l b l b l b p b 1 p d moreover 1 p has a continuous extension to k see remark 2 1 now recall that p 0 on k which implies p 0 on k and set dx 1 p x dx clearly is a positive measure on k and we have l b l b b p d b 1 p d b d for all b b which yields in particular that is a k representing measure for l it remains to show that is supported in k and this will imply that is actually a k representing measure for l claim 2 p x 0 for all x r k k proof let x r then there exists a net x k such that x lim x in k x b if p x 6 0 then by 3 2 we have that lim b x p x for all b b thus b x for all b b this together with the fact that a is generated by bp implies that for all a a a x and so we have that x x a hence since k is a closed subset of x a we get that x k which is a contradiction this shows that p is identically zero on r and proves the claim claim 2 let m be a borel measurable subset of k such that m k since m k k claim 2 implies that m 0 this proves that is supported in k remark 3 13 the reader may wonder whether the integral representation 3 3 for l can be extended to bp i e if is a k representing measure for the truncated moment problem for commutative r algebras 15 l since bp is the span of b and p this would amount to extending the representation to p now l p l 1 k k k k k k k p 1 p d k k k p d thus the possibility of extending 3 3 to p depends on whether k k 0 in the following example we will see that the above mentioned integral representation with a measure supported in k does not necessarily ex tend to bp example 3 14 let a r x b r x 3 k r and p x 1 x 4 thus bp r x 4 consider now the linear functional on b given by evaluation at the point 1 that is l b b 1 it is clear that l admits an integral representation given by 1 the dirac delta at 1 we now define a new linear functional l on bp by l c c 1 c 4 where c 4 denotes the coefficient of c in x 4 observe that l extends l since c 4 0 whenever c r x 3 and that l is k positive for if c r x 4 and c x 0 in r then c 4 0 and consequently l c 0 if l admitted an integral representation over k with measure then 0 l x 2 2 x 1 l x 1 2 l x 1 2 k x 1 2 d would imply that x 1 inside the support of that is k 1 on the other hand the polynomial q x x 4 x 3 satisfies l q 1 6 0 k q d this contradiction shows that in general one cannot expect that 3 3 extends to l in the case at hand the explanation lies in the support of which in this case extends beyondk into k k and therefore k k 1 0 we now present a special instance of theorem 3 8 of independent interest it deals with the case of a closed subset k of the character space x a of the form k k 1 k 2 with k 1 compact and k 2 closed that is k is of cylindrical shape with compact base we will focus on the specific case of polynomials in two variables x rm and y rn concretely we have the following application of theorem 3 8 theorem 3 15 let a r x y with x x 1 xm and y y 1 yn and let k k 1 r n rm rn x a with k 1 com pact in rm also let d n b r x y 2 d 1 and let p x y be a nonnegative polynomial of degree 2 d in y assume that l b r is a k positive linear functional with a k positive extension to bp then there exists a positive radon measure which is a k representing measure for l proof let q x y 1 p x y given a polynomial b b written as b x y b 0 x b 1 x y b 2 d 1 x y 2 d 1 let ci supx k 1 bi x 16 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann i 0 1 2 d 1 and let c max c 0 c 1 c 2 d 1 for every b b and x y k 1 r n we have b x y q x y c 0 c 1 y c 2 d 1 y 2 d 1 q x y since q has degree 2 d in y and is bounded below by 1 it is clear that we can find a positive constant which depends upon b such that b x y q x y as needed for 3 2 the result now follows from theorem 3 8 we conclude this section with a brief discussion of a link between the orems 3 7 and 3 8 and a generalization of haviland s theorem 36 due to m marshall theorem 3 16 cf 62 3 2 2 generalized haviland theorem let a be a unital commutative r algebra and let k be a closed subset of x a suppose that there exists p a such that p 0 on k and for each integer i 1 the set ki x k p x i is compact then for any k positive linear functional l a r there exists a positive radon measure supported in k such that l a a d for all a a the element p in theorem 3 16 creates an ascending chain of compact subsets of k that is k i 1 ki as a result k is compact when p is bounded as a continuous function on k say p m for some positive integer m it is easy to see that k is compact for k km in that case we can then appeal to theorem 3 7 to find the positive radon measure that represents l however in the general case of k non compact we have not been able to apply theorem 3 8 to obtain a new proof of theorem 3 16 we believe this should be possible 4 support of the representing measures our main results theorems 3 7 and 3 8 deal with the existence of a rep resenting measure with prescribed support of a positive linear functional on linear subspaces of a in practice it is usually desirable to have some more information about the support of the representing measure in fact when dealing with a finite dimensional linear subspace b of r x v tchakaloff established that the support of the representing measure is finite and its cardinality is bounded by the dimension of b see 80 theorem ii 5 the orem 2 and 70 the main tool enabling us to provide in this case a more precise description for the support is carathe odory s theorem 4 1 a generalization of tchakaloff s theorem we aim to provide the following generalization of the celebrated theorem of tchakaloff 80 theorem ii the truncated moment problem for commutative r algebras 17 theorem 4 1 let k be compact and b a linear subspace of c k with dimb n let l b r be a linear functional such that l 1 1 l and l b 0 for all b b then there exist x 1 xm k and 1 m 0 m n with m i 1 i 1 such that m i 1 i xi is a k representing measure for l where x is the dirac measure at x theorem 4 1 can be derived from the choquet bishop de leeuw theorem as we now discuss the state space of b is the subset of the dual b of b given by s b l b l 1 1 l l b 0 for all b b s b is a closed and convex subset of the unit ball in b and hence it is compact in the weak topology the evaluation map e k s b which sends every x k to ex the evaluation at x is a topological em bedding by the krein milman theorem 4 1 s b co ext s b where co ext s b denotes the closure of the convex hull of the extreme points of s b we briefly pause to give a different description of s b lemma 4 2 for k compact and b a linear subspace of c k we have s b co e k proof since e k s b and s b is a compact and convex subset of the unit ball in b with respect to the weak topology it is clear that c co e k s b for the other inclusion recall first that since b is a locally convex topological vector space we know that b is isometrically isomorphic to the dual of its dual equipped with the weak topology in symbols 4 2 b w b cf 14 theorem 8 1 4 suppose now that there exists a linear functional l 0 s b such that l 0 c the singleton l 0 is a weak compact set satisfying l 0 c it follows that there exists b w and a real number such that l 0 and l for every l c cf 27 corollary 2 2 3 by 4 2 there exists f b such that l l f for all l b and in particular for all ex e k therefore f x l f for all x k we then have f 0 on k since l 0 s b we must have l 0 f 0 that is l 0 f a contradiction 18 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann by lemma 4 2 and 4 1 we now see that ext s b e k for amongst all closed subsets f of s b with the property that co f s b the set of extreme points is the smallest cf 14 theorem 8 4 6 the choquet boundary of k with respect to b is defined as chk b e 1 ext s b k the choquet bishop de leeuw theorem states that for every l s b there exists a measure not necessarily radon supported in chk b such that l b b d for all b b and chk b 1 then theorem 4 1 is an immediate consequence of the choquet bishop de leeuw theorem and provides the desired generalization of tchakaloff s theorem as well as its versions in 21 22 23 28 thus lemma 4 2 and the subsequent discussion can be regarded as a generalization of tchakaloff s theorem 80 theorem ii on the other hand it was proved in 5 see also 70 73 corollary 1 25 and 25 theorem 6 that a soluble b truncated moment problem with b finite dimensional linear subspace of c k and k locally compact always admits a finitely atomic representing measure 4 2 classes of measures for the space of polynomials r x regarded as a linear subspace of c k with k compact in r we know that r x is dense in l 1 if and only if is an extremal point of the unit ball of the space of measures on k that is a dirac delta the result below attempts to mimic this when r x is replaced by an arbitrary linear subspace b of a in other words think of b as providing a generalization of the space of polynomials this naturally leads to the notion of equivalence relation defined below let a c k with k compact it is well known that every state l s a is representable via a positive radon measure supported in k i e l a l a a d for all a a this is the riesz markov kakutani theorem 14 4 3 8 theorem on the other hand every linear subspace b of a containing 1 not neces sarily finite dimensional induces an equivalence relation on s a denoted by b and defined by l 1 b l 2 l 1 b l 2 b note that if l 1 b l 2 then for every t 0 1 and b b l 1 b tl 1 b 1 t l 2 b l 2 b so equivalence classes of b are convex moreover if l is a convergent net of b equivalent states in weak topology then for every b b and any l l b lim l b l b so the truncated moment problem for commutative r algebras 19 equivalence classes are also closed and hence compact by the krein milman theorem l b is the closure of the convex hull of its extreme points the following result characterizes the extreme points of b equivalence classes in terms of representing measures this was originally proved by naimark 64 for the algebra of polynomials the proof given here is a modification of 1 theorem 2 3 4 due to gelfand in fact gelfand proved this for b c z here we adapt his proof to the case of a general b theorem 4 3 let k be compact and b c k the linear functional l l is an extreme point of l b if and only if b 1 l 1 proof suppose that b 1 6 l 1 let b l 1 b 0 b is defined accordingly since b 1 b we conclude that b 6 0 take 0 6 b l 1 l there exists a non constant f l such that g gf d for all g l 1 without loss of generality assume f 1 and let 1 f observe that 0 then 1 2 and for every b b b d b 1 f d b d bf d b d b b d thus l l b and l can not be an extreme point a contradiction hence b 1 l 1 suppose that l is not an extreme point of l b then 1 2 1 2 for some 1 6 2 whose corresponding functionals l 1 l 2 l b and as a consequence i 2 i 1 2 therefore i 2 and by the radon nikodym theorem there exist positive measurable functions f 1 6 f 2 such that g d i gfi 2 d for all g l 1 i 1 2 since l 1 l 2 l b we get b f 1 f 2 2 d l 1 b l 2 b 0 for all b b thus 0 6 f 1 f 2 l b which implies that b b 1 6 l 1 a contradiction 5 full moment problem versus truncated moment problem in this section we prove an analogue of j stochel s theorem 78 about the connection between full and truncated moment problems in the gen eral setting of unital commutative r algebras see definition 3 1 stochel proved that the full moment problem for a linear functional l r x r has a solution if and only if for each k n the truncated moment problem for l r x k has a solution recall that r x k denotes the space of all polynomials in r x of degree at most k 20 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann the following gives a version of stochel s theorem in the more general framework of unital commutative r algebras see theorem 5 2 definition 5 1 let be a directed set a family b is said to be subcofinal if for any infinite directed b is cofinal in b i e for every there exists such that and b b let k x a be a locally compact closed set a subcofinal family b of linear subspaces of a is called a truncated k frame if 1 lim b a where lim b b 2 1 b for all and 3 for every f b there exist and pf posb k such that f p f c 0 k where c 0 k denotes the algebra of continuous real valued functions on k that vanish at infinity since c 0 k cb k we equip c 0 k with the norm k in 2 1 making it a banach algebra it is easy to show that a subnet of a k frame is a k frame for k x a closed we denote by m k the space of all signed radon mea sures supported in k and by m k the cone of positive radon measures supported in k we endow m k with the weak topology theorem 5 2 let k be a locally compact closed subset of x a and l a linear functional on a such that l 1 0 the full k moment problem for l a r has a solution if and only if there exists a truncated k frame b such that every l l b has a k representing measure proof is trivial so we only prove suppose that there exists a truncated k frame b such that for each there exists a measure m k with l a a d for all a b therefore f d k f 1 d l 1 k f for every f c 0 k which im plies that lies in the polar u of u f c 0 k k f 1 l 1 since the banach alaoglu bourbaki theorem ensures the compactness of u in m k endowed with the weak topology there exists a subnet of which converges to a measure in m k in the weak topol ogy let g posa k by the inner regularity of we have that k g d lim sup c k compact c g d lim sup c k compact lim c g d sup k g d which is finite since k g d is a subset of the compact set u where is the continuous functional on m k defined by k g d the truncated moment problem for commutative r algebras 21 thus g m k moreover since c 0 k is an ideal in c k for every f c 0 k we get f g c 0 k and hence lim f g d f g d i e lim g g in the weak topology now b is a k frame as a subnet of the k frame b therefore by 1 in definition 5 1 we have that for every q a there ex ists 0 such that q b for all 0 in also by 3 in definition 5 1 there exist with 0 and pq posb k such that q p q c 0 k hence l q lim 0 l q lim 0 q d lim 0 q p q p q d q p q p q d q d which proves that represents l as an integral over k remark 5 3 it is clear that for any closedk rn the sequence r x d d n is a truncated k frame in r x indeed the subcofinality of r x d d n follows from the fact that any infinite subset of n is cofinal in it 1 and 2 in definition 5 1 are obviously verified and 3 is easily fulfilled by taking pf x 1 x 2 f 2 x thus stochel s theorem 78 theorem 4 follows from theorem 5 2 we now establish a link with a result of m putinar and f h vasilescu dealing with truncated moment problems in rn more precisely we apply theorems 3 8 and 5 2 to obtain a new proof of the main result in 69 the setup is as follows let g g 1 gs be a finite collection of polynomials in r x and define the rational function g by g x 1 1 x 21 x 2 n g 1 x 2 gs x 2 x rn moreover denote by r g the r algebra generated by r x and g observe that g 1 is a polynomial of even degree d max 2 2 deg g 1 2 deg gs before we state and prove the putinar vasilescu result we briefly recall a criterion for a rational function f r g to be nonnegative on k lemma 5 4 62 theorem 6 2 3 let s be a finite subset in r x and t the preorder ks generated by s suppose p r x p 6 0 p 1 t and there exist integers k 0 such that kp ni 1 x 2 i 0 then for any f r x 1 p f pk f r x k n 0 the following statements are equivalent 1 f 0 on k 2 there exists an integer m such that for all real 0 f pm t 1 p t pk t t k n 0 theorem 5 5 cf 69 theorem 2 5 let g and r g be defined as above and let r g r be a linear map such that satisfies r 2 0 22 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann and gkr 2 0 whenever r r g and k 1 s then has a positive radon representing measure whose support is in the semialgebraic set s k 1 g 1 k r proof recall the notation and terminology used in theorem 3 8 we let a r g and k s k 1 g 1 k r observe that a is a unital commutative r algebra and that k x a is closed for every n n 0 we let bn span q g n 0 and deg q d n 1 observe that bn is a linear subspace of a that b 0 b 1 bn and that 1 b 0 moreover x 1 xn b 0 and g b 0 it follows that the algebra generated by bn is a for each n n 0 also a is the increasing union of the linear subspaces bn we now let pn g n 1 it is clear that pn a bn that pn r x that p n 1 on k and that deg pn d n 1 in figure 1 we give a visual representation of b 0 b 1 and bn deg q 0 d 2 d 3 d 4 d 1 g g 2 g 3 b 0 b 1 deg q 0 d n 1 d n 2 d n 3 1 g g 2 g 3 r r r r r r r r r r r r r r r r r bn figure 1 on the left diagram of b 0 green dots and b 1 blue squares on the right diagram of bn black diamonds we wish to apply theorem 3 8 to bn a k pn and the linear functional ln bn to do this we first establish that ln is k positive observe that r x 1 p coincides with r g if we let s g 1 gs and p 1 g let f r g and assume that f 0 on k by lemma 5 4 there exists an integer m such that for all 0 f pm t 1 p it follows that ln f p m ln f ln p m 0 for all 0 this readily implies that ln f 0 next we need to ensure that condition 3 2 holds for every b bn as we know from remark 3 9 it suffices to prove condition 3 4 in turn since bn is the span of elements of a of the form q g with deg q d n 1 the truncated moment problem for commutative r algebras 23 we need to prove that quotients of the following form are bounded on k q g p n x q 1 x 21 x 2 n g 1 x 2 gs x 2 1 x 21 x 2 n g 1 x 2 gs x 2 n 1 q 1 x 21 x 2 n g 1 x 2 gs x 2 n 1 but this is clear from the requirement on deg q for membership inbn since ln admits a k positive extension to bn p namely ln 1 theorem 3 8 guarantees the existence of a positive radon measure n whose support is contained in k and such that ln b k b d n for all b bn having established the existence of a k representing measure for on each bn we now apply theorem 5 2 to the subcofinal family of linear subspaces bn n n 0 we need to prove that bn is a truncated k frame condi tions 1 and 2 in definition 5 1 clearly hold that is limn bn n bn a and 1 bn for all n n 0 as for condition 3 we easily verify that b p n 1 c 0 k for all b bn thus all the hypotheses in theorem 5 2 are satisfied using the family of measures n n 0 and therefore we obtain a k representing measure supported in k the approach we used to prove theorem 5 5 works equally well to prove a result of m marshall on the localization of the multiplicative set of powers of a positive polynomial we leave the details to the reader theorem 5 6 cf 62 corollary 6 2 4 with the hypotheses as in lemma 5 4 let l r x 1 p r be a linear functional satisfying l 0 on t 1 p then there exists a positive radon measure supported in k such that l f k f d for all f r x 1 p 6 applications in this section we present a number of applications of our main results ranging from the tmp for point processes to the classical tmp including the so called triangular rectangular and sparse connected tmp and to the subnormal completion problem for 2 variable weighted shifts 6 1 the truncated moment problem for point processes let x be a hausdorff locally compact whose topology has a countable basis hence x is compact denote by cc x the space of all continuous real valued functions compactly supported in x using the notation on page 20 right 24 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann before theorem 5 2 let n x be the subset of all n 0 valued measures in m x i e n x i i xi xi x i n with either i or i n and xi i i without accumulation points we endow m x with the so called vague topology i e the weakest topology on m x such the map m x r 7 x fd is continuous for all f cc x the space n x is a closed subset of m x see 46 lemma 4 4 a point process is a positive radon probability measure on m x which is supported in n x in this section we will study the problem of characterizing point processes in terms of their first few moments namely the truncated n x moment problem this is a long standing problem in the statistical physics literature where it is often addressed as realizability problem see e g 66 and recently in 51 solubility conditions of haviland type were obtained we will use theorems 3 7 and 3 8 to provide solubility criteria for the truncated n x moment problem retrieving some of the main results in 51 to this aim let us first identify the algebra involved in the truncated n x moment problem for any n n and m x we denote by n the symmetric nth power of i e n dx 1 dxn dx 1 dxn and for any fn cc x n we define fn n xn fn x 1 xn n dx 1 dxn we also set f 0 0 f 0 for any f 0 r then it is clear that for any n m n 0 fn cc x n and gm cc x m we have 6 1 fn n gm m fn gm n m let p be the space of all polynomials in the variable in m x and coefficients in cc x i e a p is of the following form a n j 0 fj j n n 0 f 0 r fj cc x j the space p together with the multiplication defined in 6 1 is a unital commutative r algebra proposition 6 1 the space m x is topologically embedded in the character space x p endowed with the weakest topology making all gelfand transforms continuous the truncated moment problem for commutative r algebras 25 proof let us consider the following map m x x p 7 a n j 0 xj fjd j a n j 0 fj j p for any m x x p since for any r and a b p say a n j 0 fj j and b m k 0 gk k we now compute ab n j 0 m k 0 fj gk j k n j 0 m k 0 xj k fj gk d j k n j 0 xj fjd j m k 0 xk gkd k a b also a b n j 0 fj j m k 0 gk k n j 0 xj fjd j m k 0 xk gkd k a b the map is injective as whenever m x satisfy x fd x fd for all f cc x we have the continuity of directly follows from the definition of topologies on x p and m x moreover it is easy to see that m x endowed with the topology induced by x p is homeomorphic to m x for n 1 let us consider now the linear subspace q of p consisting of all polynomials of degree at most n i e q a p a f 0 n j 1 fj j f 0 r fj cc x j j 1 n an immediate consequence of theorem 3 7 is the following corollary 6 2 let k m x be compact and l q r linear there exists a k representing measure for l if and only if l is k positive proof since 1 q the conclusion follows by applying theorem 3 7 for b q and q 1 in 51 the authors consider the factorial nth power n instead of the nth power n we considered above denote by p the set of polynomials defined by replacing n with n in the above definition of p then as sets p p and there is a bijective correspondence between n x positive linear functionals on p andn x positive linear functionals on p hence 26 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann 51 theorem 3 4 proposition 3 9 and theorem 3 10 directly follow from corollary 6 2 in 51 the authors also study the case k n x see 51 theorem 3 14 for the case when x is compact and 51 theorem 3 17 for x non compact we plan to pursue the relation between these two results and theorem 3 8 in a future manuscript 6 2 the classical truncated moment problem theorem 3 8 can be seen as a generalization of the curto fialkow s solution of the classical truncated moment problem 23 theorem 2 2 in two directions 1 it assumes a unital commutative r algebra instead of r x 2 it remains valid for a positive functional over any given linear subspace of r x without extra assumption of finite dimensionality we show in corollary 6 5 how to derive an improved version of 23 the orem 2 2 from theorem 3 8 to see this we need the following lemma lemma 6 3 for every monomial x of degree 2 d or 2 d 1 with d n there exists a polynomial p of degree 2 d 2 such that x p x and p y 1 for all y rn proof decompose 2 such that 1 n and i 0 1 for each i 1 n so x x x 2 if 6 0 then by arithmetic geometric inequality x x x 2 1 n i 1 i xi x 2 6 2 observe now that for any real a and any integer r we have ar 1 a 2 r 1 2 then x 1 n i 1 i 1 x 2 i 1 2 x 2 1 n i 1 i 1 x 2 i 1 2 n i 1 1 x 2 i i p x clearly p y 1 for all y rn moreover if 2 d then 2 l with l 1 thus deg p 2 2 l 1 2 2 d 2 l 2 d 2 if 2 d 1 then 2 l 1 with l n 0 thus deg p 2 2 l 2 2 2 d 1 2 l 1 2 d 2 last but not least if 0 then p x n i 1 1 x 2 i i satisfies all the required properties corollary 6 4 let p r x be a family of polynomials of degree at most k then there exists a polynomial p of degree at most k 1 when k is odd and k 2 if k is even such that p 1 on rn and supy rn f y p y for all f p the truncated moment problem for commutative r algebras 27 recall that for any k n we denote by r x k the space of all polyno mials in r x of degree at most k corollary 6 5 let k rn be closed d n and l be a k positive linear functional on r x 2 d resp r x 2 d 1 then there exists p r x 2 d 2 such that p 1 on k and supy rn f y p y for all f r x 2 d resp for all f r x 2 d 1 hence there exists a k representing measure for l if and only if l admits a k positive extension to bp proof let k 2 d 2 d 1 by corollary 6 4 applied to p r x k we know that there exists p r x 2 d 2 such that p 1 on r n and supy k b y p y for all b r x k then we can apply theorem 3 8 for b p and such a p and get exactly the desired statement corollary 6 5 slightly improves curto and fialkow s result 23 theorem 2 2 because the first requires the existence of a k positive extension to a subspace bp of r x 2 d 2 while the second to the whole r x 2 d 2 when k is compact using theorem 3 7 we can also partly retrieve the following result due to fialkow and nie see 28 theorem 2 2 which is a generalization of a well known result by tchakaloff see 80 theorem i p 129 note that we cannot directly derive from theorem 3 7 that the representing measure is finitely atomic but only that there exists a k representing measure however the reader might find useful to see it as a consequence of our results corollary 6 6 suppose k rn is compact d n h is a linear subspace of r x d such that there exists p h with p x 0 for all x k let l h r be a linear functional that is k positive then there exists a k representing measure for l proof by applying theorem 3 7 for a r x b h and k rn com pact we get the desired conclusion in 28 the linear subspace h in corollary 6 6 is called k full 6 3 triangular rectangular sparse connected truncated mo ment problems we now study some natural connections with the tmp considered by r e curto and l a fialkow 18 19 by m putinar 68 by j nie 65 and by m laurent and b mourrain 57 for convenience we illustrate these special instances of tmp for the two variable case namely we present them as b truncated k moment problems with b r s t and k r 2 closed cf definition 3 1 given a collection of real numbers 2 n 00 10 01 2 n 0 2 n 1 1 1 2 n 1 0 2 n with 00 1 and k r 2 closed the classical 28 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann k tmp consists of finding a positive radon measure supported in k such that ij sitj d 0 i j 2 n in this case is called a k truncated moment sequence of order 2 n and is called a k representing measure for hence the classical k tmp corresponds to the b truncated k moment problem with b span sitj 0 i j 2 n r s t 2 n the reader will easily observe that the powers of monomials in b r s t 2 n can be arranged in a right triangle configuration in n 0 n 0 see figure 2 left diagram this is why the classical tmp is often addressed to as a triangular tmp the rectangular tmp considered by m putinar 68 instead corresponds to the right hand side diagram in figure 2 see also 49 that is one considers b span sitj 0 i m 0 j n for fixed m n n 1 s s 2 t t 2 st 1 s s 2 t st s 2 t figure 2 diagrams of monomial powers in the classical truncated moment problem left and the rectangular trun cated moment problem right both diagrams are actually special cases of the sparse connected tmp considered by m laurent and b mourrain 57 for they focus on mono mial diagrams which are associated with sets c which are both connected and contain the monomial 1 that is a b truncated moment problem for b span c in our terminology a set c is connected if every monomial in c is the endpoint of a staircase path starting at 1 for instance 1 s st is connected see figure 3 but 1 st is not our general setting can also cover the sparse connected tmp in the more general case when there are infinitely moments given in one of the variables this is illustrated in figure 4 where we consider the case c 1 s t st t 2 s 2 t s 3 t the truncated moment problem for commutative r algebras 29 1 s st figure 3 diagrams of monomials for c 1 s st 1 t 2 s st s 2 t s 3 t t figure 4 diagram of monomials for c 1 s t st t 2 s 2 t s 3 t for all the situations described so far if we assume that the goal is to find a representing measure supported in a compact k r 2 then the hy potheses in theorem 3 7 are satisfied as the monomial 1 is always in b and k is compact therefore the riesz functional admits an integral repre sentation via a positive radon measure supported in k provided one can verify that is nonnegative when evaluated on polynomials nonnegative on k recall that the riesz functional b r s t n r is given by p 7 ij pij ij for all p s t ij pijs itj this verification varies from case to case but it typically comes down to checking that in addition to the positivity of the basic moment matrix associated with one needs the pos itivity of the so called localizing matrices which keep track of the support of the representing measure see 19 20 22 a related situation arises in the a tmp considered by nie in 65 in that case as explained in the introduction the prescribed moments correspond to a finite set of monomials a in the variables s and t special attention 30 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann merits the homogeneous case i e when a sk 1 tk 2 k 1 k 2 m and m is an even positive integer one can still build a finite dimensional space b by taking b span a but this time the monomial 1 is not present so one needs to add that to the list of moments doing so is harmless since we know that the associated riesz functional l must satisfy 0 l 1 and by rescaling we can get a solution to nie s a tmp recall that the moment associated with the monomial 1 is 0 0 which describes the total mass of a representing measure if it exists in summary when k is compact as an application of theorem 3 7 we can subsume some important aspects of previous results on the existence of k representing measures for the classical i e triangular tmp putinar s rectangular tmp nie s a tmp and the sparse connected case covered in 57 all of these tmps are concerned with finite collections of moments but our results do allow for infinitely many moments as initial data see e g in figure 4 when k is non compact corollary 6 5 provides for the triangular tmp that the riesz functional r s t n r admits an integral representa tion via a positive radon measure supported in k if and only if has a k positive extension to a certain proper subspace of r s t n 2 a simi lar result can be easily showed for the rectangular and sparse connected k tmp for k non compact and c finite combining corollary 6 4 and theorem 3 8 however this technique will not always provide a solution to the sparse connected k tmp for k non compact and c infinite except when the unboundedness of the degree in one variable is compensated by a compact component of k for example if c 1 s t st t 2 s 2 t s 3 t r s t 2 and k k 1 r with k 1 r compact then l span c r has a k representing measure if and only if l has a k positive extension to bp for any p r s t 3 nonnegative on k see theorem 3 15 we momentarily digress to recall some basic facts about moment matrices and flat extensions naturally associated with each tmp is a moment matrix m m n m n given by m i 1 i 2 j 1 j 2 i 1 j 1 i 2 j 2 for instance when n 3 m 3 00 10 01 20 11 02 10 20 11 30 21 12 01 11 02 21 12 03 20 30 21 40 31 22 11 21 12 31 22 13 02 12 03 22 13 04 the truncated moment problem for commutative r algebras 31 observe that m n 1 m n b b c and recall that m n 1 0 i m n 0 ii b m n w for some w and iii c w m n w 75 cf 18 the matrix m n includes all given moments at least once the posi tivity of m n as a hilbert space operator on a finite dimensional space corresponds to the positivity of the riesz functional on the positive cone generated by polynomials of the form p 2 where p r s t n let r rankm n a fundamental result in tmp theory is the so called flat extension theorem which states that 2 n admits an r atomic represent ing measure if and only if m n admits a flat extension m n 1 that is an extension such that rankm n 1 rankm n r in 18 the columns of m n are labeled using monomials as indices as follows 1 s t s 2 st t 2 s 3 s 2 t st 2 t 3 in this terminology to say that m n 1 is a flat extension of m n means that each column labeled with a monomial of degree n 1 can be written as a linear combination of columns labeled with monomials of degree at most n in both diagrams in figure 5 the monomials in blue represent the columns needed to extend m n and generate a flat extension in the classical and rectangular tmp respectively in the case of the sparse connected tmp the transition from a matrix containing the original moments to a flat ex tension is provided by the so called border of c this is the set c c where c c sc tc a visual description of these sets is given in figure 6 resp figure 7 for the set c of monomials represented in figure 3 resp figure 4 1 s s 2 t t 2 st s 3 s 2 t st 2 t 3 1 s s 2 t st s 2 t s 3 s 3 t s 2 t 2 st 2 t 2 figure 5 diagrams of monomial powers in the classical truncated moment problem left and the rectangular trun cated moment problem right and for their respective flat extensions 32 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann 1 s st s 3 s 2 tt st 2 1 s s 2 t st s 2 t st 2 figure 6 diagrams of monomials for c 1 s st and its flat extension left and for c 1 s st t s 2 s 2 t st 2 right 1 t 2 s st s 2 t s 3 t t 3 st 2 s 2 t 2 s 3 t 2 s 2 t figure 7 diagram of monomials for c 1 s t st t 2 s 2 t s 3 t and for its flat extension c c s 2 st 2 t 3 s 2 t 2 s 3 t 2 the reader will notice that while our theorem 3 8 promotes the given lin ear functional l from the subspaceb tobp thus increasing the linear dimen sion of the subspace by 1 or alternatively by requiring that dim bp b 1 the flat extension theorem demands both a finite dimensional b together with a collection of polynomials that describe each monomial of maximum degree in terms of monomials of lower degree on the one hand to use theorem 3 8 we need to find only one polynomial p satisfying the key prop erty 3 2 on the other hand we need to find several polynomials to claim flatness however the moment matrix m n holds the key since each such polynomial arises from a linear equation involving the columns of the mo ment matrix how the two types of results mesh together is an intriguing the truncated moment problem for commutative r algebras 33 matter in future work we plan to return to this matter and focus on the connections between our results here and the flat extension theorem 6 4 connections with the subnormal completion problem we end this section with a natural connection to the scp for 2 variable weighted shifts studied by r e curto s h lee and j yoon 24 and by d kimsey 47 48 to easily exemplify the connections we will focus on tmp whose representing measures when they exist have support in the nonnegative quadrant r r for the relevant terminology and basic results we refer the reader to 24 and 48 very briefly given an initial finite family of weights one first forms the associated moments the scp then asks for the existence of a positive radon probability measure on the unit square which interpolates these moments now recall that given two double indexed positive sequences of weights k k z 2 both bounded by 1 the 2 variable weighted shift t t 1 t 2 acts on 2 n 20 and is defined by t 1 ek kek 1 t 2 ek kek 2 where ek k n 2 0 is the canonical orthonormal basis for 2 n 20 and 1 1 0 and 2 0 1 the pair t 1 t 2 is said to be subnormal if it is the restriction to 2 n 20 of a commuting pair of normal operators thus subnormality of t 1 t 2 requires that t 1 and t 2 commute and it is easy to check that this is equivalent to 6 3 k 1 k k 2 k for all k n 2 0 subnormality of t 1 t 2 also implies that each ti is subnormal i 1 2 hence for each j n 0 the sequence m j m 0 must be associated with a subnormal unilateral weighted shift similarly for each i n 0 the se quence i n n 0 must be associated with a subnormal unilateral weighted shift as a result the subnormality of the pair t 1 t 2 gives rise to the subnormality of two infinite families of unilateral weighted shifts one family corresponding to the rows of the associated weight diagram for t 1 t 2 and the other family corresponding to the columns a natural question arises beyond the commutativity of t 1 and t 2 and the subnormality of each row and each column in the weight diagram for t 1 t 2 what else is needed for the pair to be subnormal this is the so called lifting problem for commuting subnormals which has been studied extensively by r e curto j yoon and others see for instance the recent survey 15 we recall here a well known characterization of subnormality for unilat eral weighted shifts due to c berger cf 13 iii 8 16 and independently 34 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann established by r gellar and l j wallen 31 w is subnormal if and only if there exists a probability measure supported in 0 w 2 such that k 2 0 2 k 1 tk d t for all k n the sequence k is called the sequence of moments of for 2 variable weighted shifts the appropriate generalization is due to n p jewell and a r lubin 45 a 2 variable weighted shift t 1 t 2 admits a commuting normal extension if and only if there is a probability measure defined on the 2 dimensional rectangle r 0 a 1 0 a 2 ai ti 2 such that k r tkd t r tk 11 t k 2 2 d t 1 t 2 for all k n 2 0 where the moments k are defined by k 1 if k 0 2 0 0 2 k 1 1 0 2 k 1 0 2 k 1 k 2 1 if k z 2 k 6 0 definition 6 7 given m 0 and a finite family of positive numbers m k k k m we say that a 2 variable weighted shift t t 1 t 2 with weight sequences t k and t k is a subnormal completion of m if i t is subnormal and ii t k t k k k whenever k m example 6 8 when m 1 we shall let a 200 b 2 00 c 2 10 d 201 e 2 01 and f 2 10 to be consistent with the commutativity of a 2 variable weighted shifts whose weight sequences satisfy 6 3 we shall always assume af be the moments of 1 are 00 1 01 a 10 b 02 ac 11 be 20 bd and the associated moment matrix is 6 4 m 1 1 a b a ac be b be bd in this case solving the scp consists of finding a probability measure supported in 0 t 1 2 0 t 2 2 0 1 2 such that r 2 sitj d s t ij i j 0 i j 2 in what follows and for simplicity we will specialize to the case m 1 in two variables and show that the condition m 1 0 is sufficient for the existence of a subnormal completion theorem 6 9 24 theorem 5 1 let 1 be a quadratic commutative initial set of positive weights and assume m 1 0 then there exists a quartic commutative extension 3 of 1 such that m 3 is a flat extension the truncated moment problem for commutative r algebras 35 of m 1 and ms 3 0 and mt 3 0 as a consequence 1 admits a subnormal completion t the family 1 is shown in figure 8 a c e b d f figure 8 the initial family of weights 1 the proof of theorem 6 9 given in 24 uses localizing matrices to identify entries of a proposed moment matrix extension of the initial moment matrix m 1 however the scp is a special version of the 0 1 2 tmp with the extra requirement that all moments must be positive and the support of a representing measure must be in the unit square therefore theorem 3 7 will again imply the existence of a representing measure once the positivity of the associated riesz functional on nonnegative polynomials on the unit square can be verified moreover with the aid of theorem 3 7 theorem 6 9 admits a substantial generalization to the case of infinitely many weights located in any finite number of rows and columns provided that the natural assumptions on the subnormality of the unilateral weighted shifts associated with those rows and columns are made for instance consider the case shown in figure 9 below in which two rows the first and the third are infinite and generate subnormal unilateral weighted shifts w 1 and w 3 since b 1 s t s 2 st t 2 and the polynomial 1 is in b observe also that we always have the moment 0 0 1 and k is compact being contained in the rectangle 0 sup k k 0 supk k the existence of a solution to the scp depends on the positivity of the appropriate localized matrices to keep track of k or alternatively on the associated linear functional being positive on the relevant initial collection of nonnegative polynomials acknowledgments r curto was partially supported by a u s nsf grant dms 1302666 and by a 2017 simons foundation visiting professor award he also received travel support from germany s baden wu rttemberg stiftung m infusino is indebted to the baden wu rttemberg stiftung for financial support to this work within the eliteprogramme for postdocs the work of s kuhlmann was partially supported by the ausschuss fu r forschungsfragen aff of the university of konstanz 36 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann 0 0 1 0 0 1 1 1 2 1 3 1 0 2 0 3 1 3 2 3 3 3 0 0 1 0 2 0 0 1 1 1 0 2 1 2 0 1 0 3 figure 9 weight diagram for the subnormal completion problem with two infinite rows the first and the third for each complete square the commutativity condition 6 3 must hold in this case the associated unilateral weighted shifts w 1 and w 3 must be assumed to be subnormal as a necessary condition for the solubility of the subnormal com pletion problem references 1 n i akhiezer the classical moment problem oliver and boyd edinburgh and lon don 1965 2 s albeverio and f herzberg the moment problem on the wiener space bull sci math 132 2008 no 1 7 18 3 d alpay p e t jorgensen and d p kimsey moment problems in an infinite number of variables infin dimens anal quantum probab relat top 18 2015 no 4 14 pp 4 r arens the space l and convex topological rings bull amer math soc 52 1946 931 935 5 c bayer and j teichmann the proof of tchakaloff s theorem proc amer math soc 134 2006 3035 3040 6 yu m berezansky and s n s ifrin a generalized symmetric power moment problem russian ukrain mat z 23 1971 291 306 7 y m berezansky and y g kondratiev spectral methods in infinite dimensional analysis vol ii naukova dumka kiev 1988 in russian english translation kluwer academic publishers dordrecht 1995 the truncated moment problem for commutative r algebras 37 8 h j borchers and j yngvason integral representations for schwinger functionals and the moment problem over nuclear spaces comm math phys 43 1975 no 3 255 271 9 e n brown r kass p p mitra multiple neural spike train data analysis state of the art and future challenges nature neuroscience 7 2004 456 471 10 e caglioti m infusino and t kuna translation invariant realizability problem on the d dimensional lattice an explicit construction electron commun probab 21 2016 no 45 9 pp 11 g choquet lectures on analysis volume ii representation theory w a benjamin inc london 1969 12 a j coleman structure of fermion density matrices rev mod phys 35 1963 668 686 13 j b conway the theory of subnormal operators mathematical surveys and mono graphs vol 36 amer math soc providence 1991 14 j b conway a course in abstract analysis graduate studies in mathematics vol 141 amer math soc 2012 15 r e curto 2 variable weighted shifts in multivariable operator theory in hand book of analytic operator theory k zhu ed chapman hall crc handbooks in mathematics series 2019 pp 17 63 16 r e curto and l a fialkow recursiveness positivity and truncated moment prob lems houston j math 17 1991 603 635 17 r e curto and l a fialkow recursively generated weighted shifts and the subnor mal completion problem integral equations operator theory 17 1993 202 246 18 r e curto and l a fialkow solution of the truncated complex moment problem with flat data memoirs amer math soc no 568 amer math soc providence 1996 19 r e curto and l a fialkow flat extensions of positive moment matrices recur sively generated relations memoirs amer math soc no 648 amer math soc providence 1998 20 r e curto and l a fialkow the truncated complex k moment problem trans amer math soc 352 2000 2825 2855 21 r e curto and l a fialkow a duality proof of tchakaloff s theorem j math anal appl 269 2002 519 532 22 r e curto and l a fialkow truncated k moment problems in several variables j operator theory 54 2005 189 226 23 r e curto and l a fialkow an analogue of the riesz haviland theorem for the truncated moment problem j funct anal 255 2008 2709 2731 24 r e curto s h lee and j yoon a new approach to the 2 variable subnormal completion problem j math anal appl 370 2010 270 283 25 p j di dio the multidimensional truncated moment problem gaussian and log normal mixtures their carathe odory numbers and set of atoms proc amer math soc 147 2019 3021 3038 26 d s dummit and r m foote abstract algebra third edition john wiley sons inc hoboken nj 2004 xii 932 pp 27 r e edwards functional analysis theory and applications dover books in math ematics courier corporation 2012 28 l a fialkow and j nie the truncated moment problem via homogenization and flat extensions j funct anal 263 2012 1682 1700 29 t w gamelin uniform algebras prentice hall inc englewood cliffs nj 1969 38 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann 30 c garrod and j k percus reduction of then particle variational problem j math phys 5 1964 1756 1776 31 r gellar and l j wallen subnormal weighted shifts and the halmos bram criterion proc japan acad 46 1970 375 378 32 m ghasemi m infusino s kuhlmann and m marshall moment problem for sym metric algebras of locally convex spaces integral equations operator theory 90 2018 article number 29 19 pp 33 m ghasemi s kuhlmann and m marshall application of jacobi s representation theorem to locally multiplicatively convex topological r algebras j funct anal 266 2014 no 2 1041 1049 34 m ghasemi s kuhlmann and m marshall moment problem in infinitely many variables israel j math 212 2016 no 2 989 1012 35 m ghasemi s kuhlmann and m marshall application of jacobi s representation theorem to locally multiplicatively convex topological r algebras j funct anal 266 2014 1041 1049 36 e k haviland on the momentum problem for distributions in more than one di mension ii amer j math 58 1936 164 168 37 w helton and j nie a semidefinite approach for truncated k moment problem found comp math 12 2012 no 6 851 881 38 d henrion and j b lasserre gloptipoly global optimization over polynomials with mathlab and sedumi acm trans math soft 29 2003 165 194 39 m infusino s kuhlmann and m marshall on the determinacy of the moment prob lem for symmetric algebras of a locally convex space in operator theory in different settings and related applications oper theory adv appl 262 2018 243 250 40 m infusino and s kuhlmann infinite dimensional moment problem open questions and applications in ordered algebraic structures and related topics contemporary mathematics 697 2017 187 201 41 m infusino and t kuna the full moment problem on subsets of probabilities and point configurations j math anal appl 483 2020 no 1 123551 42 m infusino s kuhlmann t kuna and p michalski projective limits techniques for the infinite dimensional moment problem arxiv 1906 01691 43 m infusino t kuna j l lebowitz and e r speer the truncated moment problem on n 0 j math anal appl 452 2017 443 468 44 i s iohvidov hankel and toeplitz matrices and forms algebraic theory birkha user verlag boston 1982 45 n p jewell and a r lubin commuting weighted shifts and analytic function theory in several variables j operator theory 1 1979 207 223 46 o kallenberg lectures on random measures institute of statistics mimeo series no 963 1974 47 d kimsey the cubic complex moment problem integral equations operator theory 80 2014 353 378 48 d kimsey the subnormal completion problem in several variables j math anal appl 434 2016 1504 1532 49 d kimsey and h woerdeman the truncated matrix valued k moment problem on r d cd and td trans amer math soc 365 2013 5393 5430 50 m g krein and a a nudel man the markov moment problem and extremal prob lems transl math monographs vol 50 american mathematical society provi dence r i 1977 the truncated moment problem for commutative r algebras 39 51 t kuna j l lebowitz and e r speer necessary and sufficient conditions for realizability of point processes ann appl probab 21 2011 1253 1281 52 r lachieze rey and i molchanov regularity conditions in the realisability prob lem in applications to point processes and random closed sets ann appl probab 25 2015 no 1 116 149 53 j b lasserre global optimization with polynomials and the problem of moments siam j optim 11 2001 796 817 54 j b lasserre moments positive polynomials and their applications imperial col lege press optimization series vol 1 imperial college press london 2010 55 m laurent revisiting two theorems of curto and fialkow on moment matrices proc amer math soc 133 2005 2965 2976 56 m laurent semidefinite representations for finite varieties math program 109 2007 ser a 1 26 57 m laurent and b mourrain a generalized flat extension theorem for moment ma trices arch math basel 93 2009 87 98 58 a lenard states of classical statistical mechanical systems of infinitely many parti cles i arch rational mech anal 59 1975 219 239 59 y g kondratiev t kuna and m j oliveira holomorphic bogoliubov functionals for interacting particle systems in continuum j funct anal 238 2006 no 2 375 404 60 y g kondratiev t kuna and e lytvynov a moment problem for random discrete measures stochastic process appl 125 2015 no 9 3541 3569 61 h kummer n representability problem for reduced density matrices j math phys 8 1967 no 10 2063 2081 62 m marshall positive polynomials and sums of squares math surveys mono graphs 146 amer math soc 2008 63 d j murrell u dieckmann and r law on moment closure for population dynamics in continuous space j theo bio 229 2004 421 432 64 m a naimark extremal spectral functions of a symmetric operator dokl akad nauk sssr 54 1947 7 9 65 j nie the a truncated k moment problem foundations of computational math ematics 14 2014 1243 1276 66 j k percus the pair distribution function in classical statistical mechanics in the equilibrium theory of classical fluids ed h l frisch and j l lebowitz benjamin new york 1964 67 r r phelps lectures on choquet s theorem springer lecture notes springer berlin 1966 2 nd edition 2001 68 m putinar the l problem of moments in two dimensions j funct anal 94 1990 288 307 69 m putinar and f h vasilescu solving moment problems by dimensional extension ann math 149 1999 1087 1107 70 h richter parameterfreie abscha tzung und realisierung von erwartungswerten bl der deutsch ges versicherungsmath 3 1957 147 161 71 w rudin functional analysis 2 nd ed international series in pure and applied mathematics 1991 72 k schmu dgen unbounded operator algebras and representation theory oper theory adv appl 37 birkha user verlag basel 1990 40 rau l e curto mehdi ghasemi maria infusino and salma kuhlmann 73 k schmu dgen the moment problem graduate texts in mathematics springer 2017 74 k schmu dgen on the infinite dimensional moment problem ark mat 56 2018 no 2 441 459 75 j l smul jan an operator hellinger integral russian mat sb 91 1959 381 430 76 j stampfli which weighted shifts are subnormal pacific j math 17 1966 367 379 77 f h stillinger and s torquato pair correlation function realizability lattice model implications j phys chem b 108 2004 19589 19594 78 j stochel solving the truncated moment problem solves the moment problem glas gow math j 43 2001 335 341 79 s torquato and f h stillinger new conjectural lower bounds on the optimal density of sphere packings exp math 15 2006 no 3 307 331 80 v tchakaloff formules de cubatures me canique a coefficients non ne gatifs bull sci math 81 1957 123 134 81 a zalar the truncated hamburger moment problem with gaps in the index set intergral equations operator theory 93 2021 no 3 article number 22 36 pp department of mathematics university of iowa iowa city iowa 52242 1419 usa email address raul curto uiowa edu department of mathematics and statistics university of saskatchewan saskatoon sk s 7 n 5 e 6 canada email address mehdi ghasemi usask ca dipartimento di matematica e informatica universita degli studi di cagliari palazzo delle scienze via ospedale 72 09124 cagliari email address maria infusino unica it fachbereich mathematik und statistik universita t konstanz universita tstrasse 10 78457 konstanz germany email address salma kuhlmann uni konstanz de 1 introduction 2 notation and preliminaries 3 general truncated moment problems 4 support of the representing measures 4 1 a generalization of tchakaloff s theorem 4 2 classes of measures 5 full moment problem versus truncated moment problem 6 applications 6 1 the truncated moment problem for point processes 6 2 the classical truncated moment problem 6 3 triangular rectangular sparse connected truncated moment problems 6 4 connections with the subnormal completion problem references