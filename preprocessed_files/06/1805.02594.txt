ar x iv 1 80 5 02 59 4 v 1 m at h f a 7 m ay 2 01 8 a fixed point theorem for commuting families of relational homomorphisms applications to metric spaces oriented graphs and ordered sets amine khamsi and maurice pouzet abstract we extend to binary relational systems the notion of compact and normal struc ture introduced by j p penot for metric spaces and we prove that for the involutive and reflexive ones every commuting family of relational homomorphisms has a common fixed point the proof is based upon the clever argument that j b baillon discovered in order to show that a similar conclusion holds for bounded hyperconvex metric spaces and then refined by the first author to metric spaces with a compact and normal structure since the non expansive mappings are relational homomorphisms our result includes those of t c lim j b baillon and the first author we show that it extends the tarski s fixed point theorem to graphs which are retracts of reflexive oriented zigzags of bounded length doing so we illustrate the fact that the consideration of binary relational systems or of generalized metric spaces are equivalent ams subject classification 2010 primary 05 06 08 secondary 37 c 25 key words fixed point non expansive mappings normal structure chebyshev s center modular function space relational homomorphisms order preserving maps metric spaces hyperconvex spaces relational systems ordered sets graphs fences zigzags retracts 1 introduction two results about fixed points are very much related one is the famous tarski s theorem 42 1955 every order preserving map on a complete lattice has a fixed point the other is a theorem of r sine and p m soardi 39 41 1979 every non expansive mapping on a bounded hyperconvex metric space has a fixed point indeed as was shown by d misane and the second author 28 1984 see also 32 1985 and 17 1986 if one considers a generali sation of metric spaces where instead of real numbers the distance values are members of an ordered monoid equipped with an involution then the sine soardi s theorem is still valid and for a particular ordered monoid these generalized metric spaces and their non expansive mappings translate into ordered sets and order preserving maps and as a matter of fact hyperconvex spaces correspond to complete lattices since a tarski obtained in fact that every commuting family of order preserving maps on a complete lattice has a common fixed point e jawhari et al 17 considered the question whether in this frame every commuting family of non expansive mappings on a bounded hyperconvex space has a common fixed point discovering that it was still unsettled in the frame of ordinary metric spaces they got a positive answer for countable families j b baillon 5 1986 got a positive answer for arbitrary families acting on ordinary hyperconvex metric spaces the baillon s proof is based upon a clever compactness argument at firt glance this argument works with minor changes for generalized hyperconvex spaces considered in 17 and on an other hand with some extra work it can be adapted to metric spaces endowed date may 1 2019 1 http arxiv org abs 1805 02594 v 1 2 a khamsi and m pouzet with a compact and normal structure as abstractly defined by j p penot 31 1977 spaces which include the hyperconvex ones this extension was done by the first author in 23 in this paper we propose a generalization of the penot s notions in the frame of binary rela tional systems and their relational homomorphisms indeed on one hand the non expansive mappings f acting on an ordinary metric space or a generalized one say e d with dis tance function d from e e into the set r of nonnegative reals or into an ordered monoid v equipped with an involution are relational homomorphisms of the binary relational system e e v v v where v x y e e d x y v for every v belonging to v on an other hand the penot s notions are very easy to define in this frame we prove that if a reflexive and involutive binary relational system has a compact and normal structure then every commuting family of relational homomorphisms has a common fixed point theorem 3 6 as an illustration we get that on a graph which is a retract of a product of reflexive oriented zigzags of bounded length every commuting family of preserving maps has a common fixed point theorem 5 25 tarski s result corresponds to the case of a retract of a power of a two element zigzag characterizations of reflexive and involutive binary relational system with a compact and normal structure are left open this paper is an other opportunity to go beyond the analogy between metric spaces and binary relational sytems we consider gen eralized metric spaces whose values of the distance belong to an involutive heyting algebra or involutive op quantale as it was initiated in 17 in this context the notion of one local retract which is the key in proving our main result fits naturally with the parent notion of hole preserving map our illustration with graphs fits in the case of bounded hyperconvex spaces after this introduction this paper consists of four additional sections section 2 contains the notions of compact and normal structure for relational systems an illustration with a fixed point result is given section 3 contains the notion of one local retract the main property theorem 3 5 is stated theorem 3 6 is given a consequence this property is proved in section 4 section 5 is an attempt to illustrate our main result subsection 5 2 contains the exact relationship between reflexive involutive binary systems and generalized metric spaces over an involutive monoid e g lemma 5 3 and theorem 5 4 in subsection 5 3 the notion of hyperconvexity is recalled notions of inaccessibility and boundedness insuring that hyperconvex spaces have a compact and normal structure are stated corollary 5 6 spaces over a heyting algebra with their main properties are presented theorem 5 8 and theorem 5 9 subsection 5 4 contains the relationship between one local retract and hole preserving maps subsection 5 5 rassembles the results for ordinary metric spaces the case of ordered sets is treated in subsection 5 6 it contains a characterization of posets with a compact structure the case of directed graphs with the zigzag distance is treated in subsection 5 7 it contains a characterization of graphs isometrically embeddable into a product of oriented zigzags theorem 5 21 and our fixed point theorem theorem 5 25 2 basic definitions elementary properties and a fix point result 2 1 binary relations and metric notions we adapt to binary relations and to binary relational systems the basic notions of the theory of metric spaces the trick we use for this purpose consists to denote by d x y r the fact that the pair x y belongs to the binary relation r and to interpret d as a distance d x y and r as numbers a justification is given in subsection 5 1 the basic concepts about relational systems are the following for a set e a binary relation on e is any subset r of e e the restriction of r to a subset a of e is r a r a a the inverse of r is the binary relation r 1 x y y x r the diagonal is e x x a fixed point theorem for commuting families 3 x e a relation r is symmetric if r r 1 the relation r is reflexive if e r a map f e e preserves r if f x f y r whenever x y r the map f preserves a subset a if f a a this amounts to say that it preserves the unary relation a the map f preserves a set e of binary relations r on e if it preserves every member r of e the pair e e e is a binary relational system note that the maps which preserve e are in fact the relational homomorphisms of this system we denote by end e the collection of self maps which preserve e as far we only consider self maps no indexation of e by some index set is required we set e 1 r e e r 1 e and we say that e e e is involutive if e e 1 we say that e is reflexive resp symmetric if each member r e is reflexive resp symmetric for a subset a of e the restriction of e to a is e a r a r e and the restriction of e to a is the binary relational system e a a e a for a subset e of binary relations on a we set p 1 a e r e r a e let r be a binary relation on e and let x e the ball of center x radius r is the set b x r y e x y r let e be a set of binary relations on e we denote by be the set of balls whose radius belong to e that is be b x r x e r e we denote by b e the set of all intersections of members of be and we set b e b e note that as the intersection over the empty set e b e for a subset a of e the r center is the set c a r x e a b x r we set cove a b be a b the diameter of a is the set e a r e a a r the radius of a is the set re a r e a b x r for some x a note that e e and re if e e e we may replace the index e in the previous notations by e e g be b e cove a re a and e a replace be b e cove a re a and e a our notions of center and radius are inspired from the notions of chebyshev s center and radius the elementary properties about center diameter and radius we need are given by the following proposition proposition 2 1 let e e e be a binary relational system a e and r e e then i a c a r iff r a and moreover r a iff r 1 a ii c a r b a r 1 a a iii if r 1 e then c a r b e iv c a r c cove a r whenever r e v re a re cove a and if a e a re a vi e a e cove a provided that e is involutive proof i immediate ii x c a r iff a b x r this latter condition amounts to x b a r 1 a a iii follows immediately from ii iv from the definition of the r center x c a r means that a b x r since r e this inclusion amounts to cove a b x r again from the definition of the r center this means x c cove a r v let r re a then c a r a since c a r c cove a r from iv we have c cove a r cove a hence r re cove a the second assertion is obvious vi trivially e cove a e a conversely let r e a then a b x r for every x a that is a c a r from iv this yields a c cove a r since e is involutive r 1 e hence from ii we have c cove a r b e since a c cove a r it follows cove a c cove a r that is r e cove a by i 4 a khamsi and m pouzet 2 2 compact normal structure and retraction we introduce the notion of compact and normal structure as penot did for metric spaces 31 1977 and we prove a fix point result definition 2 2 a subset a of a binary relational system e is equally centered if re a e a for an example if a is the empty set and e nonempty then a is not equally centered if a a singleton say a then a is equally centered indeed by v of proposition 2 1 we have e a re a if r re a then x x r hence r e a if in addition e is reflexive and involutive cove a is equally centered indeed by v of proposition 2 1 we have e cov a re cov a now if r re cov a then since r is reflexive x x r and thus r e a since e a e cove a by vi of proposition 2 1 r e cove a hence re cov a e cov a and a is equally centered a generalization of this fact is given in lemma 3 3 definition 2 3 a binary relational system e has a normal structure if no a b e distinct from a singleton is equally centered equivalently if a 1 then re a e a definition 2 4 a binary relational system e e e has a compact structure if be has the finite intersection property f i p that is for every family f of members of be the intersection of f is nonempty provided that the intersection of all finite subfamilies of f are nonempty as it is easy to see be has the f i p iff b e has the f i p if f is a family of members of b e associate the family g made of balls which contain some member of f and observe that f g if all finite intersection of members of f are nonempty the same holds for g hence if be has the f i p g the equality f g yields f thus b e has the f i p we have trivially lemma 2 5 if a binary relational system e e e has a compact structure then every chain of members of b e has an infinimum namely the intersection of all members of that chain lemma 2 6 let f be an endomorphism of an involutive binary relational system e e e then i every minimal member a of b e which is preserved by f is equally centered ii if e has a compact structure then every member of b e preserved by f contains a minimal one proof i let a b e and let r re a then a c a r a is nonempty indeed by definition of re a there is some x a such that a be x r and by definition of c a r x c a r this proves our assertion since e is involutive r 1 e hence from iii of proposition 2 1 c a r b e hence a b e assuming that f preserves a it follows a a from the minimality of a this means a c a r that is r e a hence re a e a since e a re a this yields re a e a thus a is equally centered as claimed in order to see that f preserves a observes that f preserves c a r indeed first since f is a relational homomorphism we have f c a r c f a r for x c a r we have a be x r thus f a be f x r that is f x c f a r next from iv of proposition 2 1 we have c f a r c cove f a r to conclude it suffices to prove that cove f a a this assertion follows from the minimality of a indeed since f a a fixed point theorem for commuting families 5 a we have cove f a cove a a it follows f cove f a f a cove f a that is cove f a is preserved by f the minimality of a proves our assertion ii the fact that b e has the f i p implies that b e ordered by reverse of inclusion is inductive lemma 2 5 the subset of b e made of a such that f a a is inductive too the conclusion follows from zorn s lemma corollary 2 7 if e involutive has a compact and normal structure then every endomorphism f has a fixed point for metric spaces this is the result of penot 1979 extending the result of kirk 1965 from corollary 2 7 one can derives proposition 2 8 if e involutive has a compact and normal structure then for every endo morphism f the restriction e f ix f to the set fix f of fixed points of f has a compact and normal structure from this and the previous corollary one deduces by an immediate recurrence that a finite set of commuting maps has a common fixed point this leeds to the question of what happens with infinitely many behind the proof of the above proposition and the answer to the question is the notion of one local retract 3 one local retracts and fixed points an map g e e is a retraction of e if g is an homomorphism of e such that g g g for a subset a of e we say that e a is a retract of e if a is the image of e by some retraction of e we say that e a is a one local retract if for every x e e a is a retract of e a x lemma 3 1 let e e e be a binary relational system and a be a subset of e if e a is a one local retract then for every family of balls be xi ri xi a ri e the intersection over a is nonempty provided the intersection over e is nonempty the converse holds provided that e is reflexive and involutive proof let i be a set let b be xi ri xi a ri e such that b b let a b and let h be a retraction from e a a onto e a the map h fixes a and preserves the relations induced by e on a a we claim that h a b indeed let i i since a be xi ri we have xi a ri and since h preserves the relations induced by e on a a h xi h a ri since h xi xi we get xi h a ri hence h a be xi ri our claim follows suppose that e is reflexive and involutive we show that the ball s property stated in the lemma implies that e a is a one local retract let a e a let b b u r u a a b u r r e we have a b b note that b e if b hence b according to the ball s property b a let a b a we claim that the map h a a a which is the identity on a and send a onto a is a retraction of e a a since h is the identity on a it suffices to check that for every r e and u a 1 u a r implies u a r 2 a u r implies a u r 3 a a r implies a a r the first item holds by our choice of a the second item is equivalent to the first because e is involutive and the third item holds because e is involutif lemma 3 2 let e e e be a binary relational system and a b e 6 a khamsi and m pouzet i if e a is a one local retract of e then it is a one local retract of e b ii if e a is a one local retract of e b and e b is a one local retract of e then e a is a one local retract of e proof the proof relies on the fact that e b a e a for every a b i immediate ii let x e a if x b then since e a is a one local retract of e b it is a retract of e a x if x b then since e b is a one local retract of e it is a retract of e b x by some map g let y g x if y a then g a x is a retraction of e a x onto e a if y a then since since e a is a one local retract of b it is a retract of e a x by some map h the map h g is a retraction of e a x onto e a lemma 3 3 let e x be a one local retract of e if e has a compact structure then e x too if e is involutive and has a normal structure then e x too proof let e e x and e e x r x x r e we prove the first assertion let b be x i r i i i r i e be a family of balls of e whose finite intersections are nonempty for each i i r i ri x x for some ri e the family b be x i ri i i of balls of e satisfies the f i p hence has a nonempty intersection let x b a retraction g from e x x onto e x e will send x into b proving that this set is nonempty we prove the second assertion let a b e we claim that 1 e a e cove a and 2 re a re cove a indeed equality 1 is item vi of proposition 2 1 concerning equality 2 note that inclusion re a re cove a is item v of proposition 2 1 for the converse let r re cove a then there is some x cove a such that cove a be x r since e is a one local retract of e there is a retraction of e x x onto e e x which fixes x let a g x since a cove a be x r a be x r since g fixes a a be a r we claim that a a indeed a be x i r i i i with x i x r i e x for each i i choose ri e such that r i ri x x then cove a a 1 be x i ri i i since x cove a x a 1 since g fixes each x i a g x a 1 since a x a a proving our claim hence r re a from these two equalities we obtain 3 e cov a p 1 x e a and 4 re cov a p 1 x re a proof of 3 by definition p 1 x e a r e r x e a r e a a r e a since a x equality 3 follows then from equality 1 proof of 4 by definition p 1 x re a r e r x re a r e a be a r x for some a a r e a be a r for some a a re a equal ity 4 follows from equality 2 suppose that a is equally centered in e that is e a re a from the equations above we deduce that e cov a re cov a hence cove a is equally centered if e a fixed point theorem for commuting families 7 has a normal structure cove a 1 and since a cove a and a a 1 hence e has a normal structure to prove proposition 2 8 above it suffices to prove proposition 3 4 if e involutive has a compact and normal structure then for every homo morphism f the set fix f of fixed points of f is a one local retract of e thus e f ix f has a compact and normal structure proof let be xi ri xi fix f such that a ibe xi ri is nonempty since every xi belongs to fix f f preserves a according to ii of lemma 2 6 since a is an intersection of balls a contains an intersection of balls a which is equally centered and preserved by f from the normality of e a reduces to a single element that is a fix point of f consequently a fix f according to lemma 3 1 fix f is a one local retract theorem 3 5 if e is involutive reflexive and has a compact and normal structure then the intersection of every down directed family of one local retracts is a one local retract we will prove theorem 3 5 in the next section from it we derive easily our main result theorem 3 6 if e is involutive reflexive and has a compact and normal structure then every commuting family f of endomorphisms of e has a common fixed point furthermore the restriction of e to the set fix f of common fixed points of f is a one local retract of e proof for a subset f of f let fix f be the set of fixed points of f claim 3 7 for every finite subset f of f e f ix f is a one local retract of e proof of claim 3 7 induction on n f if n 0 there is no map hence the set of fixed points is e thus the conclusion holds if n 1 this is theorem let n 1 suppose that the property holds for every subset f of f such that f n let f f and f f f from our inductive hypothesis e f ix f is a one local retract of e thus according to lemma 3 3 e f ix f has a compact and normal structure now since f commutes with every member g of f f preserves fix f indeed if u fix f we have g f u f g u f u that is f u fix f thus f induces an endomorphism f of e f ix f according to theorem the restriction of e f ix f to fix f that is e f ix f is a one local retract of e f ix f since the notion of one local retract is transitive it follows that e f ix f is a one local retract of e let p fix f f 0 and p p according to theorem 3 5 e p is a one local retract of e since p fix f the conclusion follows 4 proof of theorem 3 5 we recall the following basic fact about ordered sets see 11 proposition 5 9 p 33 lemma 4 1 every down directed subset of a partially ordered set p has an infimum iff every totally ordered subset of p has an infimum let e e e which is is involutive reflexiveand has a compact and normal structure let p be the set ordered by inclusion of subsets a of e such that e a is a one local retract of e we will prove the following 8 a khamsi and m pouzet lemma 4 2 the set p is closed under intersection of every chain of its members we claim that with the help of lemma 4 1 it follows that p is closed under intersection of every down directed family of its members this statement is theorem 3 5 indeed observe first that from lemma 4 2 it follows that for every subset x of e the set px a p x a is closed under intersection of every chain of its members if c is such a chain then c c p by lemma 4 2 and trivially x c hence c px next let a be a down directed family of members of p and let x a then a px since px is closed under intersection of every chain of its members lemma 4 1 ensures that a has an infimum in px this infimum must be x in order to prove lemma 4 2 we prove the following lemma 4 3 let e e e be a reflexive and involutive binary relational system with a compact and normal structure let be a cardinal for every ordinal let b e be subsets of e such that 1 b b 1 and e e 1 for every 2 b b and e e for every limit 3 e e e is a one local retract of e and b is a nonempty intersection of balls of e then b b before proving the lemma let us deduce lemma 4 2 from it we argue by induction on the size of totally ordered families of one local retracts of e first we may suppose that e has more than one element next we may suppose that these families are dually well ordered by induction thus given an infinite cardinal let e e be a descending sequence of one local retracts of e from the induction hypothesis we may suppose that the restriction of e to e e is a one local retract of e for each limit ordinal hence we may suppose that e e for each limit ordinal since e is a one local retract of e and e has a normal structure e has a normal structure lemma 3 3 hence either e is a singleton say x or re e e e in both cases e is a ball of e since e is reflexive x x r for any r e hence the first case e be x r e whereas in second case e be x r for some x e r re e e e hence lemma 4 3 applies with b e and gives that e is nonempty let us prove that e e e is a one local retract of e we apply lemma 3 1 let be xi ri i i xi e ri e be a family of balls such that the intersection is nonempty since e is a one local retract of e the intersection b e i i be xi ri is nonempty for every now lemma 4 3 applied to the sequence e b tells us that b e i ibe xi ri is nonempty according to lemma 3 1 e b is a one local retract of e 4 1 proof of lemma 4 3 let a be the collection of all descending sequences a a such that each a is a nonempty intersection of balls of e e included into b set e e e and b b e the sequence b b belongs to a and a is included into b the set b is ordered as follows 5 a a if a a for every since e is a one local retract of e e has a normal and compact structure lemma 3 3 since it has a compact structure every descending sequence in b e has an infimum lemma 2 5 thus there is a minimal sequence a a with a b a fixed point theorem for commuting families 9 we prove first that the sequence of re a is constant see a of sublemma 4 6 let r be the common value we prove next that e a r see b of sublemma 4 6 since e has a normal structure we deduce that each a is a singleton since a is decreasing a a is a singleton too hence b this is the conclusion of the lemma the key argument for the proof of sublemma 4 6 is the following sublemma 4 4 let and a be x r with r e and x e then a be x r for each proof set b be x r for set a a b if and a a otherwise the familly a a belongs to a and satisfies a a since a is minimal we get a a thus a a b for that is a b since a a b for it follows that a b let from the hypotheses of the lemma there is a family b be e x i r i i i with x i e r i e e such that a b for each i i let ri such that ri e r i let b be e x i r i i i b b then a b e from the sublemma above we deduce corollary 4 5 let then a a b e for every b a a if is a limit ordinal c re a re a for every d re a re a for every proof a follows directly from sublemma 4 4 indeed we have a be x i ri hence from sublemma 4 4 a be x r this yields a b b b from e e and a we get a b e b e a this implies a a since a is decreasing we have a a hence a a c let r re a then a be x r for some x a according to sublemma 4 4 we have a be x r since a a x a hence r re a d let r re a and x a such that a be x r from a of sublemma 4 4 we have a b thus x b u a b u r 1 since e e is a one local retract there is some y b u a be u r 1 e this means a be y r which in turns implies r re a sublemma 4 6 a re a is independent of b e a re a for every proof a follows from c and d of corollary 4 5 b let r be the common value of all re a let r r set cr a x e a be x r a r a cr a and a r ar claim 4 7 1 ar is a nonempty intersection of balls of e e 2 ar a 3 ar ar for 10 a khamsi and m pouzet proof of claim 4 7 1 since r re a a be x r for some x a hence x cr a proving that a r is nonempty since e is involutive r 1 e thus from iii of proposition 2 1 cr a is an intersection of balls of e e with centers in a hence a r is a nonempty intersection of balls of e e 2 obvious 3 let by construction of a we have a a let x a r by definition we have a be x r from lemma 4 4 we have a be x r it follows that x cr a since x a x a r this proves that 3 holds from claim 4 7 and the minimality of a we obtain ar a from this it follows that a cr a since this inclusion holds for every r re a we get e a re a this proves that b holds this ends the proof of sublemma 4 6 5 illustrations 5 1 preservation let e be a set for n n n 0 a map f en e is an n ary operation on e whereas a subset en is an n ary relation on e denote by o n resp rn the set of n ary operations resp relations on e and set o o n n n resp r r n n n for n i n with i n define the ith n ary projection eni by setting eni x 1 xn xi for all x 1 xn e and set p e n i i n n an operation f o is constant if it takes a single value it is idempotent provided f x x x for all x e we denote by c resp i the set of constant resp idempotent operations on e let m n n f o m and r n then f preserves if 6 x 1 1 x 1 n xm 1 xm n f x 1 1 xm 1 f x 1 n xm n for every m n matrix x xi j i 1 m j 1 n of elements of e if is binary and f is unary then f preserves means 7 x y f x f y for all x y e if f is a set of operations on e let inv f resp invn f be the set of relations resp n ary relations preserved by all f f dually if r is a set of relations on e let pol r resp poln r be the set of operations resp n ary operations which prreserve all r the operators inv and pol define a galois correspondance the study of this correspondence is the theory of clones 25 5 2 toward generalized metric spaces we restrict our attention to the case of unary operations and binary relations we recall that if and are two binary relations on the same set e then their composition is the binary relation made of pairs x y such that x z and z y it is customary to denote it the set inv 2 f of binary relations on e preserved by all f belonging to a set f of self maps has some very simple properties that we state below the proofs are left to the reader for the construction of many more properties by means of primitive positive formulas see 40 lemma 5 1 let f be a set of unary operations on a set e then the set r inv 2 f of binary relations on e preserved by all f f satisfies the following properties a e r b r is closed under arbitrary intersections in particular e e r c r is closed under arbitrary unions a fixed point theorem for commuting families 11 d if r then r e if r then 1 r let r be a set of binary relations on a set e satisfying items a b d and e of the above lemma we do not require c to make things more transparent denote by 0 the set e set then r becomes a monoid set 1 this defines an involution on r which reverses the monoid operation with this involution r is an involutive monoid with the inclusion order that we denote this involutive monoid is an involutive complete ordered monoid with these definitions we have immediately lemma 5 2 let r be an involutive complete ordered monoid of the set of binary relations on e and let d be the map from e e into r defined by d x y r x y then the following properties hold i d x y 0 iff x y ii d x y d x z d z y iii d y x d x y in 33 a set e equipped with a map d from e e into an involutive ordered monoid v and which satisfies properties i ii iii stated in lemma 5 2 is called a v distance and the pair e d a v metric space this lemma could justify that we write d x y the fact that a pair x y belongs to a binary relation on the set e and then uses notions borrowed to the theory of metric spaces n b from now on we suppose that the neutral element of the monoid v is the least element of v for the ordering in 13 cf p 82 the corresponding v metric spaces are called generalized distance space and the maps d are called generalized metric if e d is a v metric space and a a subset of e the restriction of d to a a denoted by d a is a v distance and a d a is a restriction of e d as in the case of ordinary metric spaces if e d and e d are two v metric spaces a map f e e is a non expansive map or a contraction from e d to e d provided that d f x f y d x y holds for all x y e and the map f is an isometry if d f x f y d x y for all x y e the space e d is a retract of e d if there are two non expansive maps f e e and g e e such that g f ide where ide is the identity map on e in this case f is a coretraction and g a retraction if e is a subspace of e then clearly e is a retract of e if there is a non expansive map from e to e such g x x for all x e we can easily see that every coretraction is an isometry we say that a d a is a one local retract if it is a retract of a x d a x via the identity map for every x e let e d be a v metric space for x e and v v the set b x v y e d x y v is a ball one can define diameter and radius like in ordinary metric spaces but for avoiding a problem with the existence of joins and meets we suppose that v is a complete lattice the diameter a of a subset a of e is d x y x y a while the radius r a is v v a b x v for some x a a subset a of e is equally centered if a r a following penot who defined the notions for ordinary metric spaces a metric space e d has a compact structure if the collection of balls has the finite intersection property and it has a normal structure if for every intersection of balls a either a 0 or r a a this condition amounts to the fact that the only equally centered intersections of balls are singletons 12 a khamsi and m pouzet the correspondence between the notions defined for metric spaces and for binary relational systems is given in the lemma below lemma 5 3 for v v set v x y d x y v and e e v v v then e is reflexive and involutive furthermore a a self map f on e is nonexpansive iff this is an endomorphism of e b e d has a compact structure iff e has a compact structure c for every subset a of e a d a is a one local retract of e d iff e a is a one local retract of e d for every subset a of e a is the least element of the set of v v such that a v equivalently e a v a v also r a v v v re a e a subset a of e is equally centered w r t the space e d iff it is equally centered w r t the binary relational system e proof the first three items are obvious item d let r a by definition r d x y x y a 2 in particular a r let v such that a v this means d x y v for every x y a 2 hence r v this proves that a min v v v e a the verification of the other assertions is immediate item e by item d r a v v v re a and a min v v v e a if re a e a this implies immediately r a a conversely suppose that r a a in this case a hence e a re a if e a re a then since a min v v v e a and r a v v v re a it follows that r a a a contradiction with this lemma in hand theorem 3 6 becomes theorem 5 4 if a generalized metric space e d has a has a compact and normal struc ture then every commuting family f of non expansive self maps has a common fixed point furthermore the restriction of e d to the set fix f of common fixed points of f is a one local retract of e d the fact that a space has a compact structure is an infinistic property any finite metric spaces enjoys it a description of generalized metric spaces with a compact and normal structure eludes us in the next subsection we describe a large class of generalized metric spaces with a compact and normal structure 5 3 hyperconvexity we say that a generalized metric space e d is hyperconvex if for every family of balls b xi ri i i with xi e ri v the intersection i i b xi ri is nonempty provided that d xi xj ri rj for all i j i this property amounts to the fact that the collection of balls of e d has the 2 helly property that is an intersection of balls is nonempty provided that these balls intersect pairwise and the following convexity property 8 any two balls b x r b y s intersect if and only if d x y r s an element v v is self dual if v v it is accessible if there is some r v with v r and v r r and inaccessible otherwise clearly 0 is inacessible every inaccessible element v is self dual otherwise v is incomparable to v and we may choose r v we say that a space e d is bounded if 0 is the only inaccessible element below e lemma 5 5 let a be an intersection of balls of e if a inacessible then a is equally centered the converse holds if e d is hyperconvex a fixed point theorem for commuting families 13 proof suppose that v a is inaccessible according to d of lemma 5 3 r a re a let r re a then there is some x a such that a b x r this yields d a b d a x d x b r r for every a b a thus v r r since v is inacessible v r hence v r a thus v r a suppose that a is equally centered let r such that v r r the balls b x r x a pairwise intersect and intersect with each of the balls whose a is an intersection since e d is hyperconvex these balls have a nonempty intersection any member a of this intersection is in a and verifies a b a r hence r re a since a is equally centered r a v hence v r since v is self dual v r thus v is inaccessible this lemma with the fact that the 2 helly property implies that the collection of balls has the finite intersection property yields corollary 5 6 if a generalized metric space e d is bounded and hyperconvex then it has a compact and normal structure from theorem 5 4 we obtain theorem 5 7 if a generalized metric space e d is bounded and hyperconvex then every commuting family of non expansive self maps has a common fixed point hyperconvex spaces have a simple characterization provided that the set v of values of the distances satisfies the following distributivity condition 9 a b u v a u b v for all u v a and v v b in this case we say that v is an involutive heyting algebra or better an involutive op quantale see 36 about quantales on an involutive heyting algebra v we may define a v distance this fact relies on the classical notion of residuation let v v given v the sets r v v r and r v v r have least elements that we denote respectively by v and v and call the right and left quotient of v by note that v v it follows that for all p q v the set 10 d p q r v p q r and q p r has a least element this last element is p q p q we denote it by dv p q as shown in 17 the map p q dv p q is a v distance let ei di i i be a family of v metric spaces the direct product i i ei di is the metric space e d where e is the cartesian product i i ei and d is the sup or distance defined by d xi i i yi i i i i di xi yi we recall the following result of 17 theorem 5 8 v dv is a hyperconvex v metric space and every v metric space embeds isometrically into a power of v dv this result is due to the fact that for every v metric space e d and for all x y e the following equality holds 11 d x y z e dv d z x d z y a generalized metric space is an absolute retract if it is a retract of every isometric exten sion the space e is injective if for all v metric space e and e each non expansive map 14 a khamsi and m pouzet f e e and every isometry g e e there is a non expansive map h e e such that h g f with this result follows the characterization given in 17 theorem 5 9 for metric spaces over an involutive heyting algebra v the notions of abso lute retract injective hyperconvex and retract of a power of v dv coincide note that if v is accessible in v and v is an involutive heyting algebra then v is accessible in the initial segment v of v indeed if v r s then since by distributivity r v r v r r r v v r v v we have v r v r v 5 4 one local retracts and hole preserving maps let e and e be two v metric spaces if f is a non expansive map from e into e and h is a map from e into v the image of h is the map hf from e into v defined by hf y h x f x y in particular hf y 1 where 1 is the largest element of v for every y not in the range of f a hole of e is any map h e v such that the intersection of balls b x h x of e x e is empty if h is a hole of e the map f preserves h provided that hf is a hole of e the map f is hole preserving if the image of every hole is a hole let b b xi ri i i be a family of balls of e for every x e set vb x r v b xi ri b x r for some i i and hb x vb x we have 12 b x e b x hb x proof let z b and x e we claim that z b x hb x this amounts to d x z hb x due to the definition of hb x this amounts to d x z r for every r v such that b xi ri b x r for some i i let r and i i such that this property holds since z b z b xi ri and since b xi ri b x r z b x r that is d x z r as required for the converse let z x e b x hb x and i i by definition of hb hb xi ri since z b xi h xi z b xi ri since this property holds for every i i z b a hole h of e is finite if x f b x h x for some finite subset f of e otherwise it is infinite a poset is well founded if every nonempty subset contains some minimal element we recall that if a lattice is well founded every element x which is the infimum of some subset x is the infimum de some finite subset in general the order on the heyting algebra v is not well founded still there are interesting examples see subsection 5 6 and 5 7 the following lemma relates holes and compactness of the collection of balls it contains a correction of proposition ii 4 9 of 17 lemma 5 10 if a generalized space e has a compact structure then every hole is finite the converse holds if v is well founded proof let h be a hole then by definition x e b x h x since e has a compact structure x f b x h x for some finite subset hence h is finite conversely let b b xi ri i i be a family of balls of e such that b there are two ways of associating a finite hole to b we may define h v be setting h x ri xi x we may also associate hb by formula 12 this is a hole these hole are finite we conclude by using hb let f be some finite subset of e such that x f b x hb x since v is well founded for each x e there is some finite subset vx of vb x r v b xi ri b x r for some i i such that vb x vx for each x f there is a finite subset ix such that for each r vx a fixed point theorem for commuting families 15 there is some i ix such that b xi ri b x r then i x f ix b xi ri proving that the intersection of finitely many many members of b is nonempty lemma 5 11 a non expansive map f from a v metric space e into a v metric space e is hole preserving iff f is an isometry of e onto its image and this image is a 1 local retract of e proof let d and d be the distances of e and e suppose that f is hole preserving we prove first that f is an isometry let a b e a f a b f b r d a b and r d a b our aim is to prove that r r let h e v defined by setting h z 1 where 1 is the largest element of v if z a b h z r if z a and h z 0 where 0 is the least element of v if z b the intersection of balls b z hf z of e contains b hence the map hf is not a hole of e since f is hole preserving h is not a hole of e the intersection of balls b z h z of e being included into b it is equal to b hence b b a r it follows that r r next we prove that the range a of f is a 1 local retract of e we apply lemma 3 1 let b xi ri i i where xi a ri v be a family of balls of e such that the intersection over e is nonempty let a in this intersection and let h e v defined by setting h z d f z a the intersection of balls b z hf z of e contains a hence hf it is not a hole of e since f is hole preserving h is not a hole hence there is some a in the intersection of balls b z h z of e let b f a then b belongs to i i b xi ri the conclusion that a is a one local retract follows from lemma 3 1 the converse is immediate let h be a hole of e and hf be its image if hf is not a hole of e the intersection of balls b z hf z of e contains some element a since a is a one local retract of e there is a retraction fixing a and sending a onto some element b a let a e such that f a b then a z eb z h z indeed let z e we claim that d z a h z indeed since f is an isometry d z a d f z b and via the retraction d f z b d f z a hf f z h z hence h is not a hole of e contradiction replacing isometries by hole preserving maps in the definition of absolute retracts and injectives we have the notions of absolute retracts and injectives w r t holes preserving maps we recall the following result of 17 theorem 5 12 on an involutive heyting algebra v the absolute retracts and the injective w r t hole preserving maps coincide the class h of these objects is closed under product and retraction moreover every metric space embeds into some member of h by some hole preserving map the proof relies on the introduction of the replete space h e of a metric space e the space e is a absolute retract or not depending wether e is a retract of h e or not further more it allows to prove the transferability of holes preserving maps that is the fact that for every non expansive map f e f hole preserving map g e g there are hole preserving map g f e and non expansive map f g e such that g f f g indeed one may choose e h e we give the key ingredients let e be a v metric space a weak metric form on e is any map h e v such that d x y h x h y for all x y e if in addition h x d x y h y for all x y e this is a metric form we denote by c e resp l e the set of weak metric form resp of metric forms 16 a khamsi and m pouzet let h e the subset of l e consisting of metric forms h such that the intersection of balls b x h x for x e is nonempty if v is an involutive heyting algebra we may equip h e of the distance induced by the sup distance on v dv e we call it the replete space we recall the following result of 17 lemma 5 13 if v is an involutive heyting algebra then e h e defined by x y d y x is a hole preserving map from e into h e futhermore h e is an absolute retract w r t the hole preserving maps i e this is a retract of every extension by a hole preserving map problems 1 let e be a generalized metric space with a compact and normal structure a when a one local retract of e is a retract b when the set fix f of fixed point of a non expansive self map a retract note that if a has a positive answer then spaces with a compact and normal structure are absolute retracts w r t hole preserving maps for these problems it could be fruitful to consider the case of posets there is a vast literature on fix point and this type of questions see 38 4 29 5 5 the case of ordinary metric spaces let r be the set of non negative reals with the addition and natural order the involution being the identity let v r extend to v the addition and order in a natural way then metric spaces over v are direct sums of ordinary metric spaces the distance between elements in different components being the set v is an involutive heyting algebra the distance dv once restricted to r is the absolute value the inaccessible elements are 0 and hence if one deals with ordinary metric spaces unbounded spaces in the above sense are those which are unbounded in the ordinary sense if one deals with ordinary metric spaces infinite products can yield spaces for which is attained on may replace powers with spaces if i is any set r i is the set of families xi i i of reals numbers endowed with the sup distance with that the notions of absolute retract injective hyperconvex and retract of some r i space coincide according to corollary 5 6 a hyperconvex metric space has a normal structure iff its diameter is bounded in fact if a subset a of a hyperconvex space is an intersection of balls its radius is half the diameter no description of metric spaces with a compact and normal structure seems to be known the existence of a fixed point for a non expansive map on a bounded hyperconvex space is the famous result of sine and soardi theorem 3 6 applied to a bounded hyperconvex metric space is baillon s fixed point theorem applied to a metric space with a compact and normal structure this is the result obtained by the first author 23 5 6 the case of ordered sets in this subsection we consider posets as binary relational systems as well as metric spaces over an involutive heyting algebra let p e be an ordered set let e 1 and e e e by definition e is reflexive and involutive for x e set x y e x y and x y e y x this sets are called the principal final resp initial segment generated by x with our terminology of balls of e these sets are the balls b x and b x 1 let v be the following structure the domain is the set 0 1 the order is 0 a b 1 with incomparable to the involution exchange and and fixes 0 and 1 the operation is defined by p q p q for every p q v as it is easy to check v is an involutive heyting algebra if e d is a v metric space then pd e a where x y d x y is an ordered set conversely if p e be an ordered set then the map d e e v a fixed point theorem for commuting families 17 defined by d x y 0 if x y d x y if a b d x y if y x and d x y 1 if x and y are incomparable clearly if e d and e d are two v metric spaces a map f e e is non expansive from e d into e d iff it is order preserving from pd into pd depending on the value of v v a v metric space has four types of balls singletons corresponding to v 0 the full space corresponding to v 1 the principal final segments x y e x y corresponding to balls b x and principal initial segments x y e y x corresponding to balls b x the set v can be equipped with the distance dv given by means of the formula 10 the corresponding poset is the four element lattice 0 1 with 0 1 the retracts of powers of this lattice are all complete lattices this is confirmed by the following fact proposition 5 14 a metric space e d over v is hyperconvex iff the corresponding poset is a complete lattice proof suppose that e d is hyperconvex let and pd e we prove that every subset a has a supremum in pd this amounts to prove that a y e x y for all x a has a least element since e d satisfies the convexity property and 1 b x b x for every x x e since e d satisfies the 2 helly property a x ab x applying again the convexity and 2 helly property wet get that the intersection of balls b x for x a and b y for b a is nonempty this intersection contains just one element this is the supremum of a a similar argument yields the existence of the infimum of a hence pd is a complete lattice conversely let b xi ri i i be a family of balls such that d xi xj ri rj we prove that c i i b xi ri if there is some i i such that ri 0 then xi c if not let a i i ri b j i rj then xi xj for all xi a xj b set c a and observe that c c since 0 is the only inacessible element of v theorem 5 7 applies every commuting family of order preserving maps on a complete lattice has a common fixed point this is tarski s theorem in full posets coming from v metric spaces with a compact and normal structure are a bit more general than complete lattice hence theorem 3 6 on compact normal structure could say a bit more than tarski s fixed point theorem in fact for one order preserving map this is no more as abian brown s fixed point theorem indeed let us recall that a poset p is chain complete if every nonempty chain in p has a supremum and an infimum we prove below that proposition 5 15 if the collection of intersection of balls of a poset p e satisfies the f i p that is be is compact then p is chain complete converse false abian brown s theorem 1 asserts that in a chain complete poset with a least or largest element every order preserving map has a fixed point the fact that the collection of intersection of balls of p has a normal structure means that every nonempty intersection of balls of p has either a least or largest element being the intersection of the empty family of balls p has either a least element or a largest element consequently if p has a compact and normal structure we may suppose without loss of generality that it has a least element since every nonempty chain have a supremum it follows from abian brown s theorem that every order preserving map has a fixed point on an other hand a description of posets with a compact and normal structure has yet to come the proposition above follows from properties of gaps we rassemble below 18 a khamsi and m pouzet a pair of subsets a b of e is called a gap of p if every element of a is dominated by every element of b but there is no element of e which dominates every element of a and is dominated by every element of b cf 15 in other words x ab x y b b y while b x b y for every x a y b a subgap of a b is any pair a b with a a b b which is a gap the gap a b is finite if a and b are finite otherwise it is infinite say that an ordered set q preserves a gap a b of p if there is an order preserving map g of p to q such that g a g b is a gap of q on the preservation of gaps see 29 lemma 5 16 let p e e be a poset then a p is a complete lattice iff p contains no gap b an order preserving map f p q is an embedding preserving all gaps of p iff it preserves all holes of p with values in v 0 iff f p is a one local retract of q c be satisfies the f i p iff every gap of p contains a finite subgap iff every hole is finite proof a let a b be a pair of subsets of e such that every element of a is dominated by every element of b let a y e x y for all x a then trivially a a and every element of a dominates every element of a furthermore a a is not a gap iff a has a supremum thus if p is a complete lattice a has a supremum hence a a is not a gap and hence a b is not a gap conversely if p contains no gap a a is not a gap and thus a has a supremum it follows that p is a complete lattice b suppose that f is an embedding preserving all gaps let h be a hole of p with values in v 0 and hf be its image let a x p h x and b y p h y if there is some a a b b such that a b then since f is an embedding f a f b and hf is a hole of q otherwise b a since h is a hole in p a b is a gap of p since f preserves all gaps of p f a f b is a gap of q it turns out that hf is a gap of q for the converse let a b be a gap of p we claim that f a f b is a gap of q since f is order preserving f a f b we only need to check that there is no element between f a and f b let h p v 0 defined by setting h a if a a h b if b b and h c 1 if c e a b then clearly h is a hole of p since f preserves it hf is a hole of q hence y qb y hf y x a b b f x hf x if follows that f a f b is a hole of q the equivalence with the last assertion is essentially lemma 5 11 c suppose that be satisfies the f i p let a b be a gap if every finite pair a b with a a and b b is not a gap then the finite intersections of a b with a a b b are nonempty from the f i p property the whole intersection a a b b a b is nonempty contradicting the fact that a b is a gap conversely let f be a family of members of be whose finite intersections are nonempty each member of f being an intersection of balls each of the form b x or b y we may in fact suppose that these members are of the form b x or b y hence we may suppose that there are two sets a and b such that f b x x a b y y b since a b contains no finite gap the pair a b is not a gap hence f the equivalence with the last assertion is lemma 5 10 we only mention some examples let be the 3 element poset consisting of 0 with 0 and incomparable to we denote by its dual then the reader will observe that retracts of powers of have a compact and normal structure theorem 3 6 above yields a fixed point theorem for a commuting family of order preserving maps on any retract of power of or of power of but this result says nothing about retract of products of and a fixed point theorem for commuting families 19 these two posets fit in the category of fences a fence is a poset whose the comparability graph is a path for example a two element chain is a fence each larger fence has two orientations for example on the three vertices path these orientations yield the and the from theorem 5 25 proved in subsection 5 8 it will follow theorem 5 17 if a poset q is a retract of a product p of finite fences of bounded length every commuting set of order preserving maps on q has a fixed point since every complete lattice is a retract of a power of the two element chain this result contains tarski s fixed point theorem 5 7 the case of oriented graphs a directed graph g is a pair e e where e is a binary relation on e we say that g is reflexive if e is reflexive and that g is oriented if e is antisymmetric that is x y and x y cannot be in e simultaneously except if x y if e is symmetric we identifies it with a subset of pairs of e and we say that the graph is undirected if g e e and g e e are two directed graphs an homomorphism from g to g is a map h e e such that h x h y e whenever x y e for every x y e e let us recall that a finite path is an undirected graph l e e such that one can enumerate the vertices into a non repeating sequence v 0 vn such that edges are the pairs vi vi 1 for i n a reflexive zigzag is a reflexive graph such that the symmetric hull is a path if l is a reflexive oriented zigzag we may enumerate the vertices in a non repeating sequence v 0 x vn y and to this enumeration we may associate the finite sequence ev l 0 i n 1 of and where i if vi vi 1 is an edge and i if vi 1 vi is an edge we call such a sequence a word over the alphabet if the path has just one vertex the corresponding word is the empy word that we denote by conversely to a finite word u 0 i n 1 over we may associate the reflexive oriented zigzag lu 0 n lu with end points 0 and n where n is the length u of u such that lu i i 1 i i 1 i i 0 n 5 8 the zigzag distance let g e e be a reflexive directed graph for each pair x y e e the zigzag distance from x to y is the set dg x y of words u such that there is a non expansive map h from lu into g which send 0 on x and u on y this notion is due to quilliot 34 35 quilliot considered reflexive directed graphs not necessarily oriented and in defining the distance considered only oriented paths a general study is presented in 17 some developments appear in 37 and 21 because of the reflexivity of g every word obtained from a word belonging to dg x y by inserting letters will be also into dg x y this leads to the following framework let be collection of words over the alphabet extend the involution on to by setting and u 0 un 1 un 1 u 0 for every word in order by the subword ordering denoted by if u 1 2 m v 1 2 n set u v if and only if j ij for all j 1 m with some 1 j 1 jm n let f be the set of final segments of that is subsets f of such that u f and u v imply v f setting x u u x for a set x of words we observe that x belongs to f order f by reverse of the inclusion denote by 0 its least element that is set x y for the concatenation x y uv u x v y then one immediately see that h f 0 is an involutive heyting algebra this leads us to consider distances and metric spaces over h there are two simple and crucial facts about the consideration of the zigzag distance see 17 20 a khamsi and m pouzet lemma 5 18 a map from a reflexive directed graph g into an other is a graph homomorphism iff it is non expansive lemma 5 19 the distance d of a metric space e d over h is the zigzag distance of a reflexive directed graph g e e iff it satisfies the following property for all x y z e u v f u v d x y implies u d x z and v d z y for some z e when this condition holds x y e iff d x y due to this later fact the various metric spaces mentionned above injective absolute retracts etc are graphs equipped with the zigzag distance in particular the distance dh defined on h is the zigzag distance of some graph this facts leads to a fairly precise description of absolute retracts in the category of reflexive directed graphs see 21 the situation of oriented graphs is different these graphs cannot be modeled over a heyting algebra theorem iv 3 1 of 17 is erroneous but the absolute retracts in this category can be 37 the appropriate heyting algebra is the macneille completion of the macneille completion is in some sense the least complete lattice extending the definition goes as follows if x is a subset of ordered by the subword ordering then x x x x is the upper cone generated by x and x x x x is the lower cone generated by x the pair of mappings on the complete lattice of subsets of constitutes a galois connection thus a set y is a lower cone if and only if y y while a set w is an upper cone if and only if w w this galois connection yields the mac neille completion of this completion is realized as the complete lattice w w ordered by inclusion or y y ordered by reverse inclusion in this paper we choose as completion the set y y ordered by reverse inclusion that we denote by n this complete lattice is studied in details in 6 we recall the important fact that sets of the form w for w nonempty coincide with nonempty finitely generated initial segments of jullien 18 hence lemma 5 20 the set n is order isomorphic to the set i ordered by inclusion and made of finitely generated initial segments of in particular n is a distributive lattice the concatenation order and involution defined on f induce a involutive heyting algebra n on n see proposition 2 2 of 6 being an involutive heyting algebra n supports a distance dn and this distance is the zigzag distance of a graph gn but it is not true that every oriented graph embeds isometrically into a power of that graph for example an oriented cycle cannot the following result characterizes graphs which can be isometrically embedded via the zigzag distance into products of reflexive and oriented zigzags it is stated in part in subsection iv 4 of 17 cf proposition iv 4 1 theorem 5 21 for a directed graph g e e equipped with the zigzag distance the following properties are equivalent i g is isometrically embeddable into a product of reflexive and oriented zigzags ii g is isometrically embeddable into a power of gn iii the values of the zigzag distance between vertices of e belong to n a fixed point theorem for commuting families 21 proof i ii iii i i ii the proof relies on the following claim 5 22 every finite reflexive oriented zigzag is isometrically embeddable into gn proof of claim 5 22 let l be a finite reflexive oriented zigzag let n be its number of vertices there is a word u 0 i n 1 such that l is isomorphic to lu 0 n lu let 0 n n be the map defined by i u i where u i if i 0 and u i 0 i 1 otherwise we claim that is an isometry from l equipped with the zigzag distance into n dn that is dl i j dn i j for all i j n it suffices to check that this equality holds for i j in this case dl i j i j 1 in n dn we have 13 dn v v w w for all v n w n indeed due to the definition of the distance in n we have u dn v v w u w as a monoid n is cancellative see lemma 11 of 22 hence dn v v w w thus dn i j dn i i i j 1 i j 1 dl i j as required since n dn is hyperconvex the distance dn is the zigzag distance associated to the oriented graph gn hence the isometric embedding induces a graph embedding with claim 5 22 we may embed isometrically any product of zigzags into a power of gn this proves that ii holds ii iii if g is a product of graphs g i the zizag distance on g is the sup distance on the product of the metric spaces gi dgi thus if g isometrically embeds into a power of gn g dg isometrically embeds into a power of n dn since the distance dn has values in n dg has values in n too hence iii holds iii i the proof follows the same lines as the proof of proposition iv 4 1 p 212 of 17 we use the following property claim 5 23 for each pair of vertices x y e and each word u dg x y let lu be reflexive oriented path with end points 0 and u associated with u the map carrying x onto 0 and y onto u extends to a non expansive mapping fx y u from g onto lu proof of claim 5 23 the proof of the claim relies onto two facts first dlu 0 u u since u dg x y u dg x y hence the partial map carrying x onto 0 and y onto u is a non expansive map from the subset x y of g equipped with the zigzag distance dg into the space associated to the zigzag lu next such a partial map extends to g to a non expansive mapping this is due to the fact that the space associated to lu is hyperconvex it is trivially convex and since each ball in that space is an interval of its domain 0 u any collection of balls has the 2 helly property for the fact that non expansive maps with values into an hyperconvex space extend see 17 let g lu u dg x y and x y e e for each x y e and each word u dg x y let fx y u be a non expansive mapping from g onto lu we claim that the graph g is isometrically embeddable into g by the map f defined by setting for every z e f z fx y u z u dg x y and x y e e 22 a khamsi and m pouzet this map is an isometry indeed first by definition of the product it is non expansive next to conclude that it is an isometry it suffices to check that for every v if dg x y v then dg f x f y v that is for some triple i x y u one has dgi fi x fi y v let v and x y such that dg x y v this amounts to v dg x y since dg x y dg x y there is some u dg x y such that u v we may set i x y u we may note that the product can be infinite even if the graph g is finite indeed if g consists of two vertices x and y with no value on the pair x y that is the underlying graph is disconnected then we need infinitely many zigzags of arbitrarily long length lemma 5 24 every element v of n is accessible proof case 1 v u then n u 0 hence u 0 n 1 set u 0 n 2 n 1 and r u since u u v r on an other hand u u u hence v u u u u u r r hence v is accessible case 2 if v is not of the form u for some u since u is not the emptyset it is a finite join of elements of the form u thus we may suppose that v v 1 v 2 where v 1 u 1 v and v 2 v and furthermore that v 1 v 2 v for all v 1 v 1 according to case 1 there is some r 1 such that v 1 r 1 and v 1 r 1 r 1 let r r 1 v 2 we claim first that v r suppose the contrary according to lemma 5 20 n is a distributive lattice hence from v r we get v v r v r 1 v v 2 v r 1 v 2 contradicting the choice of v 1 next we claim that v r r the operation and distribute theorem 10 in 22 hence r r r 1 v 2 r 1 v 2 r 1 v 2 r 1 v 2 r 1 r 1 v 2 r 1 r 1 v 2 v 2 v 2 since v 1 r 1 r 2 it follows that v r r hence v is accessible theorem 5 25 if a graph g finite or not is a retract of a product of reflexive and directed zigags of bounded length then every commuting set of endomorphisms has a common fixed point proof we may suppose that g has more than one vertex the diameter of g equipped with the zigzag distance belongs to n according to lemma 5 24 it is accessible hence as a metric space g is bounded being a retracts of a product of hyperconvex metric spaces it is hyperconvex theorem 5 7 applies 5 9 bibliographical comments generalizations of the notion of metric space are as old as the notion of ordinary metric space and arises from geometry logic as well as probability ours originating in 17 is one among several the paper 17 contains 71 references e g blumenthal and menger 7 8 9 as well as lawvere 26 to mention just a few it was motivated by the work of quilliot on graphs and posets 34 35 it extended to metric spaces over an involutive heyting algebra more appropriately an involutive op quantale the characterization of hyperconvex spaces due to aronszjan panitchpakdi 3 and the existence of injective envelope obtained for ordinary metric spaces by isbell 16 it contained also a study of hole preserving maps and a characterization of absolute retracts w r t these maps by means of the replete space for more recent developments see 2 6 20 21 22 references 1 abian s brown a a theorem on partially ordered sets with applications to fixed point theorems canad j math 13 1961 78 82 2 abu sbeih m z khamsi m a fixed point theory in ordered sets from the metric point of view topics in fixed point theory 223 236 springer cham 2014 a fixed point theorem for commuting families 23 3 aronszajn n and panitchpakdi p extensions of uniformly continuous transformations and hyperconvex metric spaces pac j math 6 1956 405 439 4 baclawski k a bjo rner a fixed points in partially ordered sets advances in math 31 1979 263 287 5 baillon j b non expansive mapping and hyperconvex spaces fixed point theory and its applications berkeley ca 1986 11 19 contemp math 72 amer math soc providence ri 1988 6 bandelt h j pouzet m the macneille completion of the free monoid over an ordered alphabet preprint pdf 23 pp feb 2006 7 l m blumenthal boolean geometry i rend circ mat palermo 2 1 1952 343 360 8 blumenthal l m theory and applications of distance geometry second edition chelsea publishing co new york 1970 xi 347 pp 9 blumenthal l m menger k studies in geometry w h freeman and co san francisco calif 1970 xiv 512 pp 10 bruck r e a common fixed point theorem for a commuting family of non expansive mappings pac j math 53 1974 59 71 11 cohn p m universal algebra harper row publishers new york london 1965 xv 333 pp 12 demarr r common fixed point theorem for commuting contraction mappings pac j of math 13 1963 1139 1141 13 deza m deza e encyclopedia of distances fourth edition springer heidelberg 2016 xxii 756 pp 14 dress a w n trees tight extensions of metric spaces and the cohomological dimension of certain groups a note on combinatorial properties of metric spaces adv in math 53 3 1984 321 402 15 duffus d rival i structure theory for ordered sets discrete math 35 1981 53 118 16 isbell j r six theorems about injective metric spaces comment math helv 39 1964 65 76 17 jawhari e misane d pouzet m retracts graphs and ordered sets from the metric point of view in combinatorics and ordered sets i rival ed contemporary math vol 57 1986 175 226 18 jullien p sur un the ore me d extension dans la the orie des mots c r acad sci paris se r a b 266 1968 a 851 a 854 19 kabil m pouzet m une extension d un the ore me de p jullien sur les a ges de mots theoretical informatics and applications vol 26 n 5 1992 449 482 20 kabil m pouzet m inde composabilite et irre ductibilite dans la varie te des re tractes absolus des graphes re flexifs c r acad sci paris se rie a 321 1995 499 504 21 kabil m pouzet m injective envelope of graphs and transition systems discrete math 192 1998 145 186 22 kabil m pouzet rosenberg i g free monoids and metric spaces to the memory of michel deza 15 p march 2017 to appear in europ j of combinatorics arxiv 1705 09750 v 1 27 may 2017 23 khamsi m a one local retract and common fixed point for commuting mappings in metric spaces nonlinear anal 27 1996 no 11 1307 1313 24 kirk w a a fixed point for mappings which do not increase distances amer math monthly 72 1965 1004 1006 25 lau d function algebras on finite sets a basic course on many valued logic and clone theory springer monographs in mathematics springer verlag berlin 2006 xiv 668 26 lawvere f w metric spaces generalized logic and closed categories rend sem mat fis milano 43 1973 135 166 1974 27 lim t c a fixed point theorem for families of non expansive mappings pacific j of math 53 1974 487 493 28 misane d re tracts absolus d ensembles ordonne es et de graphes proprie te s du point fixe the se de 3 e me cycle universite claude bernard 14 septembre 1984 29 nevermann p wille r the strong selection property and ordered sets of finite length algebra uni versalis 18 1984 18 28 30 penot j p fixed point theorems without convexity in analyse non convexe 1977 pau bull soc math france me moire 60 1979 129 152 31 penot j p une vue simplifie e de la the orie de la complexite gaz math no 34 1987 61 77 32 pouzet m une approche me trique de la re traction dans les ensembles ordonne s et les graphes proceed ings of the conference on infinitistic mathematics lyon 1984 59 89 publ de p math nouvelle se r b 85 2 univ claude bernard lyon 1985 33 pouzet m rosenberg i g general metrics and contracting operations in graphs and combinatorics lyon 1987 montreal pq 1988 discrete math 130 1994 103 169 24 a khamsi and m pouzet 34 quilliot a homomorphismes points fixes re tractions et jeux de poursuite dans les graphes les ensem bles ordonne s et les espaces me triques the se de doctorat d etat univ paris vi 1983 35 quilliot a an application of the helly property to the partially ordered sets j combin theory serie a 35 1983 185 198 36 rosenthal k i quantales and their applications pitman research notes in mathematics series 234 longman scientific technical harlow copublished in the united states with john wiley sons inc new york 1990 x 165 pp 37 sa dane s graphes et langages une approche me trique the se de doctorat universite claude bernard lyon 1 14 novembre 1991 38 schro der b ordered sets an introduction with connections from combinatorics to topology second edition birkhuser springer 2016 xvi 420 pp 39 sine r c on nonlinear contractions in sup norm spaces nonlinear analysis 3 1979 885 890 40 snow j w a constructive approach to the finite congruence lattice representation problem algebra universalis 43 2000 no 2 3 279 293 41 soardi p existence of fixed points of non expansive mappings in certain banach lattices proc a m s 73 1979 25 29 42 tarski a a lattice theoretical fixed point theorem and its applications pac j of math 5 1955 285 309 department of mathematical sciences university of texas at el paso el paso tx 79968 usa e mail address mohamed utep edu univ lyon university claude bernard lyon 1 umr 5208 institut camille jordan 43 bd du 11 novembre 1918 69622 villeurbanne france et department of mathematics and statistics the university of calgary calgary alberta canada e mail address pouzet univ lyon 1 fr 1 introduction 2 basic definitions elementary properties and a fix point result 2 1 binary relations and metric notions 2 2 compact normal structure and retraction 3 one local retracts and fixed points 4 proof of theorem 4 1 proof of lemma 5 illustrations 5 1 preservation 5 2 toward generalized metric spaces 5 3 hyperconvexity 5 4 one local retracts and hole preserving maps 5 5 the case of ordinary metric spaces 5 6 the case of ordered sets 5 7 the case of oriented graphs 5 8 the zigzag distance 5 9 bibliographical comments references