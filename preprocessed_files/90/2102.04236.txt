demand forecasting in hospitality using smoothed demand curves rik van leeuwen 1 ger koole 2 1 ireckonu olympisch stadion 43 1076 de amsterdam the netherlands 2 department of mathematics vrije universiteit de boelelaan 1111 1081 hv amsterdam the netherlands 1 rik ireckonu com 2 ger koole vu nl november 8 2021 abstract demand forecasting is one of the fundamental components of a suc cessful revenue management system this paper provides a new model which is inspired by cubic smoothing splines resulting in smooth demand curves per rate class over time until the check in date this model makes a trade off between the forecasting error and the smoothness of the fit and is therefore able to capture natural guest behavior the model is tested on hospitality data we also implemented an optimization module and computed the expected improvement using our forecast and the optimal pricing policy using data of four properties from a major hotel chain between 2 9 and 10 2 more revenue is obtained than using the heuristic pricing done by the hotels keywords revenue management forecasting cubic smoothing splines 1 introduction in hospitality revenue management rm systems typically consist of a forecasting model and a decision support model where the success of the system heavily depends on the performance of both models and the interaction between them rajopadhye et al 1999 based on historical reservations a forecast is created which serves as input for decision optimization that determines the rate given a capacity of the perishable product therefore forecasting demand is one of the key inputs for a profitable rm system weatherford kimes 2003 in the strongly related airline industry a 10 increase in forecast accuracy increases revenue by 0 5 3 0 on high demand flights lee 1990 to forecast demand research has been conducted on different types of models such as time series and machine learning techniques claveria et al 2015 the models typically incorporate features such as seasonality or demand fluctuations to increase the forecast accuracy whereas research has predominantly focused on the forecast accuracy to compare the models there has been less focus on the interpretability and explainability in the hospitality industry it is seen as important andrew et al 1990 1 ar x iv 2 10 2 04 23 6 v 2 st at a p 5 n ov 2 02 1 medium sized and larger hotel chains have dedicated teams of revenue managers who determine the rates for future dates they often make their decisions based on gut feeling and information on for example booking pace and occupancy booking pace is defined as the speed at which reservations are made for a check in date to move towards more data driven decision making in the hospitality industry a rm system can support revenue managers as the success of a system highly depends on the willingness of revenue managers to adopt it is important for a system to be transparent also known as a white box system loyola gonza lez 2019 transparency can be created by sharing demand curves with revenue managers a demand curve represents the demand over time until a given check in date hereafter referred to as demand scenario demand requests are typically used to create the demand scenarios as requests are constrained by the capacity of the property and the rate of a room at a specific point in time unconstrained optimisation methods are typically used to forecast demand queenan 2009 the benefit of unconstrained optimisation methods for rm systems is between 0 5 1 0 in terms of revenue growth weatherford polt 2002 the development of demand for a demand scenario is dynamic e g demand usu ally increases over time towards a check in date haensel koole 2010 to capture these dynamics splines are often applied as unconstraining optimisation to forecast de mand because they are sufficiently flexible a spline is a piecewise polynomial function which can extrapolate and is therefore a suitable technique this technique is used in other applications as well e g in water demand models santopietro et al 2020 and cost transportation models rich 2018 the essence of the cubic splines model is applied in this paper which is based on a third degree polynomial as interpolant this paper proposes a white box forecasting framework that takes into account the practical side of rm the cubic smoothing spline model has never been used in the hospitality industry and can also be used on other industries such as the airline and car rental industry the framework is created based on an extensive data analysis in section 3 after a description of the data in section 2 the forecast model is presented in section 4 followed by the decision support model in section 5 the accuracy measurements are given in section 6 the model is tested in a controlled environment in section 7 the empirical results are discussed in section 8 and the conclusion and discussion are presented in section 9 2 data the data is pulled from a property management system pms a system used in the hospitality industry to register and regulate reservations table 1 shows the attributes attached to a reservation person related attributes are not included because of the general data protection regulation gdpr only relevant attributes are shown in the table the hotel that is used for this research has a single room type and therefore room type is not included the rate of a reservation is the total amount however the rate per night may differ if the length of stay is larger than one an additional table is joined to the reservation table where rates for individual nights are stored this one to many relationship between the reservations table and rates table provides individual night rates for this research multi stay reservations are transformed into individual stay nights the individual night rates are used as demand requests to create the demand scenarios 2 reservations with a rate equal to 0 are excluded these are part of a complimentary service where guests stay without a charge these guests are mostly part of the hospitality chain itself or part of marketing campaigns e g social media influencers variable description arrival date date of arrival of reservation departure date date of departure of reservation length of stay number of days between arrival date and departure date booking date date that the reservations was made status status of reservation either stay cancellation or no show rate total amount in euro group boolean indicating part of group reservation source main channel reservation sub source specified channel of reservation market code statistical information on booking and revenue development table 1 reservation attributes and descriptions data of a four properties located in the netherlands united kingdom and united states of america are included from the 1 st of january 2017 until the 31 st of decem ber 2019 with three years of data yearly seasonality and trends over time can be captured the names and locations of the properties are anonymized each property has a minimum and maximum room night rate that a revenue manager can set these settings are displayed in table 2 rate settings minimum maximum step hotel 1 70 170 10 hotel 2 90 240 15 hotel 3 100 250 15 hotel 4 150 450 20 table 2 rate settings by property 3 data analysis the following key performance indicators kpis are used in the hospitality indus try to analyse the performance of a property according to pizam 2010 and mauri 2012 average daily rate adr is the sum of room rates from all the checked out reservations divided by the number of occupied rooms revenue per available room revpar is the sum of room rates from stayed reservations in the hotel divided by the capacity occupancy occ is the ratio between the number of occupied rooms and the capacity although some rooms are out of order or complementary the kpis in this paper are based on the full capacity of the property the results of the data analysis is shown only for hotel 1 since results of the other properties are inline with hotel 1 3 reservations can only have a single status stay canceled or no show on average 74 2 of the nights are marked as stay 23 3 of the nights as canceled and 2 5 of the nights as no show table 3 shows the reservations by status per year in percentages in 2019 the cancellation rate is slightly lower compared to 2017 and 2018 the no show rate is consistent over the years stay cancellation no show 2017 72 97 24 30 2 72 2018 72 82 24 84 2 34 2019 77 02 20 67 2 31 overall 74 22 23 33 2 46 table 3 reservation status by year in percentages the adr by status per year is shown in table 4 over the years the adr increased indicating the room rate increased over time adr for canceled and no show also increased over the years revpar for 2017 2018 and 2019 is 71 9 73 8 and 79 6 respectively revpar only includes reservations with status stay stay cancellation no show overall 2017 98 5 104 8 103 0 100 2 2018 101 4 103 3 103 7 101 9 2019 103 4 106 4 105 6 104 1 overall 101 1 104 7 104 0 102 0 table 4 adr per year by reservation status 3 1 seasonality the hospitality industry is characterised by seasonality throughout the months and days stated by shields 2013 when seasonality is poorly understood it may lead to a slow pace of sales or even lost sales in this section an analysis is presented of the seasonality by month and day 3 1 1 by month table 5 shows the three kpis by month over the available dataset differences over the months are consistent throughout the year for each kpi unlike resort properties in popular vacation destinations chu 2009 this property doesn t experience any kpi fluctuations by month 3 1 2 by day table 6 shows the three kpis by day over the available dataset the property typi cally attracts business guests during the week and leisure guests during the weekend on friday and saturday the occupancy is highest on sunday the occupancy is low est because leisure guests depart on sunday and business guests arrive on monday because of lower demand on sunday the adr is lowest 4 adr revpar occ in jan 101 0 82 8 82 30 feb 101 1 82 0 82 12 mar 101 3 81 3 80 88 apr 101 3 82 1 81 28 may 101 2 82 6 81 50 jun 101 2 82 3 80 87 jul 101 3 80 9 80 23 aug 100 9 80 7 80 08 sep 100 9 81 4 80 81 oct 101 1 84 8 82 74 nov 100 9 84 2 82 37 dec 101 0 82 5 81 52 table 5 kpis per month adr and revpar in local currency adr revpar occ in monday 100 2 80 7 80 53 tuesday 104 3 89 8 86 08 wednesday 106 2 91 9 86 56 thursday 102 7 86 3 83 98 friday 97 4 87 0 89 33 saturday 108 3 101 8 93 96 sunday 84 8 49 2 58 00 table 6 kpi s by day of week from 2017 until 2019 a detail view of adr by day is displayed in figure 1 except sunday there is an increase in adr over the years this trend is present for every day except sundays where there is a decrease in adr over the years the highest variability is on saturday in 2019 a detailed view of occupancy by day is displayed in figure 2 the range of occu pancy by day varies over the years overall 2018 varied less in occupancy compared to 2017 and 2019 for seasonality patterns by day the relationship between the booking day of the reservation and the day of the stay is often analysed this feature is engineered because it is not part of the original dataset table 7 shows the relationship between the day the reservation has been made and the day the guest spent a night at the property for example guests who stay on a monday reserve the most on mondays 19 78 and the least on saturdays 6 5 there is more fluctuation from monday to thursday compared to friday to sunday business travelers tend to book more during weekdays and less during weekend days for weekend days guests tend to book more constantly throughout the week 5 figure 1 metric adr per day of week by year mon tue wed thu fri sat sun mon 19 78 15 82 16 11 16 26 16 39 6 5 9 14 tues 19 4 20 09 15 71 16 02 16 43 5 17 7 18 wed 17 89 20 11 19 69 15 73 14 68 5 06 6 84 thu 16 69 17 78 19 11 18 75 13 74 5 94 7 99 fri 15 52 15 71 15 31 15 8 16 04 9 04 12 57 sat 14 8 15 11 14 82 14 6 14 46 13 02 13 2 sun 14 22 15 08 15 5 15 35 15 04 10 31 14 49 table 7 distribution of reservations per stay day of week rows made on booking day of week in percentages 3 2 lead time lead time is the number of days between the booking date and arrival date this variable is not present in the dataset and is therefore engineered lead time 0 is the last day a guest can make the reservation the maximum lead time is the check in date which is 365 days in the available dataset this range implies reservations can be made one year in advance for analysis purposes the booking horizon is used as the range of making a reservation where 0 is the first day and 365 as the last day to make a reservation by applying the booking horizon time is progressing over an x axis by analysing this feature more knowledge is gained when guests make reservations which is important in demand forecasting only 1 of reservations are made in the range 0 146 days before the check in date around 5 of the reservations are booked between 0 252 days this implies that 95 of the reservations are made in the last 100 days before check in date in the last 7 days before the check in date 27 of the reservations are made in figure 3 the density over the last 100 days before the check in date is shown the cumulative density shows a smooth gradient towards 100 6 figure 2 metric occupancy per day of week by year figure 3 density for lead time 265 365 left individual and right cumulative 7 reservations made at t of the booking horizon for stays on specific day of the week see section 3 1 2 the density of the booking horizon is further analysed by day in the appendix a figure 10 the density doesn t drop at the same time t indicating that the underlying demand until the check in day is influenced by booking day for example for tuesdays fewer reservations are made in weekends whereas for saturdays the density is more granular over the booking horizon 4 model a new method is proposed to forecast the demand in hospitality which estimates a smooth unconstrained curve a demand curve is defined as the number of guests who are willing to buy a product over a period of time in this paper a product is a room for a specific rate the booking horizon is defined from the first day a room can be reserved until check in date t where t 1 t the advantage of this method is that the unconstrained demand curve is estimated without any assumptions on the shape by applying ideas similar to cubic smoothing splines 4 1 cubic splines a spline is a piecewise polynomial function that only contains non negative integer powers of x the polynomials can be determined by spline interpolation where the interpolant is a third degree polynomial spline interpolation is preferred to poly nomial interpolation because it avoids the problem of runge s phenomenon where oscillation occurs at the edges of the interval epperson 1987 a spline s x func tion is defined for a set of n observations xk yk k 1 n where a single y value exists for each x 1 s r r 2 s x is a polynomial of degree 3 of each subinterval xk xk 1 with k 1 n 1 3 s xk yk k 1 n the spline s x is a combination of i for i 1 n 1 polynomials of degree 3 which is defined as s x c 1 x for x 1 x x 2 ci x for xk x xk 1 cn 1 x for xn 1 x xn 1 subjected to several conditions the system can be solved and so the spline function can be defined for a given set of observations these conditions are listed below ci xi yi and ci xi 1 yi 1 i 1 n 1 c i xi c i 1 xi i 1 n 2 c i xi c i 1 xi i 1 n 2 c 1 x 1 0 and c n 1 xn 0 the last condition is known as the natural boundary condition which prevents the spline to oscillate the number of coefficients to be estimated is 4 n 1 because ci ai bix cix 2 dix 3 for i 1 n 1 this form of interpolation is known as cubic splines because the polynomial is a cubic this method can be applied in hospitality where s represents the demand curve for a specific demand scenario value x represents the number of days of the booking horizon and value y represents the number of reservations 8 4 2 cubic smoothing splines when there are multiple y values indicated by the vector y per x the optimization problem changes since the spline cannot be defined in each point of y for a given x therefore a smoothed spline is required given a set of n observations xk yk k 1 k modelled by the relation yk s xk k where k is independent and identically distributed the cubic smoothing spline estimate s of the function s where g represents the smoothing parameter is defined as min 1 g k s k yk 2 g s x 2 dx 2 in equation 2 the first term measures the closeness to the data and the second term penalizes the curvature in the function the smoothing parameter g controls the balance between these terms and should be larger than 0 and smaller than 1 if g 0 it indicates no smoothing and the result function is completely focussed on the data if g 1 it indicates infinite smoothing and the result is a straight function this model is limited due to the inability of adding constraints that represents industry knowledge i e demand cannot drop below zero and dependencies between multiple rates 4 3 linear transformation the essence of the cubic smoothing spline model is transformed into a linear function to avoid quadratic minimization therefore both terms of the minimization function are transformed into linear terms the first term is transformed by taking the absolute value between the data point and fit in doing so the function becomes more robust against outliers the second term is transformed to the second difference d 2 the first difference is defined as dk s xk 1 s xk as long as the second derivative exists and is continuous the second difference is defined the smoothing parameter controls the balance between the two terms and should be larger or equal than 0 and smaller or equal than 1 the linear minimization function is defined as follows min 1 g k ek wk g n k 3 d 2 k 3 the wk variable represents the weight of each distinct y value to reduce the number of constraints the sum of this variable is equal to 1 so the weight per x value is set to 1 divided by the number of y values in k the polynomial is defined as ci ai bix cix 2 dix 3 for i 1 n 1 by transforming it into a linear minimization function this problem can be solved by adding constraints to a linear programming lp model since many lp programs assume that all variables are non negative an extra variable per decision variable e and d 2 is added to model the absolute values ek s xk yk k 1 n ek s xk yk k 1 n d 2 k dk 1 dk k 3 n d 2 k dk 1 dk k 3 n ck xk ck 1 xk k 1 n 1 c k xk c k 1 xk k 2 n 1 c k xk c k 1 xk k 2 n 1 c 1 x 1 0 and c n 1 xn 0 9 ek r k 1 n dk r k 3 n ai bi ci di r i 1 n 1 an additional constraint that is required is the demand to be larger than 0 over the booking horizon if this restriction is not added it implies that rooms are given away for free this constraint is modeled as follows s xk 0 k 1 n at least three distinct x values are required to derive the second difference for the curvature penalty the number of polynomials c is equal to the distinct x values minus 1 each polynomial contains 4 coefficients the error between the data and the fit is denoted by e the number of e decision variables is equal to the number of distinct x values the number of decision variables to model the curvature penalty d is n 2 to model unrestricted decision variables in an lp model an additional decision variable is required dependent on the implementation in total the number of decision variables in the lp model is equal to 4 n 1 n n 2 2 for example when the input includes 4 weeks or 28 days the total number of decision variables is equal to 324 4 3 1 rates observations with multiple y values for a single x can indicate arrivals for different rates on a specific day as multiple rates for a single room are common in the hospitality industry the cubic spline model is adjusted rates are denoted as r for r 1 r given n observations xr k yr k k 1 n r 1 r where yr k represents the number of sales for a given rate on a given day on the booking horizon the spline sr now represents the demand curve for a rate r min 1 gr r k er k wr k gr r n k 3 d 2 r k 4 an additional constraint is added to the lp model to incorporate that people are always willing to book a room if the rate of a room is lower than their willingness to pay haensel koole 2010 for example when a room can be booked for a rate of 300 then that person was also willing to book that room for a rate of 200 or even 100 the rates of 100 200 and 300 are defined as a b and c respectively rate a represents the lowest rate for a room these typical choice sets are defined as the set of alternatives in order of preference for the example choice set a b c imply that guests are willing to spend more than 100 choice set b c imply that guests are willing to spend more than 200 and choice set c imply that guests that are willing to spend 300 or more given choice sets are strictly ordered an additional constraint is added to the linear model sr sr 1 r 1 r 1 the total number of decision variables in the lp model where rates are included is equal to 4 n 1 n n 2 2 r 10 4 4 residuals to assess the goodness of fit the residuals are analysed the residuals are the dif ference between the actual values and estimated values for each t of the booking horizon a transformation to the input values is applied to ensure the residuals are independent of demand arrivals follow an inhomogeneous poisson process with a rate of t lee 1990 consequently it is expected that the standard deviation of the residuals increases and thus the goodness of fit decreases when the rate increases to stabilize the standard deviation the square root of the original data points is taken as input to the model brown et al 2001 this transformation is known as anscrombe transform 5 decision optimization the performance of the forecasting model can be expressed in revenue by applying decision optimization the performance is expressed in revenue since that is the main driver for the hospitality industry dynamic programming dp is a widely studied and adapted technique for decision optimization talluri ryzin 2004 a and tal luri ryzin 2004 b dp uses demand estimates in order to maximize revenue given the capacity of a property this section provides a brief description of the application of dp in hospitality as multiple bookings are not considered per t on the booking horizon to ensure rate changes after each sold item the time is divided into small intervals such that only one booking can be made in an interval the variable rj denotes a rate for j 1 r the different classes are ordered as follows r 1 r 2 rj rr the probability of a booking for rate rj at a time t is denoted as rj t parameter rj t assumes an inhomogeneous poisson process where rj t 1 the system is modeled as a mathematical function of random disturbances and control decisions according to bellman s equation the objective is to find a control policy that maximizes the total expected revenues by solving the value function v which is defined as vt x max j 1 r rj t rj vt 1 x 1 1 rj t vt 1 x 5 by following bellman s principle for optimality the value vt x denotes the total expected value at time t where time t 1 represents the day a room is available for a booking and t t the check in date given capacity x the total expected revenue is obtained by calculating v 1 x given a capacity x when solving the value function v two boundary conditions exist firstly the value function becomes 0 for any t when no capacity is left that is vt 0 0 secondly the value function becomes 0 for any t when there is no time left to make a reservation that is vt x 0 6 accuracy measurement accuracy is measured between the observed value a and the forecasted value f ob servations a used for fitting a model are referred as in sample data points where observations a used to measure accuracy are known as out of sample data points a distinction needs to be made between results that use in sample data points and out of sample data points to measure the accuracy of the model the weighted absolute percentage error wape is applied 11 wape n t 1 at ft n t 1 at 6 amongst the accuracy measurements wape is the most appropriate metric since it takes into account the actuals by weight this metric sets importance on higher values of actual values unlike for example mean percentage error mpe and mean absolute percentage error mape wape is defined when actual demand is zero at time t the mean absolute error mae and mean squared error mse are depended on the capacity of the property itself which blocks the ability to compare properties with each other the result indicates the closeness between the observed values a and forecasted values f demand is assumed to follow a poisson distribution this results in a baseline error due to the variability of the distribution given the demand curves over time for each choice set the decision support model optimises the expected revenue given the capacity left on that t of the booking horizon the revenue of the actual result of a demand scenario is compared to the optimal expected revenue and expressed in percent change to summarize performance is expressed in two ways wape and the revenue percent change the wape is used to express the fit of the demand curve to the data points and revenue percent change indicates the performance of the model from a business perspective 7 simulation to test the validity of the cubic smoothing spline model simulations are performed using sets of three known individual rate classes see figure 4 following the def inition of rates in section 4 3 1 the customer choice set rates are created that is choice set rate class 2 is the sum of individual rate class 1 and 2 and choice set rate class 3 is the sum of individual rate class 1 2 and 3 guests are always willing to spend less for the same type of room and thus the demand is added in the simulations the booking horizon is set to 28 days where t 28 is the check in date figure 4 simulation scenario with demand curves l and customer choice set demand curves r 12 table 8 shows the functions used for the three individual rates rate class 1 represents guests who are looking for the best deal close to the end of the booking horizon demand decreases due to increasing pressure from competition rate class 3 represents business guests who book a room last minute and only make reservations near the check in date rate class 2 is a combination of the two previously mentioned guests and is simulated as constant demand rate curve parameters 1 0 43 sin t 2 0 16 t 3 0 02 exp 18 t table 8 parameters of rate classes used for simulation demand at time t denoted as t is simulated by setting a single rate for a given t of the booking horizon a rate is open by sampling from a trial where each rate class has a chance to be open finally a poison distribution with rate t is applied to perform a simulation of arrivals cancellations or no shows are not included in the simulations implying data isn t generated when maximum capacity is reached to calculate the expected revenue a price is assigned to each rate class the three rates classes and their corresponding prices are defined as r 100 200 300 the expected optimal revenue is 17 327 given a capacity of 100 rooms which has an adr of 173 3 the cubic smoothing spline model is fitted to 50 demand scenarios using two different sets of smoothing parameters the left hand side of figure 5 is the result with smoothing parameters 1 2 3 and the right hand side is the result with smoothing parameters 7 8 9 the optimal expected revenue with smoothing parameters 1 2 3 and 7 8 9 are equal to 16 819 and 17 020 respectively this is equal to an adr of 168 2 and 170 2 respectively figure 5 cubic smoothing spline model based on 50 simulated demand scenarios with two different smoothing parameter settings the original and fitted demand curves are shown in figure 5 where the black lines are the fitted curves and the grey lines the original curves the wape per rate class is 7 16 11 5 and 81 0 with smoothing parameter settings 1 2 3 and 6 11 12 26 and 44 07 with smoothing parameter settings 7 8 9 these results can be marked as in sample of the model a new set of 100 demand scenarios are 13 simulated from the original demand curves to analyze out of sample results the newly simulated demand scenarios are compared to the original demand scenarios and the fitted demand scenarios by the model figure 6 shows per rate class two box plots where the wape with the original demand curves as fitted values is compared to the wape with the demand curves from the model as fitted values the mean as well as the variation are comparable indicating that the lp model is very precise figure 6 out of sample results based on individual demand scenarios expressed in wape for original demand curves and estimated demand curves with smooth ing parameter settings 7 8 9 7 1 sensitivity analysis to test the robustness of the cubic smoothing spline model the relationship between the input and output is analyzed these simulations use the demand curves presented in figure 4 in the simulation setting two input parameters can be changed 1 the number of demand scenarios and 2 the smoothing parameter the output of the model is expressed in wape and revenue see section 6 the number of demand scenarios is one of the input parameters that can be con trolled as there is always a trade off between increase in accuracy and increase in computational time the simulation setup includes 10 to 50 demand scenarios to un derstand the effect of the number of demand scenarios the setup is executed 10 times in total 410 runs are executed the smoothing parameters are fixed for both smoothing parameters settings 1 2 3 and 7 8 9 figure 7 shows the sensitiv ity of the number of demand scenarios with the number of demand scenarios on the x axis and the revenue per simulation set up on the y axis the mean is steady over the range of demand scenarios for both smoothing parameter settings the speed at which the confidence interval narrows decreases slowly when more demand scenarios are included therefore including more demand scenarios lead to a stable result when the demand curves remain equal 14 figure 7 sensitivity analysis regarding number of input demand scenarios with respect to revenue with two different smoothing parameter settings 8 results in this section the results our model from the empirical data are discussed the complete dataset containing data from 2017 to 2019 is used as input first the results are presented second the set up of the model is explained and finally the performance of the model is assessed to provide additional insights about the model and the application of it thursdays of hotel 1 are taken as use case to create the customer choice set the rates from every thursday in 2018 are included the rates range between 70 and 170 a class is defined as 10 units and thus 11 rate classes are present in the data table 9 shows the number of reservations made in the last 28 days before the check in date the customer choice set which is input for the model is defined following the definition in section 4 3 1 rate reservations made customer choice set logic 70 201 2508 80 316 2192 90 481 1711 100 449 1262 110 362 900 120 256 644 130 246 398 140 126 272 150 87 185 160 55 130 170 75 75 table 9 number of reservations for every thursday in 2018 as 2018 counts 52 thursdays 52 demand scenarios are included therefore the smoothing parameters are set lower if more data is available the natural behavior of demand patterns can be best captured by lowering the smoothing parameter the range is between 0 1 for rate 70 and 0 5 for rate 170 using linear interpolation the other parameters are set between 0 1 and 0 5 15 figure 8 shows the demand curves from the cubic smoothing spline model with rate 70 black line and rate 110 gray line the results are in line with the analysis in section 3 the demand is increasing towards the check in date and the demand is decreasing during days in the weekend i e the curves flatten at t 16 17 and t 23 24 figure 8 results of model demand curves for rate 70 and rate 110 8 1 setup to set up the cubic smoothing spline model dates from 2017 and 2018 are used to forecast a date in 2019 dates are only included in the input if the day is smaller as the day that is forecasted if a tuesday is forecasted by the model every tuesday until the forecasted date is used as input the booking horizon is 100 days the last 28 days before check in are forecasted for each date in 2019 the first 72 days of the booking horizon are used to fit the model the optimal expected revenue of the first 72 days is compared with historical dates wape is used to measure the accuracy of the model over the first 72 days a pitfall for only considering the revenue at t 1 72 could be that the behavior of two demand scenarios could deviate extremely in total 15 dates are selected as input for the cubic smoothing spline model figure 9 shows the revenue of thursday the 6 th of june 2019 a randomly chosen date the left hand side shows the revenue for all days in 2017 and 2018 the right hand side shows the dates that are used as input for the model only thursdays note that the scales of the y axes in figure 9 are different in both figures the black line represents the revenue on the 6 th of june 2019 the wape including all days raging between 17 35 and 746 85 with a mean of 116 40 the wape including the dates used as input for the model raging between 17 35 and 27 07 with a mean of 22 57 by taking into account the 15 closest days measured in wape contributes positively to selection of demand scenarios as input for the model 16 figure 9 example of dates selection which serves as input for the model based on the 15 dates as input demand curves are generated per rate class these demand curves per rate are used as input for the decision optimization algorithm to obtain the optimal expected revenue the number of reservations made for the last 28 days of the forecasted data are used as the capacity available the actual revenue is compared with the optimal expected revenue and expressed in percent difference the wape between the actual bookings and demand curves are generated to gather data about the closeness of the fit and actual data points the smoothing parameters remain consistent among results which is linear over 11 rates starting from 0 4 and which a maximum of 0 7 8 2 performance the performance of the model is measured in revenue between the actual revenue and the optimal expected revenue and the wape of the fitted demand scenarios the rate range differs per property based on table 2 in section 2 the results are presented by hotel by day of the week for each of the properties the model generates on average between 2 9 10 2 more revenue the details expressed in mean and standard deviation per property and day of week are presented in table 10 given all day of weeks of the properties 85 7 in a positive result for tuesday and wednesday for hotel 1 and hotel 2 the model did not outperform the actual revenue since the standard deviation is larger than the mean not every forecasted demand scenario ended up in a positive result however overall the forecasting model generates more revenue then hospitality practitioners e g revenue managers 17 hotel 1 hotel 2 hotel 3 hotel 4 monday mean 4 24 3 93 13 66 12 61 sd 15 45 15 95 16 88 20 34 tuesday mean 0 15 5 71 5 87 7 49 sd 16 36 12 48 19 74 18 65 wednesday mean 2 57 3 51 7 22 6 35 sd 12 26 13 83 21 22 19 93 thursday mean 7 53 4 54 12 79 12 31 sd 18 84 18 59 19 34 19 31 friday mean 4 48 6 99 13 32 9 13 sd 15 6 16 05 18 7 17 73 saturday mean 0 09 11 32 9 42 4 61 sd 15 91 17 28 17 99 15 13 sunday mean 6 14 1 49 8 54 9 27 sd 10 51 11 04 15 69 14 9 overall mean 2 92 3 25 10 19 8 89 sd 15 46 16 05 18 57 17 95 table 10 mean and standard deviation of wape by hotel by day of week the dates selection in order to fit the model is executed first which is based on 15 demand scenarios that are the closest in terms of revenue over the booking horizon t 1 72 this closeness is measured in wape over the booking horizon appendix b contains four tables that report the wape per property per day of week per customer choice set in general the mean wape is lower for lower rates and higher for higher rates this is because historically lower rates are set more often therefore more data points are present in the available set for lower rates than higher rates in general there is an increasing trend towards higher rates however this trend decays toward the highest rates the variability amongst rates increases from the lowest towards the highest rates these findings are in line with the results of the simulation where an increasing trend is noticed when less data is available 9 conclusion and discussion this paper proposes a novel method inspired by cubic smoothing splines which makes use of linear programming as input the model uses reservations for specific rates over time as output it provides demand curves per rate over a given booking horizon demonstrating the booking behavior of guests the data analysis shows that demand does not differ significantly throughout the years 2017 2018 and 2019 however booking behavior differs among the day of the week these differences are expressed in standard hospitality kpi s such as adr revpar and occupancy the day of booking with respect to the check in date influences the demand significantly the booking horizon is a variable that is essential for the proposed forecasting framework there is a clear distinction when guests tend to make a reservation for a given day of week the performance of the model is evaluated based on the fit to the data points as well as optimal expected revenue the model claims to generate 2 9 10 2 more revenue based on the forecasted demand curves of each rate the revenue difference is significant but realistic since all the rates are set manually by a revenue management team in terms of wape the model shows similar values as the simulation environ ment for lower rates when moving towards higher rates the wape tends to increase this can be caused by less available data on higher rates 18 hospitality practitioners e g revenue managers can directly benefit from such a white box method by analysing the demand curve per customer choice set until check in date it enables the revenue managers to understand how demand is progressing over time the transparency of this method will help practitioner willingness to adopt a revenue management system to increase revenue on a daily basis more research could be conducted into the smoothing parameters during the simulations and empirical study this parameter was set regardless of the rate when more data points are available the smoothing parameter needs to be set lower to better capture the natural behavior of demand based on the available data the smoothing parameters can be further optimised by setting them for each rate independently more research can also be conducted into the number of fitted polynomials the model takes the number of distinct values t of the booking horizon minus 1 as the number of polynomials to decrease the computational complexity fewer polynomials could be fitted in doing so the impact on the overall performance of the model expressed in wape and revenue need to be researched the set up to retrieve the results requires a warm up period for which t 0 to t 72 of the booking horizon is used for this period days similar to the forecasting date are selected and used there is a potential revenue loss if rm optimisation isn t applied over this period a simple strategy can tackle this warm up period this strategy can forecast if a given date is low medium or high demand for each of these labels a yield policy can be applied to counter the potential revenue loss to further improve the cubic smoothing spline model special events eg concerts or conferences can be included these events tend to occur more often during the weekend days than weekdays adding the events can give more context around the check in dates 19 references 1 lee a airline reservations forecasting probabilistic and statistical models of the booking process flight transportation laboratory report 232 236 1990 2 andrew w p cranage d a lee c k forecasting hotel occupancy rates with time series models an empirical analysis hospitality research journal 14 2 173 182 1990 3 santopietro s gargano r granata f de marinis g generation of water demand time series through spline curves journal of water resources planning and management 146 11 04020080 2020 4 claveria o monte e and torra s a new forecasting approach for the hospi tality industry international journal of contemporary hospitality management 27 7 1520 1538 2015 5 pizam a ed international encyclopedia of hospitality management sec ed oxford butterworth heinemann 2010 6 chu f l forecasting tourism demand with arma based methods tourism management 30 5 740 751 2009 7 haensel s koole g estimating unconstrained demand rate functions using customer choice sets journal of revenue and pricing management 4 3 75 87 2010 8 mauri a g hotel revenue management principles and practices milan pear son 13 511 512 2012 9 talluri k ryzin g revenue management under a general discrete choice model of customer behavior management science 50 1 15 33 2004 a 10 talluri k ryzin g the theory and practice of revenue management springer 2004 b 11 epperson j on the runge example the american mathematical monthly 94 4 329 341 1987 12 rich j a spline function class suitable for demand models econometrics and statistics 14 2018 13 shields j shellemand j small business seasonality characteristics and man agement small business institute journal 9 1 37 50 2013 14 brown l d zhang r zhao l root unroot methods for nonparametric den sity estimation and poisson random effects models techical report the whar ton school univ pennsylvania 2002 15 rajopadhye m ghalia m b and wang p p forecasting uncertain hotel room demand proceeding of the american control conference 132 1 4 1 11 1999 16 loyola gonza lez o black box vs white box understanding their advantages and weaknesses from a practical point of view ieee access 7 1 154096 154113 2019 17 queenan c c ferguson m higbie j kapoor r a comparison of uncon straining methods to improve revenue management systems production and operations management 16 6 2009 18 weatherford l r and kimes s e a comparison of forecasting methods for hotel revenue management international journal of forecasting 19 3 401 415 2003 19 weatherford l r polt s better unconstraining of airline demand data in revenue management systems for improved forecast accuracy and greater revenues journal of revenue and pricing management 1 3 234 254 2002 20 a lead time density by day of week reservations made at t of the booking horizon for stays on specific day of the week figure 10 density for lead time 265 365 per day of week 21 b results per hotel per day of week the tables in this section displays the wape per propery per day of week per customer choice set the indicates no availability of data points in that customer choice set hotel 1 day of week monday tuesday wednesday thursday friday saturday sunday rate 70 20 74 19 78 15 62 21 62 24 93 43 48 27 90 rate 80 30 23 21 82 25 35 28 73 20 58 34 33 33 87 rate 90 42 00 30 82 36 06 31 59 34 52 29 35 81 57 rate 100 48 81 31 38 35 14 36 96 47 16 27 19 77 53 rate 110 77 26 45 29 38 75 45 10 58 58 37 08 47 00 rate 120 115 38 57 70 41 56 59 83 77 39 62 09 63 98 rate 130 147 35 56 80 62 01 62 33 69 72 61 20 176 06 rate 140 93 32 51 70 67 09 66 29 109 50 54 31 63 00 rate 150 62 16 50 27 50 11 72 91 72 33 70 25 61 41 rate 160 64 97 63 64 62 64 78 68 163 97 71 27 81 08 rate 170 50 11 62 80 117 90 45 95 59 67 77 81 56 71 table 11 hotel 1 wape per rate per day of week hotel 2 day of week monday tuesday wednesday thursday friday saturday sunday rate 100 29 98 169 69 16 56 15 69 13 21 35 12 19 39 rate 115 19 60 19 05 14 95 21 29 15 71 17 30 28 51 rate 130 21 52 22 35 26 64 20 15 38 10 19 11 90 64 rate 145 22 67 22 92 21 88 24 59 57 11 16 19 88 27 rate 160 43 08 29 24 30 68 25 58 54 41 24 81 80 00 rate 175 56 79 24 21 29 15 35 37 98 36 36 37 74 99 rate 190 93 91 30 17 33 63 97 33 66 62 47 39 50 00 rate 205 98 16 44 23 40 39 65 84 75 00 81 30 20 00 rate 220 29 81 41 10 49 29 58 00 83 05 240 91 rate 235 88 34 60 80 50 73 78 78 78 86 234 44 rate 250 400 00 85 17 53 90 54 00 77 03 327 24 table 12 hotel 2 wape per rate per day of week 22 hotel 3 day of week monday tuesday wednesday thursday friday saturday sunday rate 90 13 59 20 41 26 64 19 03 24 66 20 16 18 95 rate 105 36 95 34 97 32 87 29 69 18 53 26 03 33 20 rate 120 46 23 34 90 32 55 31 19 28 77 29 36 35 20 rate 135 68 47 30 92 38 65 29 25 33 30 23 82 39 10 rate 150 58 56 54 43 65 75 48 20 50 84 30 62 45 67 rate 165 85 61 55 17 60 07 49 48 56 75 51 36 78 00 rate 180 132 28 61 02 83 50 52 48 50 42 89 83 69 58 rate 195 144 91 51 46 61 34 93 25 58 52 80 19 88 50 rate 210 237 80 58 92 82 08 346 07 96 91 143 16 58 38 rate 225 122 29 111 20 83 40 183 54 130 81 147 50 123 56 rate 240 115 60 141 94 56 05 86 56 72 30 62 82 99 51 table 13 hotel 3 wape per rate per day of week hotel 4 day of week monday tuesday wednesday thursday friday saturday sunday rate 150 19 46 15 04 16 71 13 59 20 10 27 61 19 83 rate 170 31 41 25 02 25 93 24 57 30 86 34 47 30 23 rate 190 34 51 20 79 44 42 22 30 22 41 23 52 36 03 rate 210 27 77 29 31 37 77 25 81 18 79 26 38 93 22 rate 230 26 91 29 59 20 89 26 66 25 83 30 35 196 77 rate 250 31 25 23 20 20 48 32 88 30 41 34 47 64 69 rate 270 48 06 30 80 29 00 37 92 44 77 27 12 42 17 rate 290 56 46 34 08 28 31 44 02 52 49 31 67 67 00 rate 310 50 70 43 13 39 16 49 31 53 06 38 37 61 00 rate 330 73 80 52 48 55 47 52 36 43 42 51 11 56 00 rate 350 47 15 71 16 54 15 77 87 59 83 59 53 53 16 rate 370 57 41 61 25 70 16 96 96 56 74 67 27 78 83 rate 390 79 57 49 21 89 89 51 12 60 46 80 40 92 00 rate 410 53 91 71 24 69 25 32 29 78 33 61 74 rate 430 89 19 339 00 83 38 109 00 41 62 70 98 rate 450 56 57 117 00 67 86 400 00 31 43 26 07 table 14 hotel 4 wape per rate per day of week 23 1 introduction 2 data 3 data analysis 3 1 seasonality 3 1 1 by month 3 1 2 by day 3 2 lead time 4 model 4 1 cubic splines 4 2 cubic smoothing splines 4 3 linear transformation 4 3 1 rates 4 4 residuals 5 decision optimization 6 accuracy measurement 7 simulation 7 1 sensitivity analysis 8 results 8 1 setup 8 2 performance 9 conclusion and discussion a lead time density by day of week b results per hotel per day of week