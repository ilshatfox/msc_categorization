rank of tropical curves and tropical hypersurfaces boaz elazar abstract this paper is devoted to the bounding and computation of the dimension of deformation spaces of tropical curves and hypersurfaces this characteristic is interesting in light of the fact that it often coincides with the dimension of equisingular equigeneric etc deformation spaces of algebraic curves and hypersurfaces in this paper we obtain a series of precise for mulas upper and lower bounds and algorithms for computing dimension of deformation spaces of various classes of tropical curves and hypersurfaces 1 introduction the goal of the present work is to study deformation spaces of embedded and parameterized planar tropical curves spacial tropical curves and affine tropical hypersurfaces the dimesion of a curve s deformation space is called the rank of the curve the same definition is used with hypersurfaces we either give explicit formulas for their dimension when possible or provide lower and upper bounds for it in some cases efficient algorithms for computing the precise values of the dimension are given our results are related to the definition of end marked tropical curves and some results regarding them section 3 ranks of plane tropical curves section 4 and ranks of tropical surfaces in r 3 section 5 we will now shortly describe and comment on the results of the present work leaving a complete formulation for sections 3 4 and 5 1 precise formulas we exhibit two types of precise formulas for the dimension of deformation spaces of tropical curves and hypersurfaces one of them equates the actual and the expected dimensions the latter means the value obtained by counting the conditions on the parameters imposed by local combinatorial data the result is that an equisingular family of plane tropical curves is always of expected dimension if the number of higher singularities does not exceed 2 corollary 4 6 moreover the actual dimension can be greater than the expected one already for families of tropical curves with three higher singularities example 4 7 it is worth to say that this differs from the algebraic analogue which states that an equisingular family of plane algebraic curves is of expected dimension in one of two cases first when the curves have only nodal singularities 15 see a similar statement in the tropical approach in 9 12 second when the number of higher non nodal singularities does not exceed a bound proportional to the degree 5 13 we would like to remark that our satatement in the tropical approach can be used for a tropical enumeration of algebraic curves with any number of nodes and one cusp the author has been partly supported by the israeli science foundation grant no 448 09 1 ar x iv 1 60 3 09 16 8 v 2 m at h a g 5 j un 2 01 8 rank of tropical curves and tropical hypersurfaces 2 the other precise formula uses some ordering in addition to the local combina torial data it holds in a more general situation for plane tropical curves with at most 3 non nodal singularities theorem 4 9 and for higher dimensional tropical hypersurfaces having at most 3 singularities theorem 5 7 2 lower and upper bounds the expected rank is computed under the condition that all the relations imposed to parameters are independent as defined below following 12 and 9 the lower bounds to the rank are usually given by the expected rank by attaching additional combinatorial information we strengthen this lower bound for plane tropical curves theorem 4 8 and generalize it to higher dimensions theorem 5 6 for the upper bounds we apply another idea we consider plane tropical curves with their parameterizations and subdivide the parameterizing graph into simple trivalent pieces then we compute the dimensions of deformation spaces for each component separately deducing an upper bound for the rank of the original curve furthermore by analyzing possible dependence of conditions in the latter consider ation we provide a precise formula for the rank of an arbitrary plane tropical curve theorem 4 4 at last we study deformation spaces of spacial tropical curves similar to 1 dimensional skeleta of tropical surfaces hypersurfaces these tropical curves rather differ from the simple ones studied by mikhalkin since they do not have trivalent vertices we give an upper bound for their rank in theorem 5 4 3 algorithms the results of the theorems are all based on algebraic or combina torial calculations like matrix buildings theorem 4 4 and calculations of expected ranks of surfaces theorem 5 1 2 preliminaries in this part we describe tropical curves and tropical hypersurfaces due to two approaches first we define them as a combinatorial dual to some convex polytope with a subdivision this approach follows the definitions and results of 12 the second uses parameterizes graphs embedd into r 2 with some conditions this approach follows the definitions and results of 9 2 1 tropical hypersurfaces and subdivisions of newton polytopes given the non archimedean fieldk of convergent puiseux serieses define a non archimedean valuation map v al k q let f be a laurent polynomial namely a polynomial equation f z zn a z where is the newton polytope the convex hull of the points zn such that a 6 0 a k z z 11 z n n the tropical polynomial 1 nf x max zn x c where x rn c v al a is called the tropicalization of f nf x is a piecewise linear convex function definition 2 1 the corner locus of nf i e the points where nf is not linear defines our object of interest the tropical hypersurface see 2 for details rank of tropical curves and tropical hypersurfaces 3 let f be as before i a 6 0 zn and conv i take the con vex hull of the set v al c rn 1 i let f r f min x x this is a convex piecewise linear function its linearity do mains subdivide into convex polytopes with vertices in i denote this subdivision by sf lemma 2 2 12 lemma 2 1 the subdivision sf of defined above is combi natorially dual to the corner locus of nf when we shall use this approach to descrive tropical curves in r 2 we shall use the following definition due to 12 definition 2 3 the expected rank of a tropical curve t obtained as a dual to a sub division of a newton polygon is rkexp t v ert st 1 v ert 3 where t r 2 is an embedded plane tropical curve is its newton polygon and st is the dual subdivision of here v ert st is the set of vertices of st and v ert is the set of vertices of where runs over all polygons of st remark 2 4 the intuitive way to understand the expected rank of a curve is as the sum of all freedom degrees represented by the vertices of st minus one because fixing one such vertex cannot change the curve then we reduce the result by one for each condition imposed to the curve by each overvalance vertex represented by a polytope which is not a simplex i e the first three vertices of each such polytope represent the intersection of three planes of the tropical polynomial nf what defines a point when we want to set another plane with set slopes to fit the point its coefficient is not free it must equate a specific value but some conditions may have already taken into account as they are adjacent to more than one polytope this is why there is a difference between the expected rank and the actual rank take a look at the next figure for example the red vertices of polytope 1 can be set as we wish the blue one has to have a specific parameter or else it will not fit so the expected rank is reduced by one then the second polytope has only two vertices set and we can set the third as we wish the fourth vertex of the third polytope is set and then we get to the fourth polytope this polytope shows what we define as a double condition the blue vertex of it was already set to fit the third polytope but we do not know if this setting fits the fourth polytope if it does then there is no further change needed for the rank but if it does not we need to reduce the rank once more as we need to adjust one of the other vertices so that the settings will fit this is why rank of tropical curves and tropical hypersurfaces 4 it is called a double condition the expected rank assumes the worst case so we reduce the expected rank by one for each such vertex we shall see the computation in example 4 7 let x rn n 2 be a tropical hypersurface with newton polytope and its dual subdivision sx the set defes x of tropical hypersurfaces in rn with the newton polytope and its dual subdivision coinciding with sx is called the equisingular deformations space of the hypersurface x lemma 2 5 12 defes x can be embedded into rn 1 where n is the number of vertices of the subdivision st as a convex polyhedron the parameters of this embedding are the coefficients c of the tropical polyno mial 1 where runs over all but one vertex of the given subdivision of each coefficient is attached to a vertex of the subdivision definition 2 6 the rank of a tropical hypersurface is determined as the dimension of the equisingular deformation space of the hypersurface for a tropical hypersur face x we denote its rank by rk x dimdefes x 2 2 tropical curves in r 2 as parameterized graphs let be a weighted finite and compact graph with weights in n define 1 where 1 are the 1 valent vertices note that is non compact definition 2 7 a parameterized tropical curve is a pair of without divalent vertices and a proper map h rn satisfying these two conditions 1 the image h e of an edge e is contained in a line l rn with a rational slope such that h e is either an embedding or maps e to a point 2 for every vertex v the following property holds let e 1 em be the edges adjacent to v and 1 m nm be their corresponding weights let v 1 vm zn be the primitive integer vectors at the point h v in the direction of h e 1 h em note that if h ei is a point for some i then we take vi 0 then m i 1 ivi 0 two parameterized tropical curves h rn h rn are called equivalent if there exists a homeomorphism such that h h and the weights of the edges are kept the same two equivalent parameterized tropical curves will be considered the same here we call the image h plane embedded tropical curve when we shall use this approach to describe tropical curves in r 2 we shall use the following definition due to 9 definition 2 8 the expected rank of a parameterized tropical curve h is rkexp h end n 3 1 g mt 3 where end is the number of unbounded edges of g is the genus of runs over all vertices of and mt is the valence of regardless the weights for a parameterized tropical curve h in rn we deffine its equiparametric deformation space defep h as the set of parameterized tropical curves h rank of tropical curves and tropical hypersurfaces 5 such that there is a homeomorphism such that h e is parallel to h e for each edge e of lemma 2 9 3 9 defep h can be embedded into rm n where m is the number of closed edges of as a convex polyhedron the parameters of this embedding are the coordinates of a fixed vertex of and the length of closed edges of definition 2 10 the rank of a parameterized tropical curve is defined to be rk h dimdefep h 3 end marked plane tropical curves definition 3 1 1 let h be an irreducible parameterized plane tropical curve let m end and 1 m an ordered configuration of distinct points lying on the interior of noncompact edges of at most one on each edge we call the tuple h an end marked tropical curve and we say that this curve matches an ordered configuration of points p p 1 pm r 2 if h i pi 1 i m 2 the same definition can be used when is a straight infinte line in this case we may have one point or two distinct points lying on it notation denote bydefepp h the set of those curves h defep h which lift up to end marked curves h matching the given configuration p definition 3 2 a parameterized tropical curve in r 2 is called simple if all the following holds 1 each vertex of has exactly three adjacent edges 2 the map h immerses into r 2 3 no more then two points in are mapped into the same point in r 2 4 if two distinct points in are mapped to the same point in r 2 none of them is a vertex of proposition 3 3 in the above notations let h be simple if m p end then dimdef ep p h rk h m proof as h supports an embedded tropical curve and as this curve coincides with the corner locus of nf 2 we may look at the linear domains of nf re stricting h i to pi means that the parameter of one of the two linear domains around pi is also restricted i e aipxi bip y i ci ajp x i bjp y i cj where p x i and p y i are the coordinates of pi and either ci depends on cj or vice versa this means dimdefep h should be reduced by 1 for each i this means that the relations i e the restrictions on the parameters imposed by m end points on the non compact edges of are always independent in turn for m end the relations are dependent and we call this dependence a new balancing condition before stating it notice that h can be represented as a dual to a subdivision of a newton polytope hence we can see it as the corner locus of the tropical polynomial nf as mentioned above thus rank of tropical curves and tropical hypersurfaces 6 proposition 3 4 new balancing condition let h be an end marked curve withm end pi h i 1 i m let nf x max zn x c be the tropical polynomial dual to the curve let i represent the non compact linear domains of nf i e the vertices of and ci c i the corresponding pa rameters then 2 m i 1 i i 1 pi 0 both the pi s and the i s are ordered clockwise i and i 1 are the dual vertices adjacent to pi and m 1 1 furthermore if h is simple then dimdef ep p h rk h m 1 proof for each i we get i i 1 pi ci 1 ci for m end we get cm 1 c 1 and thus m i 1 i i 1 pi 0 if h is simple we have no other conditions and we can arrange the free pa rameters of the equations as a matrix and see that the last condition is dependent on all the others therefore only m 1 should be reduced from the rank remark 3 5 proposition 3 4 actually says two things first it says that there is a dependent condition on the coefficients ci this means in the case of a simple curve with m end set points pi there is zero freedom degrees to the curve bounded by them a simple curve is a tree with a rank of end 1 by the euler characteristic furtheremore if we would like to change the position of the points pi while keeping the slopes and vertices the new balancing condition tells us there is a condition on the points positions instead of 2 m freedom degrees we have only 2 m 1 i e after moving m 1 points in the plane the last point can only be moved along a line this condition is called a new balancing condition as mentioned above see for example figure 2 here dimdefepp h is zero because for set points we cannot chanage any thing in the curve between them furthermore if we want to change the position of the vertices and keep the same slopes of the edges and not change the valence of the vertices we can change the position of three of them however we like in a small range but the forth can be changed only in one direction after the first three were set definition 3 6 the expected rank of an end marked tropical curve with m end is rkexp h rk h m rank of tropical curves and tropical hypersurfaces 7 in the case where the end marked curve is a bounded component the expected rank should have been rk h m 1 even though we keep this definition as is due to the condition to the vertices positions in a manner that will be explained in the proof of the next theorem 4 rank of plane tropical curves in this section we shall study tropical curves in r 2 we shall see the importance of non nodal vertices i e vertices adjacent to more than three edges and are not formed by an intersection of two lines we shall use a partition of curves by such vertices and compute ranks to some of the resulting components definition 4 1 let t be an embedded plane tropical curve let p t be a vertex adjacent to 4 or more edges which is not the intersection of two edges we call p a non nodal vertex definition 4 2 let v be a set of some vertices of define a bounded component of v to be a connected component of v such that when adding the adjacent vertices of v it becomes compact remark 4 3 let vnn be the non nodal vertices of the embedding of the con nected components of vnn where the embeddings of the edges adjacent to vnn are extended to infinity are called induced tropical curves theorem 4 4 let t be an embedded plane tropical curve and vnn the set of its non nodal vertices replace by h 1 vnn and let 1 h 1 k hk be the simple parameterizations of the induced nodal tropical curces denote by tvnn the set of these induced tropical curves then rk t rkexp t max 0 bounded components of h 1 vnn 2 furthermore let m be the matrix of the coefficients of the coordinates of vnn in the balancing conditions 2 generated by all the bounded components of h 1 vnn then rk t rkexp t bounded components of h 1 vnn rkm proof as each hi i tvnn is nodal or non singular by 12 rk i hi rkexp i hi thus when attaching i hi to the relevant vertices of vnn we get an end marked curve with rank rkexp i hi end i rkexp i hi end i as in our case all the induced curves are simple that have no condi tions summing the expected ranks of all the induced end marked tropical curves together with the coordinates of vnn yields rkexp t i e 2 vnn rkexp i rkexp t notice that if an induced end marked curve is a bounded component then the expected rank should have been increased by one due to the dependence of the coefficients but the component poses a condition to the position of the vertices and thus we still have the same effect in case the new balancing condition is independent each of the bounded components of h 1 vnn restricts the position of one vertice acording to the new balancing condition by proposition 3 4 the new balancing conditions may depend on other new balancing conditions if there are rank of tropical curves and tropical hypersurfaces 8 only one or two bounded components there is no problem but if there are more we should get a correction in order to have a dependence there should be at least two independent conditions and so we get rk t rkexp t max 0 bounded components of h 1 vnn 2 to be exact we can determine the dependencies of the conditions by building a matrix m of the coeficients of the coordinates of vnn in the balancing conditions 2 generated by all the bounded components of h 1 vnn the rank of m is exactly the number of independent conditions so by extracting the rank ofm from the number of bounded components we get the number of dependent conditions which is the exact correction to rkexp t for the convenience of the readers the following lemma is quoted here with its proof for later use such as in cor 4 6 lemma 4 5 12 lemma 2 2 1 if t r 2 is non singular or nodal then rk t rkexp t 2 if t is singular and st 1 n is the dual graph of t divided to its polygons then for d st rk t rkexp t we get 2 0 2 d st m 2 2 m 3 n 2 m n 2 m m 2 2 m 2 n 2 m 1 1 where nm m 3 is the number of m gons in st and n 2 m m 2 is the number of 2 m gons in s whose opposite edges are parallel proof 1 the meaning of non singular t or nodal t is that its dual graph is built from triangles or parallelograms alone therefore the conditions imposed by the 4 valent vertices of t are independent as we shall prove taking a vector a r 2 with an irrational slope can be used in order to coorient each edge of any parallelogram in the dual graph so that the normal vector creates an acute angle with a doing that enables us to make a partial ordering of the parallelograms that can be completed into a linear ordering each parallelogram has 2 neighboring edges cooriented outside of the parallelogram and 2 that are cooriented inside thus the coefficients of the linear conditions imposed by the 4 valent vertices of t can be arranged into a triangular matrix meaning they are independent 2 if st contains polygons different from triangles and parallelograms we define a linear ordering on the set of all non triangles in the same way as in 1 denote by e i respectively e i the number of edges of a polygon i cooriented outside i respectively inside passing inductively over the nontriangular polygons i each time we add at least min e i 1 v ert i 3 new linear conditions independent of all the preceding ones thus d st n i 2 v ert i 3 min e i 1 v ert i 3 n i 2 max v ert i e i 2 0 rank of tropical curves and tropical hypersurfaces 9 because for the initial polygon 1 all v ert 1 3 imposed conditions are independent replacing a by a we obtain d st n 1 i 1 max v ert i e i 2 0 since the relations 1 e i v ert i 1 and e i e i v ert i yield max v ert i e i 2 0 max v ert i e i 2 0 v ert i 3 for a 2 m gon with parallel opposite edges we have e i e i m max 2 m e i 2 0 max 2 m e i 2 0 2 m 4 we get 3 2 d st m 2 2 m 3 n 2 m n 2 m m 2 2 m 2 n 2 m 1 if among 1 n there is a polygon i whose number of edges is odd and exceeds 3 or a polygon with an even number of edges and a pair of nonparallel opposite sides then a can be chosen so that min e i e i 2 thus the contribution of i to the bound for 2 d s will be v ert i 4 which allows us to gain 1 on the right hand side of formula 3 obtaining formula 2 finally assume that all nontriangular polygons in s have an even number of edges that their opposite sides are parallel and that there is i with v ert i 2 m 6 the union of the finite length edges of t is the adjacency graph of 1 n we take the vertex corresponding to i pick a generic point o in a small neighborhood of this vertex and orient each finite length edge of t so that it forms an acute angle with the radius vector from o to the middle point of the chosen edge equipped with such an orientation the adjacency graph has no oriented cycles because the terminal point of any edge is farther from o than the initial point thus we obtain a partial ordering on 1 n such that for any k with an even number of edges at least half of the edges are cooriented outside then we apply the preceding argument to estimate d st and notice that the contribution of the initial polygon i to such a bound is zero whereas on the right hand side of formula 3 it is at least two this completes the proof of formula 2 corollary 4 6 1 if the parameterizing graph of an irreducible parameterized plane tropical curve h has at most two vertices of valence 3 then rk h rkexp h 2 if the dual subdivision st of the newton polygon of an embedded plane tropical curve t contains at most two polygons other than triangles and parallelograms then rk t rkexp t proof 1 between two vertices of valence 3 there can be only one bounded com ponent and therefore the new balancing condition is independent 2 according to the proof of lemma 4 5 if the two polygons do not share an edge there is no problem if they do it is enough to order the polygons in such a way so that each of them will have two neighboring edges cooriented outside rank of tropical curves and tropical hypersurfaces 10 example 4 7 consider a plane tropical curve t and its dual subdivision st with 3 quadrangles that are not parallelograms such that rk t rkexp t in this example cf figure 3 the rank of the curve is 3 2 for transformations and 1 for multiplication by a scalar the expected rank however is only 2 rkexp t v ert st 1 v ert 3 6 1 3 2 theorem 4 8 let t be an embedded plane tropical curve st the dual subdivision of its newton polygon if 1 k are all the triangles and parallelograms in st and k 1 l are all the polygons in st other than triangles and parallelograms then rk t v ert st 1 1 k v ert 3 l i k 1 v ert i max 3 v ert i j i v ert j where runs over the polygons of st proof the number of the parameters we deal with is v ert st 1 for the triangles there are no conditions imposed the 4 valent vertices of st dual to par allelograms impose independent conditions to see these we shall use the method showed in 12 take a vector a r 2 with an irrational slope and coorient each edge of any parallelogram so that the normal vector forms an acute angle with a this coorientation defines a partial ordering on the set of parallelograms we can complete this to a linear ordering each parallelogram has two edges cooriented outside which means that the coeffcients of the linear conditions imposed by the 4 valent vertices of st can be arranged into a triangular matrix making the condi tions independent this means that each parallelogram imposes one condition and together with the triangles each one imposes v ert i 3 conditions for the rest of the polytopes we can determine only the independence of new conditions represented by new vertices which were not part of previous polytopes the number of such vertices is v ert i v ert i j i v ert j rank of tropical curves and tropical hypersurfaces 11 for i k 1 some of the old vertices of a polytope may have been considered as conditions to a former set of equations and may as well be considered as conditions in this new set of equations represented by the polytope these conditions might not be the same so an additional reduction should be made however we cannot know this by this procedure and this is why we get only an upper bound for the rank changing the partial order may produce other bounds the minimum of such upper bounds will give the tightest bound theorem 4 9 if the dual subdivision st of the newton polygon of an embedded plane tropical curve t contains precisely three polygons 1 2 3 other than triangles and parallelograms then rk t v ert st 1 6 1 2 3 v ert 3 3 i 1 v ert i max 3 v ert i j i v ert j where runs over the polygons of st proof this theorem follows by remark 5 8 5 rank of tropical surfaces in r 3 as newton polytopes appear in dimensions higher than 2 in the same way we adjust some of the methods of the 2 dimensional case and use them here by using the 1 steleton of tropical surfaces we will adopt the parameterized methods as well and give a formula to one such case theorem 5 1 lower and upper bounds to the rank of a tropical surface in r 3 can be calculated according to a given algorithm proof we shall use the dual graph in this case in order to show an algorithm to calculate these bounds we shall denote to be the newton polygon of the tropical surface a and sf its subdivision step 1 if a has has only one vertex and is a polygon of m planes then a is an m valent vertex with faces between the edges this means that four of the space s parameters are independent while all the others are linearly dependent on those four parameters this gives the surface four degrees of freedom step 2 if has a subdivision sf e g figure 4 one should choose an arbitrary polygon this can be done as we deal with locally dependencies this first polygon as the one in step 1 contributes 4 to the rank e g figure 5 now we shall take one of its plane neighbors as they share a plane three of the degrees of freedom of the second polygon have already been considered and only one more degree of freedom is left to contribute to the rank e g figure 6 this step sums up to a contribution of five freedom degrees to the rank rank of tropical curves and tropical hypersurfaces 12 step 3 now we shall look for polygons which are plane neighboring the two previous ones with four vertices or more where not all of those vertices lie in the same plane those polygons will not add anything to the rank of the surface and shall be joined to create a bloc together with the previous two e g figure 7 step 4 to the bloc we created on step 3 we can now add all the polygons which are plane neighboring the bloc with four or more vertices that do not lie in the same plane again there will be no addition to the rank this step goes on as long as there are polygons which share with the bloc four or more vertices as before if there are no more polygons of that kind we go to step 5 e g figure 4 again step 5 we look for a polygon plane neighboring the new bloc with three vertices if there is one like that it shall be added to the bloc adding along with it 1 to the rank as three of its freedom degrees have already been considered now we shall return to step 4 step 6 if there are no more polygons neighboring the bloc we shall reduce 1 from the rank we got this reduction by one is due to the isotopy moving the whole graph of the piecewise linear function up or down in the four dimensional space as a is the projection of the corner locus of the graph the only effect on the rank comes from the relationships between the vertices and not from their absolute value the process is over and we got the upper bound of the rank if according to the full order we defined on the polygons we get to a polygon whose 5 vertices or more have been already determined it means we might have encountered a double condition a double condition means a vertex that have to fit into two or more independent polytopes of the subdivision where they might not set the same condition to that vertex that means the number of the freedom degrees of the previous polytope should be reduced so that the conditions on that vertex will correspond in such case rk a should be decreased by one for every vertex of that kind as this reduction is just of suspicious vertices we get to a lower bound changing the first two polygons in step 2 may produce other bounds rank of tropical curves and tropical hypersurfaces 13 finally the minimum upper bound and the maximum lower bound give the tightest bounds this procedure allows in figure 4 above we get that rk a 4 and the actual rank is indeed 4 one for scaling and three for translations the next part deals with tropical curves in r 3 whose cycles are planar with no edge going through them and their vertices valence is four or more the motivation to study these curves is the 1 dimensional skeleta of tropical hypersurfaces in r 3 remark 5 2 the deformation space of a tropical surface and the deformation space of the curve which is derived from the surface as a 1 skeleton are the same the deformations of a face of the tropical hypersurface are done by deforming its edges the deformations of 3 dimensional polytopes are done by deforming their faces and so on therefore by induction the curve which is determined by the intersections of the polytopes in the tropical hypersurface actually defines the structure of the hypersurface and shares the same deformation space with it before our next theorem some definitions definition 5 3 1 let c be a tropical curve in r 3 whose minimal cycles are planar and no edge goes through them take only those cycles and close them into faces if the result consist a minimal compact polytope we call the set of the edges of each minimal compact polytope a closed volume see example in figure 8 2 the overvalance of a vertex of a topical curve in r 3 is the number of edges adjacent to it minus four the overvalance of a topical curve in r 3 is the sum of the overvalaces of all its vertices the overvalance of a tropical curve c in r 3 is denoted by ov c 3 let t be a finite tree of m finite edges embedded in rn we say that rk t m n 4 let c be a tropical curve in r 3 and let t be a maximal tree of c we say c is obtained from t with the closed volume property if the following holds for each new closed volume we have to add an edge and close at least one minimal cycle in the inductive order of building the curve from the tree in other words there is no closed volume created only by other closed volumes in the building procedure theorem 5 4 let c be a tropical curve with valencies of 4 or more with no minimal cycles which are not planar and no edge goes through those cycles let us assume that this curve has the closed volume property then the rank of c is bounded from below rk c end c 2 1 1 2 ov c ncl rank of tropical curves and tropical hypersurfaces 14 where ncl is the number of closed volumes proof first we shall explain end c 2 1 1 2 ov c the number of bounded edges in c is 4 v ert c ov c end c 2 in order to get a maximal tree out of c we have to take out g edges where g is the genus of c then we get by the euler characteristic for trees e v 1 that 2 v ert c 1 2 end c 1 2 ov c g v ert c 1 which implies that v ert c end c ov c 2 g 2 2 and therefore the number of bounded edged of c from the beginning of the proof is end c 2 2 g 2 1 2 ov c by definition 5 3 3 the rank of the maximal tree t is rk t bounded edges of c g n where n came from the n dimensional space of translations thus we get that rk t end c 2 g 2 1 2 ov c n as the slope of the edges is fixed closing each cycle of the curve from the tree sets a condition on the rank meaning the length of one edge of the tree is not free since we need g edges in order to reconstruct the curve from the maximal tree and since we deal with r 3 we get that rk c end c 2 1 1 2 ov c regarding ncl for ncl 1 each of the first g 1 minimal cycles closed from the maximal tree dictates a condition upon the rank as explained now let us look at the last edge missing in the closed volume this last edge is the intersection of two set faces that goes through two vertices set in this intersection therefore it does not pose any condition to the curve for example remove just one edge from the closed volume in figure 8 above the positions of all the vertices are set and the lengths of all the edges are set adding the last edge does not restrict any other edge thus we should not have subtracted g from the rank of the maximal tree in order to get to the rank of the curve instead we should have subtracted only g 1 and therefore a correction of one should be added to the lower bound for any other closed volume there is a correction of 1 due to the closed volume property which ensures such an edge exists for any closed volume we should notice that the minimal cycles of the 1 skeleton curve of a tropical hypersurface in r 3 are always like the minimal cycles in the above deffnition we can use this fact in order to bound the rank of this curve by the above theorem we should also notice that different hypersurfaces in r 3 may have the same 1 skeleton and therefore their ranks are bounded by the same number remark 5 5 the lower bound for higher dimensional hypersurfaces can be built in the same manner for example 1 skeletons of tropical hypersurfaces in r 4 are at least 5 valent taking a hypersurface in r 4 leads to a lower bound according to those considerations the number of bounded edges is 5 v ert c end c 2 the number of vertices is calculated inductively by end c 2 g 3 v ert c 2 ov c which implies that v ert c end c 2 g 2 ov c 3 combining the two equations leads to end c 3 5 g 3 5 3 ov c 3 bounded edges in the curve and therefore to a maximal tree with rank rk tree end c 3 2 g 3 5 3 ov c 3 n where n 4 completing the maximal tree into the curve c with planar cycles leads to rk c end c 3 g 3 2 1 3 ov c 3 for the next statements we shall use an order on the subdivision as proposed in 12 take a vector a a 1 a 2 a 3 r 3 where a 2 a 1 a 3 a 1 and a 3 a 2 are irrational this enables us to define an order on the polytopes such that other than the first rank of tropical curves and tropical hypersurfaces 15 polytope all the polytopes have at least one vertex in common with their predeces sors similarly any such order is applicable notice that theorem 5 6 refers higher dimensions as well theorem 5 6 let x be a tropical hypersurface in rn n 3 with the dual sub division sx of its newton polytope let 1 k be all the n polytopes of sx ordered as stated above then rk x 6 v ert sx k i 1 v ert i j i v ert j n dimconvhull v ert i j i v ert j proof the right hand side of the inequality can be presented in the following way v ert sx 1 n 1 v ert 1 k i 2 v ert i j i v ert j n dimconvhull v ert i j i v ert j the number of parameters we deal with is v ert sx 1 i e each vertex denote a hypersurface of dimension n of nf but setting one hypersurface does not change the corner locus the first polytope along the order we have defined has n 1 freedom degrees all its other vertices represent conditions meaning these vertices do not represent freedom degrees of the hypersurface but are forced to fit with the previous vertices now we continue to the next polytope any new vertex of this polytope is considered as a new condition thus we reduce the number of the polytope s new vertices as new conditions this reduction is noted by v ert i j i v ert j a correction to this reduction is needed if the vertices this polytope shares with its predecessors are positioned in a space with a dimension less than n a vertex in the tropical hypersurface is defined by an n dimensional polytope in the dual graph thus some of the new vertices of the polytope actually do not represent conditions and therefore should be added again the number of such vertices is exactly that which will make the n dimensional demand the others are still considered as conditions this correction is noted by n dimconvhull v ert i j i v ert j take for example the dual graph in figure 4 and follow by figure 5 6 and 7 some of the old vertices of a polytope may have been considered as conditions to former set of equations and may be considered as conditions on this new set of equations represented by the polytope these conditions might not be the same and therefore an additional reduction should be made however we cannot know this by the procedure itself which is why we get only an upper bound for the rank changing the order may produce other bounds the minimum upper bound gives the tightest bound rank of tropical curves and tropical hypersurfaces 16 theorem 5 7 let x be a tropical hypersurface in rn n 3 with the dual sub division sx of its newton polytope if sx contains at most three n polytopes i 0 i i 0 3 other than simplexes then rk x v ert sx i 0 i 1 v ert i j i v ert j n dimconvhull v ert i j i v ert j proof each of the higher valence vertices in the tropical graph is dual to a polytope with five or more vertices in the dual subdivision of sx such polytopes shall be later on referred to as ov polytopes a problem might arise due to double conditions i e conditions that suit to one polytope but not to its edge face neighbor if no two ov polytopes share vertices the rank can be calculated exactly as conditions appear only on those three polytopes if only two share some vertices the rank can also be calculated exactly as the convex hull of the shared vertices is of a dimension less than that of furthermore we shall see that even if any two of the ov polytopes share vertices the rank can be calculated exactly if one such pair shares only one vertex all the conditions are independent the problem arises when each pair shares an edge or a face the proof will therefore distinguish between the possible cases in which the three polytopes are paired and we will see in each case why the conditions we encounter in one polytope also fit to its neighbor we start with the cases arise when each pair of ov polytopes share an edge and later we continue with cases where one pair or more share a face let us assume for start that each pair of the ov polytopes shares an edge with each of its ov neighbors i e we have three edges where each edge belongs to two ov polytopes let us refer to those edges by their boundary vertices r r 1 r 2 p p 1 p 2 q q 1 q 2 if one of the three edges does not lie in the same plane with one of the other two edges then the ov polytopes adjacent to these two edges do not have a double condition simply because none of the four vertices represents a condition now let us continue to the case where all the three edges are parallel an example of such case can be found in figure 9 where the purple edges are the shared edges and the space between the ov polytopes can be triangulated to simplexes in that case by the definition of the tropical polynomial we have rank of tropical curves and tropical hypersurfaces 17 4 q 1 x d 1 q 2 x d 2 p 1 x c 1 p 2 x c 2 for some x r 3 meaning the four vertices belong to the same dual polytope 5 q 1 y d 1 q 2 y d 2 r 1 y e 1 r 2 y e 2 for some y r 3 and 6 p 1 z c 1 p 2 z c 2 r 1 z e 1 for some z r 3 we shall now prove that the last equation can be extended to the following equation 7 p 1 z c 1 p 2 z c 2 r 1 z e 1 r 2 z e 2 for some z i e that the last condition on e 2 fit as a result of the previous conditions and thus does not impose a new condition and does not break the third dual polytope into two reducing 4 from 6 and 4 from 5 gives respectively p 1 z x p 2 z x p 1 p 2 z x 0 q 1 y x q 2 y x q 1 q 2 y x 0 r 1 r 2 z y 0 because p q r adding 5 to the last equation leads to 7 thus as e 2 does not add a new condition the formula above is exact now we shall look at the case where each pair of edges lies in a plane but no pair is made of parallel edges cf figure 10 and notice the figure does not represent a polytope in the dual graph just the relations between the shared edges therefore the constellation of the edges is such that they can be extrapolated into lines which intersect at a point that we shall call a so we have p 1 a p p 2 a a p 1 6 a r r 1 a r r 2 a b r 1 6 b r q 1 a q q 2 a c q 1 6 c r and we have 4 5 6 as before where we need to prove 7 as we may shift our curve x freely in r 3 we can choose x 0 0 0 and so we get p 1 0 0 0 c 1 a p 0 0 0 c 1 c 1 c 2 d 1 d 2 rank of tropical curves and tropical hypersurfaces 18 if we add a constant k to all the monomials of the tropical polynomial defining x we shall get the same curve x therefore we may choose c 1 c 2 d 1 d 2 0 so far with x now we shall look at y we know that q 1 y q 2 y q 1 q 2 y 0 q y 0 the d s equal to 0 but we also know that q 1 y a q y a y q y a y and therefore a y r 1 y e 1 a r y e 1 a y r y e 1 which implies that e 1 r y and doing the same with r 2 and e 2 leads us to e 2 b r y so far with y now let us recall 6 for z p 1 z p 2 z r 1 z e 1 and so p 1 z a p z a z p z which equals p 2 z a a p z a z a p z and therefore 1 a p z 0 p z 0 p 1 z a z this leads to a z p 1 z r 1 z e 1 a r z r y a z r z y which implies that r z y 0 it is now left to prove is that r 2 z e 2 equals to 6 in other words we need to prove r 2 z e 2 a z the prove is as follows r 2 z e 2 a b r z b r y a z b r z y a z the last case is where all the three edges lie in the same plane but are not parallel it is impossible in that case that only two are parallel because then it is impossible to have polytopes which do not intersect each other let p 1 a p p 2 a p q 1 a q q 2 a q r 1 a q r r 2 a q r again we shall set x 0 and ci di 0 and therefore q y p z 0 we know r 1 y e 1 q 1 y a y q y and also r 1 y e 1 a y q y r y e 1 and therefore e 1 r y in the same manner we get e 2 r y furthermore we know p 1 z r 1 z e 1 a z q z r z y and p 1 z a z p z a z what leads to q z r z y as r 1 r 2 1 r forms the edge between two ov polytopes which are dual to y and z we get that r z y 0 due to the characteristics of the duality as p z 0 and the three edged are in the same plane but are not parallel we get that q z 6 0 thus 0 and r 1 z e 1 a z now we shall look at r 2 z e 2 a z q z r z y a z r 1 z e 1 notice that this last case of three edges lying in the same plane but are not parallel actually proves theorem 4 9 see remark 5 8 this is the proof for the case where each pair of our three ov polytopes shares an edge rank of tropical curves and tropical hypersurfaces 19 now we shall look at the case where two of the ov polytopes share a face spanned by p p p p p p and each other pair shares an edge q q 1 q 2 r r 1 r 2 we now have a new set of equations 8 p x c 1 p p x c 2 p p x c 3 q 1 x d 1 q 2 x d 2 for some x r 3 9 q 1 y d 1 q 2 y d 2 r 1 y e 1 r 2 y e 2 for some y r 3 we shall now prove that the following equation 10 p z c 1 p p z c 2 p p z c 3 r 1 z e 1 for some z r 3 can be expanded to the following equation 11 p z c 1 p p z c 2 p p z c 3 r 1 z e 1 r 2 z e 2 for the same z let us define r to be a vector parallel to r 2 r 1 q to be a vector parallel to q 2 q 1 and p the plane spanned by the vectors p and p there are several cases possible the two edges are not in the same plane and neither is parallel to p cf figure 11 the edges lie in the same plane but are not parallel and neither is parallel to p cf figure 12 the edges are parallel to each other and to p cf figure 13 the edges are parallel but not to p cf figure 14 for all cases we should set x 0 ci di 0 which implies that q y p z p z 0 for the first case we rearrange the equations above assume equation 11 holds and try to extend q 1 y d 1 q 2 y d 2 r 1 y e 1 to q 1 y d 1 q 2 y d 2 r 1 y e 1 r 2 y e 2 rank of tropical curves and tropical hypersurfaces 20 the first case is then obvious because none of the four vertices of the polytope dual to y represent a condition to y and thus no double conditions can occur from now on we return to the original arrangement of the equations 8 10 and try to prove 11 follows for the second case where r and q lie in the same plane but are not parallel let us assume r s extrapolation intersects the extrapolation of p then r 1 p ap b p cr r 2 p ap b p dr r 1 q 1 eq c r r 2 q 1 dq c d c r q 1 y r 1 y e 1 q 1 y c r y e 1 which implies that e 1 c r y in the same manner e 2 c d c r y p z r 1 z e 1 p z c r z c r y which implies that c r z c r y again as we know there are some y 1 and z 1 which fulfil r z 1 y 1 0 we get c c and so for all y and z we have r z y 0 therefore r 2 z e 2 p z d r y c d c r y p z r 1 z e 1 the meaning of c c is that this case is possible only if r s extrapolation meets q s extrapolation on p s extrapolation otherwise this dual division does not represent a hypersurface with three vertices with valencies greater than four the third case is that of r q p in that case r ap b p and q a p b p r z q z 0 we should also recall that q y 0 and as r q we also get r y 0 therefore the question if r 1 z e 1 r 2 z e 2 is equivalent to the question whether e 1 e 2 but we know r 1 y e 1 r 2 y e 2 and r y 0 and so we get e 1 e 2 the last case is where r q but r s extrapolation intersects p s extrapolation q y 0 and r q which implies that r y 0 r 1 p ap b p cr q 1 a p b p c r r 2 p ap b p dr q 1 a p b p c d c r let us mark p a p b p now q 1 y r 1 y e 1 q 1 y p y e 1 which implies that e 1 p y and in the same manner e 2 p y as r y 0 p z r 1 z e 1 p z c r z p y r 2 z e 2 p z d r z p y we know c 6 d and therefore an equality between r 1 z e 1 and r 2 z e 2 can only be achieved if r z 0 however we know this cannot be since r s and p s extrapolations intersect and p s extrapolation is perpendicular to z this means there cannot be a hypersurface with three vertices with ov which is dual to such dual subdivision this close the section of a face and two edges the next case is of three ov polytopes where two of them share an edge r r 1 r 2 and each of the other pairs shares a face spanned by p p p p p p and q q q q q q we now have a new set of equations 12 p x c 1 p p x c 2 p p x c 3 q x d 1 q q x d 2 q q x d 3 for some x r 3 13 q y d 1 q q y d 2 q q y d 3 r 1 y e 1 r 2 y e 2 for some y r 3 we shall now prove that the following equation rank of tropical curves and tropical hypersurfaces 21 14 p z c 1 p p z c 2 p p z c 3 r 1 z e 1 for some z r 3 can be expanded to the following equation 15 p z c 1 p p z c 2 p p z c 3 r 1 z e 1 r 2 z e 2 for the same z let us define r to be a vector which is parallel to r 2 r 1 the possibilities are the edge and the two faces are all parallel cf figure 15 the extrapolation of the edge intersects the extrapolation of the two parallel faces cf figure 16 the extrapolation of the edge is parallel to the intersection of the extrapolations of the two faces which are not parallel cf figure 17 the edge is parallel to one face but not to the other cf figure 18 for all the cases we shall take x 0 ci di 0 which implies that q y q y p z p z 0 the first case cannot be because one cannot create non intersecting convex polytopes from this constellation in the second case we have r 1 q aq b q cr r 2 q aq b q dr and so q y r 1 y e 1 q y a q y b q y c r y e 1 q y c r y e 1 which implies that e 1 c r y and in the same manner e 2 d r y we can also represent r 1 p a p b p c r r 2 p a p b p c d c r and so p z r 1 z e 1 p z a p z b p z c r z c r y p z c r z c r y and as we know there are y 1 and z 1 for which r z 1 y 1 0 due to the duality and therefore c c that leads to r z y 0 for all relevant y and z that in turn leads to r 2 z e 2 p z d r z d r y and since rank of tropical curves and tropical hypersurfaces 22 r z y 0 we get r 2 z e 2 p z r 1 z e 1 the fact that c c means that the only option for that case to describe the wanted hypersurface is if the extrapolation of r intersects the intersection of the two faces in the third case we have r ap b p a q b q r y r z 0 since we know r 1 y e 1 r 2 y e 2 we get e 1 e 2 and that is why r 1 z e 1 r 2 z e 2 the last case is the one where r is parallel to p without loss of generality and r s extrapolation intersects q s then we have r ap b p which implies r z 0 since r 1 q aq b q cr r 2 q aq b q dr we get q y r 1 y e 1 q y a q y b q y c r y e 1 q y e 1 which implies that e 1 c r y and the same way leads to e 2 d r y since we know r z 0 the question whether r 1 z e 1 r 2 z e 2 is equivalent to the question whether e 1 e 2 for which we know the answer is no since c 6 d and since r y 6 0 the last inequality arises from the given fact that r is not parallel to q and from the fact that y is perpendicular to q the last option where each two polytopes intersect in a face can be understood from the previous option a hypersurface as needed can be created only when all the extrapolations to the faces intersect in the same line in this case there are no double conditions and the counting in the order suggested is accurate remark 5 8 the proof of the case where each two polytopes share an edge and all these edges lie in the same plane but are not parallel can actually prove theorem 4 9 recall that theorem 4 9 deals with a planar curve with only three vertices of valency higher than three in r 2 and states that it gets an exact rank to see that take the planar graph of theorem 4 9 add a vertex not in the plane of the graph attach all the other vertices to it and complete the faces as needed now we can apply theorem 5 7 to the result graph acknowledgements this work was carried out in tel aviv university under the supervision of the supportive and helpful prof eugenii shustin to whom i owe the opportunity to experience this field of mathematics i would also like to thank daniel benarroch for reading the manuscript and for his useful remarks references 1 bieri r and groves j the geometry of the set of characters induced by valuations j reine angew math 347 1984 168 195 2 einsiedler m kapranov m and lind d non archimedean amoebas and tropical vari eties j reine angew math 601 2006 139 157 3 gathmann a and markwig h the numbers of tropical plane curves through points in general position j reine angew math 602 2007 155 177 4 gathmann a and markwig h kontsevich s formula and the wdvv equations in tropical geometry adv math 217 2008 no 2 537 560 5 greuel g m and karras u families of varieties with prescribed singularities compos math 69 1989 no 1 83 110 6 itenberg i v kharlamov v m and shustin e i logarithmic equivalence of welschinger and gromov witten invariants russian math surveys 59 2004 no 6 1093 1116 7 itenberg i mikhalkin g and shustin e tropical algebraic geometry oberwolfach sem inars vol 35 birkhauser 2007 8 mikhalkin g decomposition into pairs of pants for complex algebraic hypersurfaces topol ogy 43 2004 1035 1065 rank of tropical curves and tropical hypersurfaces 23 9 mikhalkin g enumerative tropical algebraic geometry in r 2 j amer math soc 18 2005 313 377 10 mikhalkin g tropical geometry and its applications sanz sol marta ed et al pro ceedings of the icm madrid spain august 22 30 2006 volume ii invited lectures z rich european math soc 2006 pp 827 852 11 richter gebert j sturmfels b and theobald t first steps in tropical geometry idem potent mathematics and mathematical physics contemp math 377 amer math soc providence ri 2005 pp 289 317 12 shustin e a tropical approach to enumerative geometry algebra i analiz 17 2005 no 2 170 214 english translation st petersburg math j 17 2006 343 375 13 shustin e on manifolds of singular algebraic curves selecta math sov 10 no 1 27 37 1991 14 shustin e tropical and algebraic curves with multiple points perspectives in analysis ge ometry and topology on the occasion of the 60 th birthday of oleg viro series progress in mathematics vol 296 birkh auser boston 2012 pp 431 460 15 severi f vorlesungen ber algebraische geometrie anhang f leipzig teubner 1921 department of mathematics the weizmann institute of science rehovot israel e mail address boaz elazar weizmann ac il 1 introduction 2 preliminaries 2 1 tropical hypersurfaces and subdivisions of newton polytopes 2 2 tropical curves in r 2 as parameterized graphs 3 end marked plane tropical curves 4 rank of plane tropical curves 5 rank of tropical surfaces in r 3 references