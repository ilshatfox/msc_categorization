ar x iv m at h 07 02 58 7 v 2 m at h h o 5 m ay 2 02 1 the ultrafilter a peerless tool labib haddad abstract the ultrafilter a peerless tool this paper was meant for a series of talks at the bratislava workshop on the density concept may 2004 a number of the very many facets of ultrafilters are reviewed some of them a bit cursorily as is to be expected in a short space and time including condorcet s paradox ultraproducts and the theory of infinitesimals non standard analysis banach generalized limits in sequence spaces choquet s limits for families of closed sets in general topology and intrinsic geometry representations of topologies as binary relations among ultrafilters additive bases in number theory peerless indeed and protean aknowledgement in his report the anonymous referee had estab lished a list of questions asking for details concerning certain notions sketched a bit too quickly he also mentioned about thirty typos in the first version of the text i want to thank him most sincerely for the care he took in his reading i of course corrected those printing errors and inserted in braces the clarifications he asked for i also want to thank georges grekos who read very carefully the first version of the text drew my attention to typing errors and provided me with many a wise and friendly advice which i have taken in fullest account since this text was originally meant to be a sequence of lectures it retains a bit of the oral style which i hope will not affect clarity the concept of ultrafilter since that is what it s all about was in troduced by henri cartan in two short notes in the comptes rendus de l acade mie des sciences paris in 1937 for the needs of general topology cartan h the orie des filtres c r acad sc paris 205 1937 595 598 filtres et ultrafiltres ibid 777 779 ultrafilters as is well known nowadays are objects situated at the crossroads of almost all chapters of mathematics set theory algebra topology anal ysis logic probabilities therefore they are likely to very many and varied presentations illustrations and interpretations haddad l condorcet et les ultrafiltres in mathe matiques finitaires et analyse http arxiv org abs math 0702587 v 2 2 labib haddad nonstandard publ math univ paris vii n 31 1989 tome 2 p 343 360 text of a lecture given at luminy in 1985 i shall readily recall some of their definitions all equivalent of course this should make clear their protean character whence their wealth however i will start with a small digression that will eventually bring us back all the same to our subject 1 an imaginary election imagine a triangular election where the electoral college has to choose among three candidates a b c imag ine that this electoral college is divided into three trends one of the three trends prefers candidate a to candidate b and b to c an other has in mind candidate b first then c followed by a finally for the last trend candidate c is first then a then b suppose that the supporters of the three trends are equal in number the following diagram helps to summarize the situation a b c 1 3 b c a 1 3 c a b 1 3 one third of the voters are supporters of a another third are sup porters of b and the last third are supporters of c there is no majority to elect one of the candidates at the first round imagine any mode of voting you wish for example the mode for the presidential election in france which in this case takes into account the age of the candidates because of the equality in the distribution of the number of votes imagine that one of the three candidates is finally elected the day after election in any such situation there will always be a majority of disgruntled the phenomenon is not so rare and has al ready been noticed before since the day men exist and vote how ever there is a remarkable thing about the present case whatever the method of voting is whoever the winner is there will always be a ma jority which prefers another candidate for example if a is designated there is a comfortable two thirds majority that would prefer c to be elected similarly if c was elected there will still be a two thirds ma jority that prefers b if b had won the election a two thirds majority would prefer a the ultrafilter a peerless tool 3 in a triangular election there might exist a majority of voters who rather than the winner himself prefer one of the defeated candidates that is briefly presented one of the forms of the condorcet paradox the day after election even if the voters give up trying to designate a winner if they are content with establishing just a simple ranking this would still lead to an equally paradoxical situation where a is preferred to b b to c and c to a each of these preferences being the wish of a two thirds majority never the same each different a situation a la condorcet attempting to aggregate individual preferences might lead to an inconsistent collective circular ranking different situations and percentages can still produce a similar result a majority of disgruntled whoever the winner ready to have one of the unsuccessful candidates elected as the following example shows three candidates a b c among a hundred of voters 45 are in favor of a 25 in favor of b and 30 in favor of c among the 45 supporters of a there are 20 who prefer b to c and 25 who prefer c to b the 25 supporters of b divide as follows 10 prefer a to c and 15 prefer c to a finally the 30 supporters of c all prefer b to a this is summarized in the following sketch a b c 20 voters a c b 25 b a c 10 b c a 15 c b a 30 let us say it again whatever the method of voting is whoever the chosen candidate is there would be a majority of disgruntled but which is more a majority would be ready to overthrow the winner and vote for one of the beaten candidates indeed the day after election if a were the winner 55 voters against 45 would still prefer b to a similarly if b is the winner 55 voters against 4 labib haddad 45 prefer c finally in the case where c is elected we would end up with 55 against 45 voters preferring a in such a situation regardless of the procedure trying to break the deadlock there will always be a majority ready to agree on another solution aftermath of elections haddad l e lections ultrafiltres infinite simaux ou le para doxe de condorcet in condorcet mathe maticien e conomiste philo sophe homme politique p 87 91 colloque international paris juin 1988 e dition minerve 2 two steps 1785 condorcet was one of the first to highlight and analyze this inevitable consequence of majority voting in the discours pre liminaire to his essai sur l application de l analyse a la probabilite des de cisions rendues a la pluralite des voix imprimerie royale paris 1785 a photographic reprint has been published by chelsea publishing com pany 1972 the discours has also been inserted in the following book condorcet sur les e lections et autres textes corpus des uvres de philosophie en langue franc aise fayard 1986 1952 g th guilbaud attracting attention again to this phe nomenon named it condorcet effect in a remarkable and impor tant text les the ories de l inte re t ge ne ral et le proble me logique de l agre gation e conomie applique e 5 1952 n 4 oct de c 501 551 the paper was printed again as chapter ii in the following book e le ments de la the orie mathe matiques des jeux monographies de re cherches ope rationnelles 9 collection directed by g morlat afiro dunod paris 1968 condorcet effect the harm is profound for example a club can very well want its emblem to be all at a time and by majority votes a convex quadrilateral with four equal angles and four equal sides but which would not be a square if we want to avoid the condorcet effect we cannot maintain the majority system or else we should have to modify it by extending the concept of majority the ultrafilter a peerless tool 5 guilbaud introduces the notion of a generalized voting system and analyzes the way it operates among all the possible combinations within an assembly a we could for example distinguish a number of them in advance to hold the role of majorities we would call them the efficient coalitions to distin guish them from majorities in the ordinary sense and it would be understood that the assembly confirms all the choices and only those choices that would be approved by one any of those efficient coali tions 3 voting systems let a be an assembly each subset k of a will be called a coalition we let kc a r k denote the opposing or complementary coalition to k a voting system for the assembly a is a given set e of coalitions of a to be used as substitutes for ordinary majorities in other words e is a subset of the set p a of all subsets of the set a the elements of e are by definition the efficient coalitions the system a e operates in the following way questions submit ted to the assembly are dichotomous choices which the members of the assembly answer by yes or no thus two coalitions form the pros and the cons the two coalitions are complementary the choice be ing dichotomous there is no room for abstention we will say later why this is not a real constraint since any multiple choice boils down to a suitable set of dichotomous choices of these two coalitions the efficient one outweighs the other i e the one which belongs to e if we then want the assembly not to be able at the same time and with a same impulse accept and reject a given choice and if we also want the assembly to be determined in all circumstances it is necessary and sufficient to require the following condition on the set e c 1 a coalition is efficient if and only if the opposing coalition is not if moreover we want that given two consecutive choices the as sembly will not recant that is if we want that given two incompatible choices the assembly will not adopt both it is necessary and sufficient to require also the following condition 6 labib haddad c 2 any coalition that contains an efficient coalition is efficient itself to say that two choices u and v are incompatible amounts to say that one cannot be pro to both u and v in other words the coalition u of the pro u is contained in the coalition v of the con to v and similarly v is contained in u abbreviating both conditions can be written as follows c 1 k e if and only if kc e c 2 if l k e then l e we have thus made sure that these two conditions are necessary and sufficient for the system to avoid the most elementary failures the assembly can always decide in all circumstances and each of its decisions cannot contradict any another in what follows all voting systems under consideration are supposed to meet both conditions c 1 and c 2 but this in not sufficient to avoid a la condorcet situations this is clearly shown by the example of the classical majority system in deed this system meets both conditions c 1 and c 2 and yet as we have seen it is not safe from paradoxical condorcet situations 4 remarks it will be observed that condition c 1 has the following consequence two distinct members x and y of the assembly cannot both belong to all the efficient coalitions since out of the singleton x and its complement only one can be efficient this same condition c 1 also implies that there are as many efficient coalitions as inefficient coalitions it is also clear that conditions c 1 and c 2 together imply that una nimity is efficient and the empty coalition is inefficient 5 two classical examples the ultrafilter a peerless tool 7 the typical example of voting systems is the majority system of course whose efficient coalitions are by definition the majority coali tions i e coalitions which outnumber their opposition this system satisfies condition c 2 but it only satisfies condition c 1 in assemblies having an odd number of members when an assembly has an even number of members there is a way very commonly used to avoid the difficulty by introducing a casting vote the majority system with a casting vote for the president is defined by distinguishing a particular member of the assembly the chairman the oldest the dean or any other person designated in advance and by declaring majority any coalition with more mem bers than the opposite coalition and also any coalition that includes the president and has as many members as its opposite this system still satisfies both conditions c 1 and c 2 whether the assembly is even or odd notice by the way that nothing forbids to consider a majority system with a minored vote for a mock president as would be the case for example with a group of schoolchildren wanting to lower the voice of the youngest the other best known system is the dictatorial system a particu lar member d of the assembly is designated or more often appoints himself efficient coalitions are those to which the dictator d belongs in this dictatorial system which obviously satisfies conditions c 1 and c 2 only the opinion of the dictator is taken into account notice that singleton d is then the smallest of all efficient coali tions i e it is contained in each other efficient coalition similarly it will be noticed that conversely a voting system satisfying condi tions c 1 and c 2 and having a smallest efficient coalition is necessarily dictatorial indeed as has been already noticed in 4 this smallest efficient coalition is necessarily a singleton 6 some complements 1 the case of multiple choice in a multiple choice question one can encode the set of choices using the binary 0 1 code 8 labib haddad this turns the multiple choice into a sequence of dichotomous choices doing that in a vote by yes or no we can always make room for and authorize abstention as well as blank votes re fusal to vote or any other modality the community would wish to introduce without removing anything out from the dichoto mous mode of operation described above 2 the method of weightings there is a variant to the ma jority system that of weighting votes it generalizes at the same time the majority system with a casting vote for the president and the majority system with a minored vote for a mock president as well as the dictatorial system to each member x of the assembly a a weight p x is as signed the weight p k of a coalition k is defined to be the sum of the weights of its members a coalition k is then termed efficient when its weight exceeds that of the opposing coalition kc i e when p k p kc the weights p x need not be integers they can be real numbers or even elements of any given linearly ordered group it is easily seen that conditions c 1 and c 2 hold in the system thus constructed if and only if the weights p x are never negative and no coalition has the same weight as its opposite 3 a counter example here is a very simple example of a vot ing system a e satisfying conditions c 1 and c 2 which cannot be obtained by any weighting on the finite 7 points projective plane a we define e to be the set of all subsets of the projective plane which contain at least 5 points and those subsets which contain at least one of the 7 lines in the plane 4 a relatively simple computation shows that for a three person assembly assuming the equidistribution of opinions the prob ability of meeting a condorcet situation in an election among three candidates is equal to 1 18 slightly more than 5 5 per cent of the cases 5 three friends three friends x y z decide to go to the cin ema they have the choice between three films a b c their the ultrafilter a peerless tool 9 preferences are as follows x would rather see a than b and b rather than c to y b is better than c and c better than a to z c is better than a and a better than b voting in order to compare the films pairwise the three friends rapidly end up with the following circular ranking a more than b more than c more than a a beautiful miniature of the condorcet effect fortunately the situation here is not so serious we know that the more persuasive the most charming of the three friends will win if this circular ranking does not occur more than 5 5 percent of the cases no one will worry if the frequency is still substantially lower this means that friendship here is coupled with common inclinations if it is much larger then we clearly face very strong feelings 7 how to avoid the condorcet paradox we already said that the majority system can produce a condorcet effect let us observe that only three persons are enough to have a condorcet effect but that three questions at least are needed for a voting system a e condition c 1 ensures the consistency of collective decision when a single question is asked about a single binary choice condition c 2 together with c 1 ensures collective consistency when two questions are asked but what must be added to ensure consistency when three or more questions are asked i e how to avoid condorcet s paradox the answer is simple it is necessary and sufficient that the intersec tion of any two efficient coalitions be efficient itself 8 lemma guilbaud a voting system a e satisfying conditions c 1 and c 2 avoids the condorcet effect if and only if it has the following property c 3 the intersection k l of any two efficient coalitions k and l is also efficient 10 labib haddad indeed if coalition h k l were not efficient we would be in a well known situation in game theory one could imagine a sequence of three questions p q r such that a positive answer to the first two implies a positive answer to the third and also imagine that we have p k q l and r h three questions of the following kind p do you want a member of coalition k to win the jackpot q do you want a member of coalition l to win the jackpot r do you want a member of coalition h to win the jackpot so the assembly would have decided through coalition k that the jackpot must go to a member of k it would have decided similarly through coalition l that the jackpot must go to a member of l it would have finally decided through coalition hc that the jackpot should not go to a member of h conversely if condition c 3 is satisfied no inconsistent decision is pos sible since there will always exist at least one member of the assembly who belongs to all the coalitions that have enforced these decisions and therefore he would have endorsed them all this member is supposed by hypothesis to be himself consistent alas the above proof lets us foresee that the remedy leads to ill 9 guilbaud s theorem a voting system meeting all three conditions c 1 c 2 and c 3 is dictatorial indeed let m be the intersection of all efficient coalitions using condition c 3 and induction coalition m is seen to be efficient it therefore is the smallest of all efficient coalitions 10 the dead lock and the way out we are deadlocked having to choose either condorcet effect or dic tatorship to get out of the dead end one could work out and this has been done all kinds of systems less rudimentary than those de scribed above but guilbaud s theorem has a character of robustness it also applies to these more complex decision making systems the ultrafilter a peerless tool 11 in 1951 kenneth arrow social choice and individual values john wiley sons new york 1963 announced his often quoted result on the impossibility for a non dictatorial system to reconcile certain nat ural conditions for consistency arrow establishes a general theorem guilbaud s theorem is a special case an exemplary case the theorem of arrow says that the sole decision making system which meets a list of natural broad enough compatibility and consistency conditions too long to enumerate is the dictatorial system one can verify minutely that conditions c 1 c 2 and c 3 imply one by one each of the conditions in the arrow list it follows that guilbaud s theorem is a special case of arrow s either condorcet effect or dictatorship indeed in one word the dif ficulty is such that no doubt it will not be enough to blow on it to make it fall so was it not our intent sketching thus the route between condorcet and arrow the knot is tight it deserves better than amused attention it involves all together politics but also sociology psychology economics and mathematics what is to be done against the theorem of arrow ah we had almost forgot to say that guilbaud s theorem holds provided the as sembly a is finite 11 ultrafilters those who know will already have recognized in the set of three conditions c 1 c 2 c 3 one of the many equivalent definitions of ultrafilters one of the other possible definitions which is particularly adapted to the circumstances is as follows an ultrafilter on a set a is a non empty set u of non empty subsets of the set a which has the following two properties for each subset k and l of a we have u 1 k l u if and only if k u and l u 12 labib haddad u 2 k l u if and only if k u or l u notice in these two statements the link between the operation in tersection with the conjunction and on the one hand and of the operation union with the disjunction or on the other which should not unduly surprise one easily verifies that the set of two conditions u 1 u 2 is equivalent to the set of three conditions c 1 c 2 c 3 in other words a system of voting a e satisfies the conditions c 1 c 2 c 3 if and only if the set of efficient coalitions e is an ultrafilter on the set a we are back to our concern and this provides one more suit to ul trafilters ultrafilters considered as voting systems ensuring the con sistency of decisions that is systems of vote avoiding condorcet effect to each element x of the set a corresponds the ultrafilter ux consisting of the subsets of a to which the element x belongs these are the trivial ultrafilters on a they correspond to the dictatorial voting systems the theorem of guilbaud simply reflects the well known following fact on finite sets all ultrafilters are trivial however on an infinite set there always exist non trivial ultrafilters provided we use the axiom of choice or another additional suitable axiom added to the classical zermelo fraenkel theory zf truth in mathematics cannot be decided with votes this short sentence is often heard launched during heated discussions at the moment the debate begins to produce its most specious arguments well try all the same in other words let us consider a voting system i u with i any set and u an ultrafilter on i 12 ultrapowers let us also consider a set x and ask that every member i of the assembly i chooses an element xi of the set x we thus obtain a family x xi i i xi of elements of x indexed by i and which in some way is the collection of individual choices of the members of the ultrafilter a peerless tool 13 the assembly but then what is the collective choice of the assembly according to the voting system defined by the ultrafilter u if there exists a well determined element e of x which an efficient coalition has chosen there is no hesitation saying that this element represents the collective choice of the assembly since the element was elected by a vote in other words if the set i i xi e belongs to the ultrafilter u it is legitimate to say that x e modulo u more generally if the assembly makes two consecutive choices let us say x xi and y yi we consider that these two choices are the same when there is an efficient coalition to say so that is when the coalition i i xi yi belongs to u we shall then say that we have x y modulo u this is an equivalence relation on the cartesian product xi one might have recognized straightforwardly with no detour the no tion of ultrapower indeed the set of all collective choices of the assembly thus defined is nothing else but the ultrapower xu of x with respect to the ultrafilter u i e the quotient the set of cosets of the cartesian product xi by the equivalence relation it is a mathematical construction that can metaphorically be inter preted as the result of the works of an assembly voting according to a given ultrafilter i have already had the opportunity to develop this metaphor elsewhere luminy 1985 see condorcet et les ultrafiltres loc cit one usually associates the name of los and the year 1955 even 1949 to the notion of ultrapower los j quelques remarques the ore mes et proble mes sur les classes de finissables d alge bres in mathematical inter pretation of formal systems amsterdam 1955 p 98 113 o matrycach logicznych prace wroclawskiego towarzystwa naukowego wroclaw 1949 we notice by the way that nobody would have missed to notice that this notion is so to speak in germ in the notion of germs of functions well known to geometers and analysts two functions f x y and g x y are said to be equivalent modulo a given filter f on x when there is some e f on which f 14 labib haddad and g coincide germs of functions according to the filter f are by definition the equivalence classes modulo this filter what happens however if for a given collection x xi of individual choices there is no well determined element e of x for which we have x e modulo u and this is inevitably likely to occur when the ultrafilter u is not trivial and the set x is infinite well we simply say that x modulo u is the collective choice of the assembly we would have thus created an ad hoc unreal object the price to pay in order to avoid at the same time dictatorship and inconsistency bourbaki uses a similar construction in his structures fondamentales de l analyse livre iv entitled fonctions d une variable re elle it serves him to define scales of comparison in a footnote on page 57 of chapter 5 in the 1951 edition the note apparently disappeared from the last gray edition bourbaki specifies the following about his construction this calculus on equivalence classes of locally equal functions plays an important role in many theories that will be developed in this trea tise especially in the theory of differentiable manifolds an important role did he say so the development of bourbaki culminates in an appendix on hardy fields bourbaki fonctions d une variable re elle fvr v 36 which as will later be noticed are a first sketch of renovated infinitesimals a first sketch because it does not contain the essential remarks about the permanence of first order formulas which is the salt of ultra products 13 ultraproducts more generally still if each individual i chooses a set xi to start with then limits his choices to elements of this set the collective choices are represented modulo u by families xi i i indexed by i where xi is an element of xi for each individual i in i the ultrafilter a peerless tool 15 this is nothing else but the ultraproduct of the family of sets xi with respect to u of course each ultrapower is a special case of ultraproducts by its votes the assembly will be able to handle all kinds of mathe matical objects and form ultraproducts of groups of fields of banach spaces of analytic functions what else do i know among the collective choices of the assembly some will be those that are conventional real and those which are fictional ways of talk ing to silence dissent but with these ways of talking we can rightly discourse and try to tell truth from falsehood in order to know whether a proposition is true or false we will let the assembly vote with respect to the system u and this method succeeds beyond all hope 14 the language without going into details let us say that those who practice math ematical logic have developed worked out and use formal languages with many symbols and very strict syntax to be safe from all past and to come disputes the mathematician could well do without all this complexity he only needs to know that these languages exist and have a knowledge of the basics not to shrink in front of this artificial barrier moving forward learning how to avoid missteps not to be impressed or put off by complicated words that cover simple concepts this is possible and even desirable if one does not want to get lost in the meanders and quicksands of the beautiful mathematical landscape to be more precise the proposals that will be submitted to the as sembly are stated expressed using a language called first order with equality and with the binary predicate of membership in a set theory in order to talk to the assembly just use negation not disjunction or the phrase there exists the equality relation and the membership relation a total of two connectors one quantifier and two specific binary predicates we will derive all other connec tors and quantifiers including the conjunction and implication the quantifier for all in the most simple usual way 16 labib haddad thus for example p and q means not not p or not q similarly for all x p x means not exists x not p x the assembly will understand perfectly well when told for all x x does not belong to x that the x we are talking about is the empty set 15 truth according to u let p x y be a statement in the agreed language submitted to the assembly where x xi y yi represent the choices of the assembly denote by v p x y or more simply v p when confusion is minimal the coalition of members who believe that this statement is satisfactory from their own point of view that is let v p v p x y i i p xi yi is true this coalition could be efficient or inefficient i e belong or not to the ultrafilter u if it is efficient we say that p x y is true according to u otherwise we say that p x y is false according to u when the statement p x y reads x y one will thus obtain v p i i xi yi this is a familiar coalition already encoun tered it follows that the following two expressions are synonymous 1 x y modulo u and 2 the statement x y is true according to u they both have exactly the same meaning and we have to say that everything has been done for that purpose similarly for the proposition q x x which reads x x we have v q i i xi xi this proposition q x x is true according to u if and only if a majority sorry i mean an efficient coalition of members i choose xi xi when this is the case we will still say that x x modulo u we have thus given precise meanings to predicates and in the fictitious world of collective choices meanings that largely overflow the ultrafilter a peerless tool 17 the usual sense they only overflow since they coincide with the usual sense for all real objects what is the relation between truth according to u and truth in our fictitious world they are one and the same that is the main result the most important 16 a fundamental lemma statement p x y is true if and only if an efficient coalition so decides in other words p x y is true in the fictitious world if and only if p x y is true according to u this lemma barely deserves a proof the language being itself so convincing the proof is very simple and is by induction on the com plexity of statements it could make an excellent exercise it is to be found in all textbooks that consider ultraproducts see for instance condorcet et les ultrafilters loc cit a sketch of the proof 1 if statement p only contains one of the two symbols or but no logical symbol the result follows from the definition of the meanings of these two predicates in the fictitious world 2 if statement p is of the form not q suppose the lemma has been established for q and just notice that v not q and v q are two complementary coalitions 3 if statement p is of the form r or s suppose similarly that the lemma has already been established for each one of the two statements r and s then notice that v r or s is the union of v r and v s 4 finally if p x y is of the form exits z t z x y we proceed as follows for each collective choice c ci the coalition w v p x y contains v t c x y indeed if i belongs to v t c x y then from i s point of view the statement t c x y is satisfactory in 18 labib haddad other words the statement exists z t z xi yi is true so that statement p xi yi is also true so that i also belongs to w suppose then that the lemma were established for statement t and whatever the choices involved then we reason as follows 1 statement p x y is true if and only if there exists a collec tive choice c ci such that t c x y is true which implies that v c x y is an efficient coalition and coalition w v p x y which contains it is also efficient 2 conversely for each i belonging to w there exists at least one indi vidual choice ci such that t ci xi yi is true we then construct a collective choice c taking arbitrarily for example ci 0 when i does not belong to w it is clear that this choice is irrelevant then coalition w is contained in v c x y for this choice of c if there fore w were efficient then v c x y would also be which implies by the induction hypothesis that t c x y is true and this in turn implies that the statement exists z t z x y is true which means precisely that p x y is true remark observe again the very last part of the previous proof if unanimity or simply an effective coalition is satisfied with a same clas sical real object e for example to approve the statement t e x y there is no hesitation to designate it as a choice of the community otherwise we create the new object c fictitious nonstandard that will represent the collective choice an ideal object mathematicians for a long time handle ideals in multiple and various forms kummer ideals points at infinity imaginary numbers the list is inexhaustible from this lemma immediately follows as a corollary the next key result on permanence of statements 17 the transfer theorem a classical statement is true if and only if the assembly decides that it is true applied to statements of the form not p this result assuredly says that a classical statement is false if and only if the assembly so decides the ultrafilter a peerless tool 19 the echo returning back says we can perfectly well decide by a vote if a theorem is true or false just look at this fictitious world seen through the eyes of members of an infinite assembly 18 an infinite assembly an infinite assembly this does not exist some would say this can however easily be created by a mathematician imagine an infinite countable assembly whose members would be nat ural numbers 1 2 n let such an assembly vote according to a non dictatorial ultrafilter such ultrafilters exist we already said so the system not being dictatorial no member alone can be an efficient coalition by himself more generally under condition u 2 no finite coalition can be efficient so that the opposing cofinite coalition is efficient ask the assembly to elect an integer imagine that each member votes for himself what can be said about the winner denote him by he is the collective choice the assembly decided he was the winner he is an integer since the assembly is unanimous to say so compare this choice to the integer 7 for example only the first seven members of the assembly would say he does not exceed 7 all others a majority agree to say that exceeds 7 the same would happen if one compared to any other integer n we would always have an efficient coalition say that exceeds n and the assembly is sovereign thus by decision of the assembly we can declare that is an integer greater than all natural numbers he well deserves the name of infinitely large integer the winner is an infinite integer similarly voting for a real number if each member n of the assembly chooses the fraction 1 n the collective choice of the whole assembly nothing else but 1 is a positive rational number smaller than any real positive number so it is an infinitely small number not zero i e a positive infinitesimal here we are in the domain of the theory of renovated infinitesimals alias nonstandard analysis of which a robinson gave in 1961 per fectly rigorous foundations which nobody expected anymore because people stopped believing they could exist robinson a non standard analysis north holland amsterdam 1966 this non standard analysis brought to heights at its beginnings much reviled 20 labib haddad subsequently did not probably deserve all this honor nor this unwor thiness but this altogether is another story by its choices and successive decisions the assembly produces new mathematical objects determines their properties decides of their mu tual relations states noteworthy theorems which overflow classical mathematics and particularly contains all the elements needed for a sound theory of infinitesimals e lections ultrafiltres infinite simaux ou le paradoxe de condorcet loc cit through this and even if at each step we do not reach unanimity we find unanimity again for statements about conventional objects this underground journey of thought is similar to the process which through imaginary quantities leads back to real identities cardan formulas moivre formulas one no doubt will evoke too the per manence of identities by analytic continuation and monodromy passing through fiction does not alter reality in any way when reality reappears condorcet et les ultrafiltres loc cit not only such a process alters in no way reality but it enriches it greatly 1785 condorcet 1952 guilbaud 1937 cartan 1951 arrow 1955 los 1951 bourbaki 1961 robinson contemplating these dates one starts a dream a red thread seems to connect them through the years it goes it comes goes back in time runs and comes back again and weaves a weft going from condorcet paradox to infinitesimals can one help imagining that the marquis unconsciously or not have had a premonition of them that he made one night this strange and striking dream e lections ultrafiltres loc cit 19 the second degree the ultrafilter a peerless tool 21 complicating one can imagine several assemblies ip each equipped with a voting system represented by an ultrafilter up each assembly deliberates and determines itself independently of the others in order to come out with a joint decision for all these assemblies it is agreed to resort to a voting system for a synthesis defined by an ultrafilter u on the set p of all indices p that is on the large gathering of the respective spokesmen p of these assemblies the procedure is as follows for a given question the collective response of the family of assemblies is yes when the set of all those p whose assembly ip answered yes is an efficient coalition of the assembly p with respect to ultrafilter u this is a type of a two degrees voting procedure reminiscent of the elections for the senate in france let us simplify a moment s reflection shows that one can do without a second degree in this procedure just consider the union i of all the assemblies ip and define the set s of efficient coalitions in the assembly i by the following rule coalition k is efficient in i whenever the set p p k ip up belongs to u this one degree system is equivalent to the two degree system in fact two conditions are assumed 1 if an individual i belongs to two or more different assemblies ip his choices are supposed to always be the same in each of these assemblies 2 the spokesmen are to comply of course with the imperative mandates of the assemblies that delegate them the ultrafilter s defined on the set i for this voting system is the ultrafiltered sum with respect to u of the family of ultrafilters up this notion was introduced explicitly by g grimeisen in 1960 for special purposes in general topology grimeisen g summation von filtern und iterierte grenzprozesse i math ann 141 1960 318 342 and ii ibid 144 1961 386 417 let us iterate then the next idea comes naturally an assembly i governed by a constitution or voting system u creates by its choices as we have seen a world of new fictitious objects mathematical ob jects or others consider a second assembly j governed by an ultrafilter v which takes a look supervises this new world created by the assembly i the new world that already contains the real world of course the idea is not so crazy one inevitably thinks of second instance courts in france 22 labib haddad as above a moment of reflection slightly longer shows that here too a simplification occurs the overall role of these two assemblies can easily be vested to a single assembly i j consisting of all pairs i j with the following rule a coalition k in i j is efficient whenever the coalition l of all members j of j for whom the set k j i i i j k belongs to u belongs itself to v that is to say whenever we have l j j i i i j k u v the ultrafilter w of efficient coalitions thus defined on the product set i j is the ordinal product of ultrafilter u by ultrafilter v their roles are clearly not symmetric this operation as we know as we see reduces to an ultrafiltered sum when splitting the assembly i j into horizontal sub assemblies ij i j i i in other words we let assembly i vote j times and every member i can vary his choices in each vote however he wishes the world produced by the superposition of the two assemblies i and j is the same as the world of the product assembly i j 20 the second order and the double ultrapower very early in the use of infinitesimals the need was felt for several orders of infinitely small and several orders of infinitely large numbers upon introduction of nonstandard analysis anew the desire to have those two scales has manifested itself several means to achieve it had been suggested it seems to me that there is no need to go too far nor complicate simple issues to reach second order the double ultrapower is enough to achieve higher orders one can just iterate and instead of two assemblies take as many as needed let them then vote successively hierarchically as shown above this will provide all levels of orders desired with no effort no changes in the manner the fictitious worlds are looked at haddad l la double ultrapuissance se minaire d analyse universite de clermont ii anne e 1987 1988 ex pose n 24 21 ultralimits one more word about this subject to say the fol lowing the utralimit corresponds to the superposition of an infinite the ultrafilter a peerless tool 23 sequence of assemblies potential not actual curiously enough here the reduction of the sequence to a single assembly is no more appropriate 22 condorcet and ultrafilters it is very unlikely to be belied if one thinks that the marquis de condorcet was unaware of ultrafilters similarly it is quite likely that henri cartan inventing them was thinking more to formulate the notion of limit in all generality rather than avoid the marquis paradox condorcet and ultrafilters however the encounter was inevitable it owes less to chance than to necessity the metaphor that results allows any layman as we have seen to enter the nonstandard chapel without prior initiation a metaphor is properly a transportation a transfer of meaning this can lead far away condorcet et les ultrafiltres loc cit 23 provisional conclusion there had been thoughts given to measure the cohesion of a commu nity in inverse proportion to the distortion between real frequencies of situations a la condorcet and theoretical probabilities to create a typology according to the various configurations of coalitions the idea of measuring abstractly the cohesion of a community using the frequency of situations a la condorcet is attractive however i have seen few texts putting it into practice in human societies one will probably have to learn how to cope with the condorcet effect however it is curious to hear so seldom and so discreetly talks about it we cannot but feel at times that those who know stay careful not to warn those who do not yet know the problem of general interest or average opinion in addition to its political social economic psychological legal logical and math ematical facet certainly presents a philosophical aspect of course shoemaker not above the sandal sutor ne supra crepidam but 24 labib haddad one cannot help thinking that condorcet s paradox shall always re main a tight knot in the very heart of the pursuit of general interest and common good as game theory teaches two completely informed players always have theoretically a resting place to retrench with three players and on no possible retreat plays get animated games become dangerous as we know underground trains of thought often borrow on metaphors and metonymies the conscious activity too from a mutual fund we take our own pictures to each his favorite a multitude of looks laid on the same object if we can associate infinitesimals to the resolution of conflicts i will myself see more than a chance encounter an enrichment so minute be it of our imagination a small bunch of pictures denjoy s expres sion 24 conditions for a consistent ranking we will not leave the subject of voting systems without addressing a question that seems to have much preoccupied theorists in econ omy after the work of arrow to find conditions for the aggregation of individual rankings to lead to a collective consistent classification conditions that must be imposed on a set of individual rankings pro files as they sometimes are called not to the voting system itself of course here is the problem we are given an assembly a and a number of candidates a b c each member of the assembly makes his own ranking putting these candidates in the order of his preferences for example a b c it is assumed that these rankings are linear orders avoiding ties the assembly then proceeds to a comparison of the candidates two by two by successive votes this results into a collective ranking the issue is to find conditions on the set of all individual rankings so that this collective classification be itself a linear order i e contains no cycle it will be noticed by the way that the question needs only be settled in the reduced case where there are three candidates only indeed the the ultrafilter a peerless tool 25 collective ranking is a linear order if and only if the induced order on each one of the triples of candidates x y z is linear a binary relation on a set is a linear order if and only if its restriction to each of the triples of this set is a linear order this is clear let us mention the recent text of elsholtz christian and chris tian list a simple proof of sen s possibility theorem on majority decisions elemente der mathematik 60 2005 n 2 45 56 here is the authors summary condorcet s voting paradox shows that pairwise majority voting may lead to cyclical majority preferences in a famous paper sen 1966 sen a k a possibility theorem on majority decisions econo metrica 34 1966 491 499 reprinted in sen a k 1982 choice wel fare and measurement oxford blackwell identifies a general condition of individual preference orderings called triplewise value restriction which is sufficient for the avoidance of such cycles this note aims to make sen s result easily accessible we provide an elementary proof of sen s possibility theorem and a simple reformulation of sen s condition we discuss how sen s condition is logically related to a number of pre cursors finally we state a necessary and sufficient condition for the avoidance of cycles and suggest that although there is still some log ical space between that condition and sen s sufficient condition sen s condition cannot be further generalized in an appealing way it seems according to elsholtz and list that sen s sufficient con dition is the best that has so far been found let us emphasize the last sentence we state a necessary and sufficient condition for the avoidance of cycles and suggest that although there is still some logical space between that condition and sen s sufficient condition sen s condition cannot be further generalized in an appealing way all this takes place in the domain of the classical majority voting system we will show how to significantly improve these results make them perfectly clear and legible in the more general context of generalized voting systems and how to obtain a condition both necessary and sufficient quite attractive and appealing a few words first to recall what sen s triplewise value restriction is it is the following condition 26 labib haddad sen whatever the triple x y z of candidates there is a rank r 1 2 3 such that one of these candidates t x y z is not ranked r by any of the voters 25 a general framework take any voting system a e for an assembly a where e the set of efficient coalitions satisfies conditions c 1 and c 2 of course as already said the classical majority system fulfills these conditions provided a clause is added that of a casting vote for example for any given three candidates a b c only six consistent rankings exist label them as follows using the elements of the cyclic group z 6 z of order 6 1 a b c 2 a c b 3 c a b 4 c b a 5 b c a 6 b a c this labelling has the following peculiarities rankings p and p 1 always have either a first same candidate or a last same candidate to go from p to p 1 one disturbs as little as possible these rankings i e one simply swaps the ranks of the two first or of the two last candidates in a sense rankings p and p 1 are as close as possible finally rankings p and p 3 are opposite for example one has 1 a b c 4 a b c thus in particular the same candidate occupies the second rank in two different rankings p and q if and only if we have p q 3 i e when the two rankings p and q are opposite that being said introduce the following notations denote k p the coalition of those members of the assembly who choose p for a ranking of the three candidates similarly denote k p q the union of coalitions k p and k q and let k p q r be the union of coalitions k p k q and k r the ultrafilter a peerless tool 27 26 a solution then introduce the following three conditions s there is a p such that coalition k p p 1 or coalition k p p 3 is empty t there is a p such that coalition k p p 1 is efficient v there is a p such that both the coalitions k p p 1 p 2 and k p 1 p 2 p 3 are efficient 1 condition s is the natural generalization of sen s condition because in the majority system condition s is none other than con dition sen above 2 condition t is a consequence of condition s indeed to see that s implies t it suffices to notice this when k p p 1 is empty the two coalitions k p 2 p 3 and k p 4 p 5 are opposite so that one of them is efficient similarly when k p p 3 is empty the two coalitions k p 1 p 2 and k p 4 p 5 are opposite and one of them is efficient 3 condition t implies condition v indeed if k q q 1 is efficient both coalitions k q 1 q q 1 and k q q 1 q 2 which both contain it are efficient then just take p q 1 4 condition v implies that the collective ranking is linear indeed suppose that k p p 1 p 2 and k p 1 p 2 p 3 are both efficient the ranking p has the form x y z there are only two possible cases in the first case one has p x y z p 1 x z y p 2 z x y p 3 z y x 28 labib haddad the efficient coalition k p p 1 p 2 thus imposes the collective preference x y and efficient coalition k p 1 p 2 p 3 the collective preference z y whatever the collective preference between x and z the collective ranking will always be linear it will be either p 1 or p 2 in the second case one has p x y z p 1 y x z p 2 y z x p 3 z y x here the two efficient coalitions k p p 1 p 2 and k p 1 p 2 p 3 force respectivly collective preferences y z and y x so that the collective ranking is still linear this will again be either p 1 or p 2 5 a small surprise finally comes out from the following result condition v is not only sufficient but also necessary in order that the classification of the three candidates a b c be consistent indeed suppose the collective ranking of the three candidates is linear even if we have to change the names of the candidates we can assume that this ranking is a b c the coalition of voters for whom a b is efficient this coalition is none other than k 1 2 3 similarly the coalition of voters for whom a c is efficient and that is coalition k 6 1 2 so that condition v is satisfied it would have been noticed that condition v in essence says that individual choices must be neighboring and not too much scattered which was predictable 6 the necessary and sufficient condition v and even more the sufficient condition t certainly have some character of simplicity of course one can easily translate each of these conditions for the case of the conventional majority voting system in terms of voting numbers in different coalitions it must then be limited to the case where voters are odd in number or accept the complications due to one of the additional the ultrafilter a peerless tool 29 terms like casting vote in the case of a majority system for an odd number of voters for example condition t is written just like this there is a p for which we have k p p 1 k p p 1 c 7 we have here dealt with the cases where rankings do not include ties the general case where rankings are preorders can have a similar treatment slightly more complex of course 27 remarks 1 the issue arises as to the precise place condition t has between the two conditions s and v simple examples in the majority sys tem itself can show that t is neither equivalent to s nor to v in order to see that condition t does not imply s one has just to look at the following situation 5 voters out of whom 3 choose ranking 1 the others two choosing respectively ranking 3 and 5 which means that k 1 3 k 3 k 5 1 and k 2 k 4 k 6 thus none of coalitions k p p 1 and k p p 3 is empty while coalition k 1 2 for example is a majority condition t is satisfied not s to see that condition v does not imply t look at the following situation 5 voters choose respectively the first 5 rankings 1 2 3 4 5 no one chooses 6 i e each of coalitions k 1 k 2 k 3 k 4 and k 5 is a singleton while k 6 is empty thus each of the coalitions k p p 1 contains at most 2 members so that none is a majority however coalitions k 1 2 3 and k 2 3 4 each contains 3 members and therefore both are majorities this means that condition v is satisfied but not t 2 since t implies v which in turn implies lack of inconsistency this condition t a fortiori implies the consistency of the collective ranking here is a direct proof which thus also proves in a very simple way that sen s condition s is sufficient to ensure consistency of the collective choice indeed if a coalition k p p 1 were efficient it would dictate the choice of the first or of the last candidate in the two rankings p and p 1 depending on the cases and the ranking of the two other candidates would not introduce any inconsistency for example if 30 labib haddad k 1 2 were efficient collective preference would be a b and a c it little matters then if we had b c or c b the collective ranking will always be linear 28 the ultrafilter a conciliator out of the cacophony that would result if each member of the infinite assembly 1 2 3 n gives his own opinion the utrafilter u derives a unique sound that harmonizes all these opinions so diverse and varied it can also have a similar role in classical analysis as we shall readily see we also take time for some reminders 29 the ultrafilter a moderator the behavior of a real sequence which is not convergent can be quite erratic very chaotic as we know let u be a nontrivial ultrafilter on the set n 0 1 2 n of natural numbers each real sequence x xn has a limit limu x with respect to this ultrafilter recall the following the limit of a real sequence x xn n n with respect to an ultrafilter u on n is the sole element r of the completion r r such that for each neighbourhood v of r there exists a member x u such that xn n x v the concept of limit with respect to an ultrafilter is classical it is to be found in every textbook on topology this limit is a real number when the restriction of the sequence x to a k u is bounded otherwise it is equal to or depending on cases imagine the assembly n equipped with the voting system defined by the ultrafilter u let e be the winner relative to a given collective choice x xn from the assembly s point of view the winner e is a real number let us say hyperreal to avoid confusion when the limit limu x is finite and equal to r the elect e the hyperreal number is infinitely close to the real number r in the very precise sense that the difference e r is infinitesimal otherwise the hyperreal e is infinitely large either positive or negative depending on cases thus in particular every finite hyperreal is infinitely close to a real number which is its shadow in the real world somehow the shadow of an infinitely large hyperreal is of course by definition either or according if it is positive or negative the ultrafilter a peerless tool 31 in this context and as far as i know it was h jerome keisler who introduced the word hyperreal as for the word shadow ombre so appropriate i know that we owe it to georges reeb the ultrafilter moderates the behavior of sequences and to each object it creates in the fictitious world hyperreal attaches an infinitely close object in the real world its shadow notice also the following the function fu defined as fu x limu x is a positive linear form on the space b n of bounded real sequences 30 banach generalized limits as we well remember stefan banach introduced the notion of a generalized limit in his famous book the orie des ope rations line aires warszawa 1932 a few years before the introduction of the concept of ultrafilter he expresses himself in particular as follows on p 34 a toute suite borne e n on peut faire correspondre un nombre limn n de fac on que les conditions suivantes soient remplies to any bounded sequence n can be attached a number limn n such that the following conditions hold the conditions which the operation lim defined on the space b n must satisfy expressed in today s language are lim is a positive linear form such that limn n 1 limn n and limn 1 1 the lim operations which satisfy these conditions were called ba nach generalized limits of course banach establishes the existence of these operations with the help of his theorem on the extension of the linear functionals bounded by a semi norm as we would say nowadays previously rene baire had introduced the concepts of upper and lower limits of a real sequence which satisfy the following inequalities inf n xn 6 lim inf n xn 6 lim sup n xn 6 sup n xn 32 labib haddad of course any positive linear form f defined on the space b n satisfies for each real sequence x xn the following inequalities lim inf n xn 6 f x 6 lim sup n xn therefore f is in particular continuous for the norm x supn xn as we know the condition limn n 1 limn n says that the operation lim is invariant under shifts of sequences which amounts to say that any finite number of terms of the sequence can be removed without changing the value of its generalized limit as for the normalization requirement limn 1 1 it is not really essential but to exclude the null form in fact given any positive linear non zero form f defined on the space b n invariant under shifts the function g x f x f 1 is a generalized banach limit let us take one step more let f be any positive linear form defined on the space b n and such that f 1 1 for each real bounded sequence x xn first set tn 1 n 16 k 6 n xk then t tn and g x f t the function g is then a generalized banach limit it is a straightforward exercise to check that g has the the required proper ties in other words the emphasis is on the set of all positive linear forms on the space b n that being said let us go back to a nontrivial ultrafilter u on n and for each sequence x b n set tn 1 n 16 k 6 n xk then t tn and finally g x fu t limu t the function g is a generalized banach limit 31 ultrafilter spaces let e be any set and denote e the set of all ultrafilters on e this should be read upsilon of e we already know indeed that each point x e defines a trivial ultrafilter ux we thus have an injective map x 7 ux from the set e into e this injection is used to identify the set e with the subset of trivial ultrafilters in e this identification point to point is safe except in exceptional cases the ultrafilter a peerless tool 33 1 if the set e is finite all ultrafilters on e are trivial so that we have e e 2 if the set e is infinite and if we use a set theory with axiom of choice we already know that nontrivial ultrafilters exist on e and we can in fact prove that there are quite a lot of them to be specific if card e is infinite then card e 22 3 it is also known that there are models of set theories in which infinite sets exist but nontrivial ultrafilters do not assuredly theories without the axiom of choice in other words in these models we always have e e whatever the set e is 4 to each subset f e is also associated the set f of ultra filters on f each ultrafilter v on f is the trace of a unique given ultrafilter u on e identifying v to u we can also safely identify f to the corresponding subset of e 5 that being said the set f f e is a basis for the open sets of a topology on the set e this canonical topology turns the set e into a compact space the stone space of ultrafilters on e this space is very usually denoted e it is as one can prove the stone c ech compactification of e considered as a space with its discrete topology there are many ways to obtain compactifications the method that consists in using ultrafilters is one of the most natural it is well known we will see below how e is the spectrum of the ring p e 6 let us go a little bit backwards see paragraph 19 to have a new look at the family of ultrafilters up p p on a set i and the ultrafilter u on the set p of indices the grimeisen ultrafiltered sum relative to u of the family up p p simply appears as the limit in the compact stone space i of the family of ultrafilters relative to the ultrafilter u 7 spaces of ultrafilters play a considerable role in general topol ogy they hold an important place in most of the treaties bourbaki however relegated them as exercises which form one must confess a non negligible part of his treaty it is known for example that all compactifications of a completely regular space e are quotients of the compact stone space e 34 labib haddad 8 the stone space e has also another interpretation it is the spectrum of the boolean ring p e of the subsets of e indeed the prime ideals of this boolean ring which are exactly its maximal ideals are in a bijective correspondence with ultrafilters on e more precisely let m be a maximal ideal in the boolean ring of subsets of e the set u k k e and e rk m is an ultrafilter on e and of course we also have the dual relation m k k e and e rk u all those things and many more are classical and well known let us say a few words of a somewhat disregarded use of ultrafilter spaces and which perhaps it is interesting to be aware of all the same 32 nasses creels lee be any topological space whose set of open subsets is o define a graph t in the product space e e as follows u v t u o v the graph t was named the nasse of the topological space e haddad l une repre sentation des topologies c r acad sci paris 255 1962 2702 2704 and sur quelques points de topologie ge ne rale the orie des nasses et des tramails ann fac sci univ clermont n 44 1970 fasc 7 3 80 the graph t thus is a binary relation on the set of ultrafilters on e and as usual in order to say that we have u v t we can write either one of the following u t v or v 1 t u or v t u or u 1 t v where 1 t is the opposite reciprocal or inverse relation without any detour one verifies that t is a reflexive and transitive relation i e we always have u t u u t v and v t w u t w the ultrafilter a peerless tool 35 simply starting with the definitions and taking the direct path one sees that relation t is reflexive since u o u moreover u o v and v o w clearly imply u o w whence t is transitive the nasse t is a preorder on the set e of ultrafilters it contains all the information about the topology of the space e and thus reduces in a sense the study of topologies to that of preorders when the set of all ultrafilters e is equipped with its canonical topology i e when one uses the stone space e one perceives that the nasse t is a closed subset in the product space e e moreover it has the following peculiarity the preimage by t of each open subset of e is again an open subset of e that is a is an open subset of e 1 t a is an open subset of e as in the case of continuous mappings those binary relations which thus mimic continuous mappings choquet called them mi open re lations relations mi ouvertes the nasse t is thus a closed and mi open preorder on the stone space e what is remarkable about those conditions is that they characterize the nasses of topologies in the sense that each closed and mi open preorder on the stone space e is the nasse of a topology on the set e there is a bijective correspondence between the set of topologies on e and the set of closed and mi open preorders on e more generally a nasse is defined to be a reflexive binary closed relation on the space e a binary relation r is said to be idempotent when rr 2 r r so nasses of topologies are precisely the idempotent and mi open nasses remove the idempotence and fall essentially on choquet pretopolo gies take out the mi open condition and find the topogenous orders of csa sza r add the condition of symmetry and obtain a useful repre sentation of proximities see quelques points de topologie ge ne rale the orie de nasses et des tramails loc cit nasses cover a wide range of classic topological structures and their best known generalizations in the text quoted above one will find 36 labib haddad a complete enough treatment of these questions to give a small foretaste we will add this given a topological space e and its nasse t the necessary and sufficient condition for the space to be normal is that we have t 1 t 1 t t similarly the space e is extremally disconnected if and only if we have 1 tt t 1 t let us open one last parenthesis in this paragraph to say the follow ing applied to the case of finite sets the introduction of nasses shows in particular that topologies on a finite set are in a bijective corre spondence with preorders this fact quite simple seems to have been rediscovered again and again researchers encountering it for the first time could think legitimately be the first to have observed it we can say in a sense that the theory of nasses is an extension of this simple fact to more complex topological structures 33 choquet and ultrafilters before concluding i still like to mention specially the quite remark able use choquet did of ultrafilters in his work alas i will not have the time nor above all the sufficient skills to give a satisfactory overview also i shall content myself with an overview that will focus on only one of the many highlights of all the impressive uses he made of them what i am going to talk about is a tiny part of a very dense and essential text choquet g convergences ann univ grenoble sect sci math phys 23 1947 1948 57 112 as we know gustave choquet is arnaud denjoy s student who himself wrote down the superb lessons that rene baire gave at the colle ge de france lec ons sur les fonctions discontinues gauthier villars paris 1905 among the three the filiation is clear and some day a historian of mathematics will surely bother to extricate the themes and essential episodes of this filiation then secure them through writing so the oral tradition will live on take any topological space e take a family x xi i i of subsets of e indexed by a set i and a filter f on i introduce the concepts of upper and lower limits of the family x relative to the filter f as follows as we see inspiration comes from afar the ultrafilter a peerless tool 37 begin associating to the filter f its grill g y y e x y 6 forall x f denote f the set of all those ultrafilters on i that contain i e which are finer than f of course the filter f is the intersection of all those ultrafilters which implies as can easily be seen that g the grill is the union of these ultrafilters g u f u it can be noticed that the grill g is equal to the filter f if and only if f is an ultrafilter for each subset j i set xj i j xi let xj denote the closure of xj and set lim inf f x j g xj lim sup f x j f xj 1 as should be the upper limit is larger than the lower limit lim inf f x lim sup f x they both are equal if f is an ultrafilter but sure enough this is not the only case when they are equal when both limits are equal denote limf x their common value and say that the family x has a limit relative to the filter f in particular the family xi i i always has a limit relative to each of the ultrafilters on i whichever they are notice that more generally for each of the filters f f on i we have lim inf f x lim inf f x lim sup f x lim sup f x 2 by their nature the upper and lower limits are closed subsets of the space e and their values do not change on substituting to the family x of subsets xi the family x xi i i of the closures of the xi s so attention can be restricted to families of closed subsets of e 3 denote e the set of all closed subsets of the space e we thus have a notion of limit in the set e to be more specific let x xx x e be an indexed family whose set of indices is i e and such that each closed set x is its own index given any filter f on the set e its upper and lower limits are defined to be the corresponding limits of the indexed family and we simply set lim inf f lim inf f x 38 labib haddad lim supf lim sup f x and if both limits are equal limf lim f x does this turn e into a topological space that is can this limit be redefined as a limit in a suitable topology on e 4 in particular each ultrafilter u on e has a limit in e in order that the limits of filters on e thus defined originate from a topology on e they have first to satisfy the following condition limf f limu f for each ultrafilter u f that is those limits must define a pseudo topology in the sense of choquet on the set e we prove that this indeed is the case showing more generally what follows 5 take any family x xi i i of subsets of e indexed by a set of indices i and a filter f on i we then have see convergences loc cit page 64 lim inf f x u f lim u x lim sup f x u f lim u x since the grill g is the union u f u the first formula is seen to hold with little detour as for the second in order to show that it also holds it may be convenient to observe the following result which can be of interest by itself given a family x xi i i for each point x e and each subset v e set i x v i i i v xi 6 then i x i x v v neighbourhood of x in e it is easily seen that we have i x u v i x u i x v for all subsets u and v of e which proves that i x is a filter base on i provided that does not belong to i x we then prove a little less easily the following two the ultrafilter a peerless tool 39 characterizations x lim inf f x i x f x lim sup f x i x g the following duality binds a filter f to its grill g x g x meets each y f and x f x meets each y g starting from the definitions proceed by equivalence as follows x lim inff x for each j g and each neighbourhood v of x we have j i x v 6 for each neighbourhood v of x we have i x v f i x f which establishes the first characterization do the same for the second that should be enough to prove the second formula it is based on the following classical fact a filter is contained in the grill g of f if and only if it is contained in one of the ultrafilters u f we thus have x lim supf x i x g exists u f such that i x u x u f limu x 6 the pseudo topology thus defined on the set e is not always a topology not even a pretopology as examples can show see conver gences loc cit page 87 when e is a hausdorff space an important special case singletons x are closed sets in e so that e can be iden tified to a subset of e through an injective map and moreover the pseudo topology induced on e coincides with the original topology given on e still more we then have the following noteworthy results 7 if the space e is hausdorff the pseudo topology on e is a pretopology if and only if e is locally compact when that is the case this pretopology is a topology itself the subspace 0 e e r is locally compact and e is its alexandroff compactification in particular if e is compact the space 0 e is compact it is the space of non empty compact subsets of e 8 once wrought choquet uses this tool in the study of many valued relations between two topological spaces l e tude des relations multivoques entre deux espaces topologiques which he concludes with a masterful study of relationships between convergence and local uni form convergence more precisely between the abstract contingents and 40 labib haddad paratingents leading to simple statements which are a generalization and geometrization of the results of baire and those theorems which m denjoy put at the base of the theory of functions of a real variable loc cit 9 without going into details just in order to give a little bit of the flavour of these results we still add the following let u be a metric space a compact metric space p e u two subsets and p e r p p a map continuous with respect to its first argument for each given value of the second at each point x p are defined the contingent c x of e in x as well as the paratingent p x of e in x relative to p associated to the map that is where it would take much time to enter into details choquet proves the following result theorem for each point x in p except at the points x in a f meager subset of p the paratingent p varies continuously and c x p x this is the utmost generalization of baire s classical result about the set of continuity points of pointwise limits of sequences of continuous functions on the interval 0 1 10 needless to recall that spaces of closed subsets e and their subspaces abound specially in analysis and geometry each is equipped with its canonical pseudo topology often thinner than the as sociated topology and therefore more stingy on limits there are spaces of curves spaces of manifolds spaces of plane compacta there is the subspace e read kappa e of compact susbsets of a haus dorff space e a subspace of e let us also recall this among these spaces of closed subsets we must reckon also the many function spaces the graph of a continuous function on a topological space e with values in a hausdorff space f belongs to the space e f since it is closed in the product space e f 34 as a fermata let us get back to our assemblies let i be an assembly whose voting system is governed by an ultrafilter u take a family x xi i i of subsets of a topological space e the assembly transforms x into a the ultrafilter a peerless tool 41 collective choice whose representation is an object m in the fictitious world from its own point of view the assembly considers m as a subset of e a closed subset if the xi s are all closed the shadow of m in the real world is nothing else but limu x in a very precise sense but that s another story epilogue 1 the paradox of the marquis de condorcet we will try to take a new look at the first two examples of condorcet 1 on the first example of condorcet imagine an election where 60 voters must choose one of three candidates a b c a first round gives the following results a 23 votes b 19 votes c 18 votes if the election is a l anglaise i e a single round and plurality then candidate a having the plurality of votes is elected if the election is a la franc aise i e the way the french president is elected only the two candidates a and b coming top compete in a second round so the supporters of candidate c scattering their votes decide for the election of course it is understood that voters do not change their minds and do not abstain in the second round assume that the supporters of c split as follows 18 c b a 16 a b 2 that is out of the 18 supporters of c 16 prefer b to a the other 2 prefer a to b so that b is elected by 19 16 35 votes 60 finally it can be decided a la condorcet to compare the candi dates pairwise let the overall situation be sketched as follows 42 labib haddad 23 a c b 23 b c 0 19 b c a 19 a c 0 18 c b a 16 a b 2 comparing the candidates pairwise we get the following results b a by 19 16 35 votes 60 c b by 18 23 41 votes 60 c a by 18 19 37 votes 60 so the voters clearly say rather b than a rather c than b and rather c than a each choice being decided by a large majority which gives the following order c b a so that c must be the winner this example shows that according to the voting system chosen the elect is a b or c respectively this indicates a significant sensitivity of the results to the voting system but there is still more as shown in the following example of con dorcet 2 the second example of condorcet imagine again an election where 60 voters must choose one of three candidates a b c the situation can be sketched as follows 23 a b c 23 c b 0 19 b c a 17 a c 2 18 c b a 8 a b 10 the ultrafilter a peerless tool 43 comparing the candidates pairwise we get the following results a b by 23 10 33 votes 60 b c by 19 23 42 votes 60 c a by 18 17 35 votes 60 which is a circular inconsistent classification a b c a 3 comments 1 let us insist again on the fact that the classification thus obtained is circular inconsistent 2 alliances and coalitions in the election a la franc aise a and b are selected at the end of the first round on the second round a is elected by 33 votes 60 we can presume that each voter is well aware of the situation he knows the marked preferences of all others as in a kind of game with complete information and is able to analyze the consequences of all votes in the light of the rule of the game here is what could happen among the 19 supporters of b there are 17 for whom c is a better candidate than a they would be tempted to vote for c in the first round in order he be elected at the outset by 18 17 35 votes 60 knowing that the 23 supporters of a who all prefer b to c would be tempted to offer to the supporters of b an alliance in order to see him elected right out at the first round by 19 23 42 votes 60 but among the 18 supporters of c there are 10 that still prefer a to b and who might consider forming an alliance with the supporters of a and make him win at the first round by 23 10 33 votes 60 seeing this the 17 supporters of b who still prefer c to a would offer to add their votes to those of the 18 supporters of c letting him win so doing at the first round by 18 17 35 votes 60 this round dance has no reason to stop it could go on for a long time 44 labib haddad all this is possible because there is a majority coalition of 35 voters who prefer c to a and can elect him at the first round similarly there is a majority coalition of 33 voters who prefer a to b and can elect him at the first round finally a majority coalition of 42 who prefer b to c ready to elect b at the first round how does this round dance stop in real life in practice with a lack of any additional data no one can anticipate nor predict the behavior of the 60 voters this is probably no surprise to those who read the book by john von neumann and oskar morgenstern theory of games and economic behavior princeton university press princeton 1953 3 i developped this example one day in front of young students fu ture philosophers who attended my course on initiation aux mathe matiques introduction to mathematics in their first university year wanting to see their reactions i asked them what they would do them selves in such circumstances i was only moderately surprised to hear many answer that they would vote for their first choice at the first round no matter what could happen and that any other behavior would amount to skulduggery i tried somewhat vainly to make them feel the difference between skulduggery and compromise show ing among other things to potential supporters of b that it would be a pity not to improve their terms allying with supporters of c who would still like to see better b elected than a lost efforts i had already encountered this form of misunderstanding among many adults discovering for the first time the condorcet paradox a lot of stupor followed by disbelief leading to sterile denial wanting to go further in order to get to the bottom of the matter i submitted another example more striking so to speak to my students 4 the council of elders in a remote land undetermined and in old times the life of this city was governed by a council of elders who held in their hands the three powers executive legislative and judicial they established the following law by a two thirds majority p each murderer will be punished you can hear murderers will be executed but this time is over the ultrafilter a peerless tool 45 some time later they had to judge untel suspected of being a murderer sitting as a court they listened carefully to the arguments of the pros ecutor then to those of the defender after a lengthy deliberation they decided by a two thirds majority q untel is guilty when the time came for sentencing at the general surprise they de cided by a two thirds majority r untel shall not be punished how can this be just look at a miniature of condorcet situations one third of the council voted yes for p and q but against r quite logically a third voted yes for p against q so yes for r in all consistency the last third voted against p then yes for q and r whence the paradoxical result my young listeners resented that was obvious the idea that the demo cratic rule of majority can lead sometimes to such inconsistencies to aberrations where those who themselves voted the law by a majority could also violate it by a majority their disarray naturally led them to refuse the idea that this could be ineluctable and they sought actively solutions to this paradox of course among those solutions there was one where it would suffice to revise the passed law to repeal it but if none of the elders changed his mind no repeal would be possible since the vote would be reproduced just alike one of them ended up with a more elaborate solution when we are faced with three issues where the answers yes to any two of them logically implies the answer yes to the third it would be enough to examine only two of the issues out of three this would avoid contradiction and dissolve the paradox i made him observe that still remained a subsidiary question to set tle how to choose the issue to discard among the three should we or can we consider the chronological order for instance or resort to another method which would remain to be defined 5 an apologue a city council discusses the opportunity to build a community school and the place where it should be possibly built knowing that there are only two available grounds u and v in short let us say that the council has to answer the following three questions 46 labib haddad p should we build a school q should we build a school on ground u r should we build a school on ground v after a long deliberation the council answered yes question p by a majority vote then with the same impetus the council answered no question q by a majority vote the mayor then said that a school will thus be constructed on ground v one of the counselors asks for a vote on question r which excites the mirth of the assembly he insists question r is put to vote and to their surprise the council s answer is no by a majority we already know how this is possible if the council is divided into three equivalents groups h k l whose points of view are summed up in the following table h p q r k p q r l p q r thus after having raised issue p depending on whether the next issue raised is q or r one can believe in good faith or argue in bad faith that the decision is in favor of ground v or ground u respectively the order in which the questions are asked if one decided to stick to the first two questions would lead to three radically different decisions according to cases thus starting with p and q the council would be led to decide to build a school on ground v if the first two addressed questions were p and r it would be led to construct a school on ground u finally if q and r were put to a vote the decision would be not to build a school at all we hardly dare imagine the profit an unscrupulous mayor owner of ground v could draw putting to vote questions p and q solely the solution to have the council vote in order to decide itself which of the three questions should be discarded is hardly satisfactory the following three questions would have to be asked p should we discard question p q should we discard question q r should we discard question r the ultrafilter a peerless tool 47 we would face the following table which reflects the interests of the three groups followed by the collective result of the council s votes h p q r k p q r l p q r in other words the council decides that none of the three issues p q r can be discarded unless of course they try once again to remove one of the three issues p q r we thus see emerging a regression from one condorcet situation to another condorcet situation a kind of infinite descent that would truly be infinite it is true all these examples have a somewhat schematic aspect however if we do not always spot situations a la condorcet with that sharpness in every day life it is probably because we often avoid to ask the third question 6 a real situation yet here is a symptomatic example among others i would like you to known a poll was made in france by sofres from 6 to 10 february 1987 with a national representative panel of 1 000 people at the request of the weekly le point about a possible reform shortening the presidential term which was 7 years to 5 years there were three options p it is desirable to make this reform before the presidential election of 1988 q it is desirable to make this reform after the presidential election of 1988 r it is better not to do this reform at all 48 labib haddad here are the percentages there are 10 percent with no opinion here is the distribution among those who gave their opinions 39 90 chose p 25 90 chose q 26 90 chose r so 64 90 are for the reform 51 90 do not want it to be made after the presidential election and 65 90 do not want it done before let the numbers talk for themselves laissons aux chiffres leur propre e loquence this reform however ended up being done much later one easily understands why here is the time to add this of course what we have said about the condorcet paradox hitherto is about synchrony statics the diachronic study dynamics is much more complex clearly since it is necessary to take into account the evolution of indi vidual choices and preferences as well as any consultations leading to previous agreements as in game theory an infinite society governed by an ultrafilter would easily avoid all these disorders without having to resort to dictatorship as long as the ultrafilter is not trivial 2 limits of families of sets 1 preliminaries there is a special case when the upper and lower limits see section 33 above take a more set theoretic character than a topological one when the space e is equipped with its discrete topology in this case of course the set e of closed subsets of e is none other than the set p e of all subsets of e and the limits in this set are limits of a topology since a discrete space is locally compact for a given family e ei i i of subsets of e and any filter f on i whose grill is g by the ultrafilter a peerless tool 49 definition we have lim inf f e j g i j ei and lim sup f e j f i j ei when the ei s are just sets there is no need to specify the set e of which they are subsets the definitions remain unchanged whether e is supposed to be the union of all these ei or any other set containing them let us insist on the following point in the set theoretic case the upper and lower limits can also be written as follows lim inf f e j f i j ei and lim sup f e j g i j ei this can easily be seen introducing as in the topological case for each x the set i x i i i and x ei then verify that we have x lim inf f e i x f x j f i j ei x lim sup f e i x g x j g i j ei 2 limits of sequences of sets the upper and lower limits of sequences of sets appear in questions about measure and probability they represent in a sense tails of events and thus generalize the operations of union and intersection when the filter f has a countable base these two limits belong neces sarily to the tribe of measurable sets let e en n n be a sequence of arbitrary sets and f be a filter on the set n when the sequence is monotone increasing or decreasing its limit relative to fre chet s filter the filter of cofinite subsets in n always exists and is depending on cases either their union or their intersection when the filter f has a countable base b the upper and lower limits both belong to the algebra generated by the sets en indeed for each base b of the filter f we have lim inf f e j b n j en and lim sup f e j b n j en now i would like to give you an illustration of the use that can be made of set limits in a completely different domain 50 labib haddad 3 a preparatory lemma let e ei i i be a family of sets for each ordered pair of sets f and m set i f m i i i and f m f ei let then u be an ultrafilter on i then set l limu e lemma for each finite set f we have i f l u indeed by definition i i f l means that for each x f l we have i i x and for each x f l we have i i x therefore we have i f l x f l i x x frl i r i x now x l i x u and x l i r i x u so that the set i f l is the intersection of a finite number of subsets which belong to u whence the result 4 diagonals let e ei i i be a family of sets i shall say that a set d is a diagonal of the family e whenever for each finite set f the set of indices i f d has the same cardinal as i i e i f d i in particular a diagonal d of the family e is thus a set of which every finite piece is a finite piece of at least one of the ei s and still better is the same finite piece from a number i of the ei s we can pictorially say that d is thus upholstered with finite pieces from the ei s a filter f on a set i is said to be uniform when each x f has the same cardinal as i i e x i for that to be the case it is necessary and sufficient that no subset y i such that y i belongs to f set fi x x i and i rx i this is a filter on i the analog of fre chet s filter on n except if i is finite and not a singleton when i is finite the set fi is never a filter except if i is a singleton the uniform ultrafilters on i are thus the ultrafilters which are finer than the filter fi when i is infinite the uniform ultrafilters are not trivial when i is finite there are no uniform ultrafilters on i except in the trivial case when i is a singleton on a countable infinite set the uniform ultrafilters are precisely the non trivial ultrafilters the ultrafilter a peerless tool 51 the preliminary lemma yields immediately the following result 5 theorem for each family of sets e ei i i and each uniform ultrafilter u on i the limit limu e is a diagonal of the family e it can be shown conversely that each diagonal of the family e is a limit of this family relative to a suitable uniform ultrafilter on i how can diagonals be used 6 applications i shall take a first example in number theory the semigroup n take an infinite subset m n and a family of subsets b bm m m such that for each m m we have the following bm 0 m bm bm the additist arithmeticians would call bm a base of the interval 0 m we know that diagonals of the family b exist for each diagonal d of b we have d d n that is d is a base of n indeed take any n n we will show that we have n d d from the hypothesis we know that there exists an infinity of indices m m such that 0 n d 0 n bm taking such an m n we therefore have n 0 n bm 0 n bm and a fortiori n d d as aforesaid however we can do even better in this case for each subset a n and each integer n it is customary to consider the number r a n x y x a y a x y n of representations of the integer n as a sum of two integers from a taking into account the order of the terms in the sum we then set s a supn n r a n the result about the diagonal d of the family b can be completed as follows if we have s bm 6 s for each m m we also have s d 6 s indeed taking again n n and the index m n such that 0 n d 0 n bm observe that r d n r 0 n d n 6 r bm n s therefore s d 6 s as aforesaid 52 labib haddad this result appears in a paper by g grekos l haddad c helou j pihko on the erdo s tura n conjecture j number theory 102 2003 n 2 339 352 with a different proof it establishes the equiv alence of two forms of an erdo s tura n conjecture one local strong the other global weak so to say see the article for more details the result easily generalizes as follows special semigroups let s be an infinite commutative semigroup assume there is a special covering ax x s in the following sense for each x s the set ax is a finite subset of s such that x ax but x s s r ax and moreover s r y y s ax ay s take a subset m s such that m s for each x m let bx be a base for ax i e bx ax bx bx each diagonal d of the family b bx x m is then a base for s i e d d s if moreover for each x m we have s bx 6 s we will also have s d 6 s the proof follows the same lines as in the preceding proof indeed take x s from the hypothesis the set y m ax d ax by has the same cardinal as m which is also the cardinal of s now we have s r y y s ax ay s therefore there exists at least one y m such that on the one hand we have ax d ax by and on the other ax ay since by is a base for ay we have x by by hence x ax by ax by because x s s r ax since ax d ax by we have x d d and also r d x 6 r by x 6 s by 6 s this notion of diagonal appears naturally at first not through limits of sets but in collective choices of a deliberative assembly or if you will as a nonstandard vision let us see finally how to express that and prove it 7 the genesis of diagonals start with a family b bm m m with m an infinite subset of n and each bm a base for the interval 0 m suppose we have s bm 6 s for each m m using the notations introduced by a robinson to denote hyperreal objects consider the family b bm m m the set m being infinite there exists at least one hyperinteger m rm by permanence the subset b is a base for the interval 0 and we have s b 6 s so the ultrafilter a peerless tool 53 for each hyperinteger 0 we have b b let d b n for each integer n n we therefore have n d d which means that d is a base for n and moreover we still have s d 6 s b 6 s so to each hyperinteger mrm corresponds a subset d which is a diagonal of the family b i find that this way to look at things which emerged first is quite close to a certain intuition by its simplicity each of the bm s being a base for 0 m what is more natural than go and see what happens when m is an infinitely large integer that is how diagonals were born a short bibliography 1 arrow k social choice and individual values john wiley and sons new york 1963 2 bourbaki n fonctions d une variable re elle fvr v 36 ap pendice sur les corps de hardy diffusion c c l s paris 1976 topolo gie ge ne rale tg i 43 46 hermann paris 1971 3 cartan h the orie des filtres c r acad sc paris 205 1937 595 598 filtres et ultrafiltres ibid 777 779 4 choquet g convergences ann univ grenoble sect sci math phys 23 1947 1948 57 112 5 condorcet marquis de essai sur l application de l analyse a la probabilite des de cisions rendues a la pluralite des voix imprimerie royale paris 1785 a photographic reprint has been published by chelsea publishing company 1972 the discours has also been in serted in the following book condorcet sur les e lections et autres textes corpus des uvres de philosophie en langue franc aise fayard 1986 6 guilbaud g th les the ories de l inte re t ge ne ral et le proble me logique de l agre gation e conomie applique e 5 1952 n 4 oct de c 501 551 the paper was printed again as chapter ii in the follow ing book e le ments de la the orie mathe matiques des jeux monogra phies de recherches ope rationnelles 9 collection directed by g morlat afiro dunod paris 1968 54 labib haddad 7 haddad l une repre sentation des topologies c r acad sc paris 255 1962 2702 2704 sur quelques points de topologie ge ne rale the orie des nasses et des tramails ann fac sci univ clermont 44 fasc 7 1970 3 80 8 haddad l condorcet et les ultrafiltres in mathe matiques fini taires et analyse nonstandard publ math univ paris vii n 31 tome 2 1989 343 360 text of a lecture given at luminy in 1985 9 haddad l e lections ultrafiltres infinite simaux ou le paradoxe de condorcet in condorcet mathe maticien e conomiste philosophe p 87 91 homme politique colloque international paris juin 1988 e dition minerve 10 haddad l la double ultrapuissance se minaire d analyse universite de clermont ii 1987 1988 expose 24 11 los j o matrycach logicznych prace wroc lawskiegotowarzys twa naukowego wroc law 1949 12 los j quelques remarques the ore mes et proble mes sur les classes de finissables d alge bres in mathematical interpretation of for mal systems amsterdam 1955 98 113 13 robinson a non standard analysis north holland amster dam 1966 14 elsholtz christian and list christian a simple proof of sen s possibility theorem on majority decisions elemente der math ematik 60 2005 n 2 45 56 this is a translation into english of a paper written in french pub lished in tatra mountains mathematical publications l ultrafiltre un outil incomparable tatra mt math publ 31 2005 131 176 it was also posted as arxiv math 0702587 v 1 math ho 20 feb 2007 120 rue de charonne 75011 paris france email address labib haddad wanadoo fr http arxiv org abs math 0702587 abstract aknowledgement 1 an imaginary election 2 two steps 3 voting systems 4 remarks 5 two classical examples 6 some complements 7 how to avoid the condorcet paradox 8 lemma guilbaud 9 guilbaud s theorem 10 the dead lock and the way out 11 ultrafilters 12 ultrapowers 13 ultraproducts 14 the language 15 truth according to u 16 a fundamental lemma remark 17 the transfer theorem 18 an infinite assembly 19 the second degree 20 the second order and the double ultrapower 21 ultralimits 22 condorcet and ultrafilters 23 provisional conclusion 24 conditions for a consistent ranking 25 a general framework 26 a solution 27 remarks 28 the ultrafilter a conciliator 29 the ultrafilter a moderator 30 banach generalized limits 31 ultrafilter spaces 32 nasses creels 33 choquet and ultrafilters 34 as a fermata epilogue 1 the paradox of the marquis de condorcet 1 on the first example of condorcet 2 the second example of condorcet 3 comments 4 the council of elders 5 an apologue 6 a real situation 2 limits of families of sets 1 preliminaries 2 limits of sequences of sets 3 a preparatory lemma 4 diagonals 5 theorem 6 applications 7 the genesis of diagonals a short bibliography